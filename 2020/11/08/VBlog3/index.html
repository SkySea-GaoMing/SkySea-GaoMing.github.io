<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="VBlog3"><meta name="keywords" content="Java"><meta name="author" content="高明"><meta name="copyright" content="高明"><title>VBlog3 | SkySea-GaoMing</title><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Web项目优化解决方案"><span class="toc-number">1.1.</span> <span class="toc-text">Web项目优化解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#编写代码规范"><span class="toc-number">1.1.1.</span> <span class="toc-text">编写代码规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#提高服务性能"><span class="toc-number">1.1.2.</span> <span class="toc-text">提高服务性能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#系统安全"><span class="toc-number">1.1.3.</span> <span class="toc-text">系统安全</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#前端优化实战"><span class="toc-number">1.2.</span> <span class="toc-text">前端优化实战</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#缓存的使用"><span class="toc-number">1.3.</span> <span class="toc-text">缓存的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#缓存"><span class="toc-number">1.3.1.</span> <span class="toc-text">缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Web中的缓存"><span class="toc-number">1.3.2.</span> <span class="toc-text">Web中的缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#缓存的工作模式"><span class="toc-number">1.3.3.</span> <span class="toc-text">缓存的工作模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#缓存的常见问题"><span class="toc-number">1.3.4.</span> <span class="toc-text">缓存的常见问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数据一致性问题"><span class="toc-number">1.3.5.</span> <span class="toc-text">数据一致性问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#缓存穿透"><span class="toc-number">1.3.6.</span> <span class="toc-text">缓存穿透</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#缓存雪崩"><span class="toc-number">1.3.7.</span> <span class="toc-text">缓存雪崩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#缓存应用实战"><span class="toc-number">1.3.8.</span> <span class="toc-text">缓存应用实战</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Redis"><span class="toc-number">1.3.9.</span> <span class="toc-text">Redis</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2762516417,1589137703&amp;fm=26&amp;gp=0.jpg"></div><div class="author-info__name text-center">高明</div><div class="author-info__description text-center">JAVA工程师</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">45</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">10</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">6</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1608455550997&amp;di=bdcbdc0e59e4cf9547a1b4280b5f05ec&amp;imgtype=0&amp;src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F2019-02-20%2F5c6d045c8c9be.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">SkySea-GaoMing</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">VBlog3</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-11-08</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/">后端技术</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2020/11/08/VBlog3/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2020/11/08/VBlog3/"></span></a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>承接我的上一篇博客VBlog2。在这里感谢 Evan-Nightly的教程<br><a href="https://learner.blog.csdn.net/article/details/88925013" target="_blank" rel="noopener">https://learner.blog.csdn.net/article/details/88925013</a><br><a href="https://github.com/Antabot/White-Jotter" target="_blank" rel="noopener">https://github.com/Antabot/White-Jotter</a></p>
<h3 id="Web项目优化解决方案"><a href="#Web项目优化解决方案" class="headerlink" title="Web项目优化解决方案"></a>Web项目优化解决方案</h3><p>优秀代码有三个重要部分：代码规范、服务性能、系统安全</p>
<h4 id="编写代码规范"><a href="#编写代码规范" class="headerlink" title="编写代码规范"></a>编写代码规范</h4><p><img src="/2020/11/08/VBlog3/1.jpg" alt></p>
<h4 id="提高服务性能"><a href="#提高服务性能" class="headerlink" title="提高服务性能"></a>提高服务性能</h4><p>性能问题，除了算法之外，还要考虑软件架构、软件设计、软件部署，以及<br>一些具体的优化技巧</p>
<ol>
<li>前端 <img src="/2020/11/08/VBlog3/2.jpg" alt></li>
<li>后端 <img src="/2020/11/08/VBlog3/3.jpg" alt></li>
</ol>
<h4 id="系统安全"><a href="#系统安全" class="headerlink" title="系统安全"></a>系统安全</h4><p><img src="/2020/11/08/VBlog3/4.jpg" alt></p>
<h3 id="前端优化实战"><a href="#前端优化实战" class="headerlink" title="前端优化实战"></a>前端优化实战</h3><h3 id="缓存的使用"><a href="#缓存的使用" class="headerlink" title="缓存的使用"></a>缓存的使用</h3><p>这是white_jotter项目的最后一篇教程，我从头开始跟着作者敲了一遍，<br>对前后端分离项目有了初步的了解，在这里再次感谢Evan大佬</p>
<h4 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h4><p>学习过计算机系统都知道在CPU与内存之间存在高速静态随机存储器(SRAM)，<br>CPU的计算速度要远快于内存的读写速度，所以在两者之间使用高速缓存来<br>提高计算机的运行效率</p>
<h4 id="Web中的缓存"><a href="#Web中的缓存" class="headerlink" title="Web中的缓存"></a>Web中的缓存</h4><p>在做项目的过程中经常涉及点之间的衔接，要衔接就会有两个层次的不平衡</p>
<ul>
<li>一是性能的不平衡，包括速率、吞吐量等，造成这种不均衡的原因包括软件<br>、硬件、网络、协议、策略等、位置多个维度</li>
<li>二是数据本身活跃性的不均衡，有些数据会被频繁传递，有些很久才被访问<br>一次</li>
</ul>
<p>基于这两个不平衡，诞生了各种缓存方案</p>
<ol>
<li>浏览器缓存，包括本地的页面资源文件和 DNS 映射</li>
<li>DNS 服务器上的缓存（IP - 域名映射）</li>
<li>CDN，利用边缘 Cache 服务器提高访问速度</li>
<li>ORM 框架提供的缓存，比如 Spring Data JPA 的持久化上下文</li>
<li>利用高性能非关系型数据库（如 Redis）提供缓存服务，作为对关系型数据库<br>的补充</li>
<li>数据库提供的缓存，比如 MySQL 自带的查询缓存，会把执行语句与查询结果<br>以K-V 形式缓存在内存中（由于该缓存命中率较低，不建议使用，且 8.0 版本<br>已删除此功能）</li>
</ol>
<h4 id="缓存的工作模式"><a href="#缓存的工作模式" class="headerlink" title="缓存的工作模式"></a>缓存的工作模式</h4><p>缓存的实际使用可以分为以下几种模式</p>
<ol>
<li>Cache-Aside 边缘缓存，缓存作为数据库的补充，数据的获取策略是如果缓存<br>中存在则从缓存获取，如果不存在则从数据库获取，并写入缓存 <img src="/2020/11/08/VBlog3/5.jpg" alt></li>
<li>Read-Through 把数据库藏在缓存背后，一切请求交由缓存响应，如果命中缓存<br>则由缓存获取，如果没有命中则由数据库查询，写入缓存再由缓存返回，对于这种<br>模式写入缓存的操作会阻塞请求的响应，一般不用 <img src="/2020/11/08/VBlog3/6.jpg" alt></li>
<li>Write-Through 对于需要动态更新的应用，仅仅通过读操作触发缓存更新肯定<br>不够，如果数据库更新而缓存没有更新肯定不行，在更新数据库数据时，有两种常<br>见的操作缓存的模式，该模式的特点就是请求更新数据时，如果该数据在缓存中存<br>在那么先更新缓存再更新数据库</li>
<li>Write-Back 请求更新数据，先更新缓存，数据库何时更新不确定，目前只要<br>有缓存就行，这种异步的方式有数据不一致的风险，但是请求从缓存更新数据确<br>实足够快，在一些高并发大吞吐量的系统中比较常见，高并发的一个核心解决方<br>案就是缓存，高并发的复杂性很大程度上取决于缓存的复杂性</li>
</ol>
<h4 id="缓存的常见问题"><a href="#缓存的常见问题" class="headerlink" title="缓存的常见问题"></a>缓存的常见问题</h4><p>在使用缓存时要考虑如下问题</p>
<ul>
<li>数据一致性问题 缓存的数据和数据库中的数据由于各种原因产生差异</li>
<li>缓存穿透 虽然使用了缓存但是仍然有请求绕过缓存访问数据库</li>
<li>缓存雪崩 一大批缓存同时过期同一又有一大批请求到来，像雪崩一样</li>
</ul>
<h4 id="数据一致性问题"><a href="#数据一致性问题" class="headerlink" title="数据一致性问题"></a>数据一致性问题</h4><p>一个系统中如果数据都是不变的应该使用Cache-Aside模式，可以做到缓存和数据<br>库中的数据永远一致，需要考虑的就是缓存什么时候过期或者缓存更新的算法，尽<br>量做到找出热点数据即可。但是大部分系统是需要更新数据的，数据更新了但缓存<br>没有及时更新有些情况可能不会出现问题，但是在大多数场景不能接受，比如支<br>付宝，如果数据没能及时更新后果严重。如果在写场景下更新缓存，先更新数据<br>库再更新缓存</p>
<h4 id="缓存穿透"><a href="#缓存穿透" class="headerlink" title="缓存穿透"></a>缓存穿透</h4><p>引发缓存穿透的情形一般有两种情况，一是大量查询数据库中也没有的数据，这种<br>数据正常在缓存中也没有，但是每次还是必要地访问数据库，可以设置一个规则，<br>数据库中没有的数据也可以缓存起来，只要设置为空就行。另一种情形是数据库中<br>有一个数据，之前没人查询过，但是突然一瞬间来了大量的请求，缓存来不及反<br>应，压力就全到数据库上，有两种处理方法，一是限流，而是预判。限流就是限<br>制请求量，预判就是提前知道有些数据会被大量访问，提前缓存这些数据，也<br>叫缓存预热</p>
<h4 id="缓存雪崩"><a href="#缓存雪崩" class="headerlink" title="缓存雪崩"></a>缓存雪崩</h4><p>本质上雪崩和穿透是一类问题，只是出现的阶段不一样，穿透是缓存已经稳定建立<br>起来，雪崩是缓存突然同时过期，还有一种情况就是完全还没有缓存的时候一大波<br>请求涌入，比如缓存没有做持久化</p>
<h4 id="缓存应用实战"><a href="#缓存应用实战" class="headerlink" title="缓存应用实战"></a>缓存应用实战</h4><p>前后端都有缓存，前端缓存应对的是对静态页面资源的访问，本地缓存更具体地说<br>是同一用户的多次访问，而后端缓存更多地考虑多个用户的多次访问，面向的资源<br>主要是数据库里的数据。对于这个项目而言前台的图书信息和文章两部分数据库压<br>力比较大</p>
<h4 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h4><p>Redis和Mysql一样也是数据库管理系统，并不是为了缓存，Redis访问速度快但又<br>不能完全替代关系型数据库，所以适合用来做关系型数据库的缓存，接下来就使用<br>Spring Data Redis</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">高明</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://skysea-gaoming.github.io/2020/11/08/VBlog3/">https://skysea-gaoming.github.io/2020/11/08/VBlog3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/11/09/LeetCodeandnowcoder3/"><i class="fa fa-chevron-left">  </i><span>刷题3</span></a></div><div class="next-post pull-right"><a href="/2020/11/03/Java%E6%BA%90%E7%A0%812/"><span>Java源码2</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://skysea-gaoming.github.io/2020/11/08/VBlog3/';
  this.page.identifier = '2020/11/08/VBlog3/';
  this.page.title = 'VBlog3';
}
var d = document, s = d.createElement('script');
s.src = "https://" + '你的disqus的 short-name' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://你的disqus的 short-name.disqus.com/count.js" async></script></div></div><footer class="footer-bg" style="background-image: url(https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1608455550997&amp;di=bdcbdc0e59e4cf9547a1b4280b5f05ec&amp;imgtype=0&amp;src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F2019-02-20%2F5c6d045c8c9be.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By 高明</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>