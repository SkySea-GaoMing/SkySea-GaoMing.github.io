<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Mybatis"><meta name="keywords" content="Java"><meta name="author" content="高明"><meta name="copyright" content="高明"><title>Mybatis | SkySea-GaoMing's Blog</title><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#参考B站颜群老师Mybatis教程"><span class="toc-number">1.</span> <span class="toc-text">参考B站颜群老师Mybatis教程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis配置"><span class="toc-number">2.</span> <span class="toc-text">Mybatis配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#示例"><span class="toc-number">2.1.</span> <span class="toc-text">示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mybatis配置文件"><span class="toc-number">2.2.</span> <span class="toc-text">Mybatis配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建测试类"><span class="toc-number">2.3.</span> <span class="toc-text">创建测试类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis-statement方式的增删查改"><span class="toc-number">3.</span> <span class="toc-text">Mybatis-statement方式的增删查改</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mapper动态代理"><span class="toc-number">3.1.</span> <span class="toc-text">mapper动态代理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类型转换器"><span class="toc-number">4.</span> <span class="toc-text">类型转换器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建转换器"><span class="toc-number">4.1.</span> <span class="toc-text">创建转换器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在config中配置"><span class="toc-number">4.2.</span> <span class="toc-text">在config中配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在数据库中增加sex属性，在类中添加sex属性"><span class="toc-number">4.3.</span> <span class="toc-text">在数据库中增加sex属性，在类中添加sex属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resultMap"><span class="toc-number">4.4.</span> <span class="toc-text">resultMap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#两种取值符号以及parameterType"><span class="toc-number">5.</span> <span class="toc-text">两种取值符号以及parameterType</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#两种符号的区别"><span class="toc-number">5.1.</span> <span class="toc-text">两种符号的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#嵌套对象类型"><span class="toc-number">5.2.</span> <span class="toc-text">嵌套对象类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参数为HashMap"><span class="toc-number">5.3.</span> <span class="toc-text">参数为HashMap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis调用存储过程"><span class="toc-number">6.</span> <span class="toc-text">Mybatis调用存储过程</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1582898893694&amp;di=15958b0625c3bcbdd505353b8b5deaa4&amp;imgtype=0&amp;src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F068c0cbf1b1571976ada2e55a53b3a079e1614c5.jpg"></div><div class="author-info__name text-center">高明</div><div class="author-info__description text-center">前端技术，后端技术</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">30</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">11</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">6</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1582887545110&amp;di=c0427815f56b46f90d0beae680440130&amp;imgtype=0&amp;src=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F01786e56570a716ac7251c94aa512e.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">SkySea-GaoMing's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Mybatis</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-28</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/">后端技术</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2020/02/28/Mybatis/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2020/02/28/Mybatis/"></span></a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="参考B站颜群老师Mybatis教程"><a href="#参考B站颜群老师Mybatis教程" class="headerlink" title="参考B站颜群老师Mybatis教程"></a>参考B站颜群老师Mybatis教程</h2><h2 id="Mybatis配置"><a href="#Mybatis配置" class="headerlink" title="Mybatis配置"></a>Mybatis配置</h2><p>jdbc过于复杂，mybatis进行简化实现数据的持久化。<br>ORM:Object Relational Mapping 将对象与表联系起来，操作对象就可以自动操作表<br>mybatis-3.5.2.jar</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>先创建一张表pperson</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; create table pperson(</span><br><span class="line">    -&gt; id int,name varchar(20),age int);</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line">mysql&gt; insert into pperson values(1,&#39;zs&#39;,23);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br></pre></td></tr></table></figure>
<p>IDEA中创建实体类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pperson</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name ;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Pperson</span><span class="params">(<span class="keyword">int</span> id,String name,<span class="keyword">int</span> age)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id=id;</span><br><span class="line">		<span class="keyword">this</span>.name=name;</span><br><span class="line">		<span class="keyword">this</span>.age=age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Pperson</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//省略set get....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过mapper.xml文件创建表和类的映射关系<br>通过id值区分标签，resultType是返回类型，namespace放映射文件的路径，parameterType是<br>动态传入的参数类型<br>PpersonMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"org.gaoming.mapper.PersonMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"querybyid"</span> <span class="attr">resultType</span>=<span class="string">"org.gaoming.my.Pperson"</span> </span></span><br><span class="line"><span class="tag">    	<span class="attr">parameterType</span>=<span class="string">"int"</span> &gt;</span></span><br><span class="line">        select * from pperson where id=#&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Mybatis配置文件"><a href="#Mybatis配置文件" class="headerlink" title="Mybatis配置文件"></a>Mybatis配置文件</h3><p>conf.xml配置数据库信息和需要加载的映射文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"LOG4J"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">"org.gaoming.mapper.BooleanAndInt"</span> <span class="attr">javaType</span>=<span class="string">"Boolean"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开发环境（本机），可以切换环境 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">        	<span class="comment">&lt;!--事务的提交方式 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--数据库连接池 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/gaoming?serverTimezone=UTC"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"19991005"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!--加载映射文件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"org/gaoming/mapper/PpersonMapper.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="创建测试类"><a href="#创建测试类" class="headerlink" title="创建测试类"></a>创建测试类</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.gaoming.my;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Ttest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//加载mybatis配置文件为了访问数据库</span></span><br><span class="line">        Reader reader= Resources.getResourceAsReader(<span class="string">"conf.xml"</span>);</span><br><span class="line">        <span class="comment">//创建sql工厂</span></span><br><span class="line">        SqlSessionFactory sessionFactory=<span class="keyword">new</span> SqlSessionFactoryBuilder().build(reader);</span><br><span class="line">        <span class="comment">//可以操作数据库</span></span><br><span class="line">        SqlSession session=sessionFactory.openSession();</span><br><span class="line">        <span class="comment">//namespace+id 拿到唯一的sql语句</span></span><br><span class="line">        String statement=<span class="string">"org.gaoming.mapper.PersonMapper.querybyid"</span>;</span><br><span class="line">        <span class="comment">//传入入sql语句和动态参数，查询一个值</span></span><br><span class="line">        Pperson p=session.selectOne(statement,<span class="number">1</span>);</span><br><span class="line">        System.out.println(p);</span><br><span class="line">        session.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Mybatis-statement方式的增删查改"><a href="#Mybatis-statement方式的增删查改" class="headerlink" title="Mybatis-statement方式的增删查改"></a>Mybatis-statement方式的增删查改</h2><p>mybatis在语法上只允许一个输入值和一个输出值,#{xx}中如果是基本类型名字可以随便写，如果<br>是对象类型必须写对象的属性名，如果返回值类型是对象无论返回几个都写成一种</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"org.gaoming.mapper.PersonMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"querybyid"</span> <span class="attr">resultType</span>=<span class="string">"org.gaoming.my.Pperson"</span> </span></span><br><span class="line"><span class="tag">    	<span class="attr">parameterType</span>=<span class="string">"int"</span> &gt;</span></span><br><span class="line">        select * from pperson where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"addpperson"</span> <span class="attr">parameterType</span>=<span class="string">"org.gaoming.my.Pperson"</span>&gt;</span> </span><br><span class="line"> 		insert into pperson values(#&#123;id&#125;,#&#123;name&#125;,#&#123;age&#125;)</span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deletebyid"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span> </span><br><span class="line"> 		delete from pperson where id=#&#123;xxx&#125;</span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updatebyid"</span> <span class="attr">parameterType</span>=<span class="string">"org.gaoming.my.Pperson"</span>&gt;</span> </span><br><span class="line"> 		update pperson set name=#&#123;name&#125;,age=#&#123;age&#125; where id=#&#123;id&#125;</span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryall"</span> <span class="attr">resultType</span>=<span class="string">"org.gaoming.my.Pperson"</span>&gt;</span> </span><br><span class="line"> 		select * from pperson </span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>测试类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String statement=<span class="string">"org.gaoming.mapper.PersonMapper"</span>;</span><br><span class="line">        <span class="comment">//存入sql语句和动态参数</span></span><br><span class="line">        String s1=statement+<span class="string">".querybyid"</span>;</span><br><span class="line">        Pperson p=session.selectOne(s1,<span class="number">1</span>);</span><br><span class="line">        System.out.println(p);</span><br><span class="line">        String s2=statement+<span class="string">".queryall"</span>;</span><br><span class="line">        List&lt;Pperson&gt; list=session.selectList(s2);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        String s3=statement+<span class="string">".addpperson"</span>;</span><br><span class="line">        Pperson pp=<span class="keyword">new</span> Pperson(<span class="number">3</span>,<span class="string">"wu"</span>,<span class="number">25</span>);</span><br><span class="line">        <span class="comment">//返回几行受影响</span></span><br><span class="line">        <span class="keyword">int</span> count=session.insert(s3,pp);</span><br><span class="line">        <span class="comment">//jdbc方式需要commit</span></span><br><span class="line">        System.out.println(count);</span><br><span class="line">        session.commit();</span><br><span class="line">        String s4=statement+<span class="string">".deletebyid"</span>;</span><br><span class="line">        <span class="keyword">int</span> count2=session.delete(s4,<span class="number">1</span>);</span><br><span class="line">        session.commit();</span><br><span class="line">        String s5=statement+<span class="string">".updatebyid"</span>;</span><br><span class="line">        Pperson ppp=<span class="keyword">new</span> Pperson(<span class="number">2</span>,<span class="string">"mn"</span>,<span class="number">21</span>);</span><br><span class="line">        session.update(s5,ppp);</span><br><span class="line">        session.commit();</span><br><span class="line">        session.close();</span><br></pre></td></tr></table></figure>
<h3 id="mapper动态代理"><a href="#mapper动态代理" class="headerlink" title="mapper动态代理"></a>mapper动态代理</h3><p>约定优于配置。使用statement+id太麻烦可以简化。<br>在mapper包下创建Ppermapper接口，要使接口与mapper.xml文件一一对应，修改mapper文件<br>的namspace改为接口路径。根据接口名找到mapper.xml文件，根据接口的方法名找到sql标签<br>一般将mapper.xml文件和接口放在一个包中，接口不需要实现类</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"org.gaoming.mapper.Ppermapper"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.gaoming.mapper;</span><br><span class="line"><span class="keyword">import</span> org.gaoming.my.Pperson;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Ppermapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">//约定1.方法名与id一致</span></span><br><span class="line">    <span class="comment">//约定2.方法的输入参数和标签中的输入类型一致</span></span><br><span class="line">    <span class="comment">//约定3.方法返回值与标签返回类型一致</span></span><br><span class="line">    <span class="function">Pperson <span class="title">querybyid</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="function">List&lt;Pperson&gt; <span class="title">queryall</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">//没有resultType则为void</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addpperson</span><span class="params">(Pperson p)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deletebyid</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updatebyid</span><span class="params">(Pperson p)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Reader reader= Resources.getResourceAsReader(<span class="string">"conf.xml"</span>);</span><br><span class="line">       <span class="comment">//创建sql工厂</span></span><br><span class="line">       SqlSessionFactory sessionFactory=<span class="keyword">new</span> </span><br><span class="line">       SqlSessionFactoryBuilder().build(reader);</span><br><span class="line">       <span class="comment">//可以操作数据库</span></span><br><span class="line">       SqlSession session=sessionFactory.openSession();</span><br><span class="line">       Ppermapper p=session.getMapper(Ppermapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">       Pperson pp=p.querybyid(<span class="number">2</span>);</span><br><span class="line">       System.out.println(pp);</span><br><span class="line">       List&lt;Pperson&gt; list=p.queryall();</span><br><span class="line">       System.out.println(list);</span><br><span class="line">       Pperson ppp=<span class="keyword">new</span> Pperson(<span class="number">1</span>,<span class="string">"op"</span>,<span class="number">20</span>);</span><br><span class="line">       p.addpperson(ppp);</span><br><span class="line">       p.updatebyid(<span class="keyword">new</span> Pperson(<span class="number">2</span>,<span class="string">"kl"</span>,<span class="number">12</span>));</span><br><span class="line">       p.deletebyid(<span class="number">3</span>);</span><br><span class="line">       session.commit();</span><br><span class="line">       session.close();</span><br></pre></td></tr></table></figure>
<h2 id="类型转换器"><a href="#类型转换器" class="headerlink" title="类型转换器"></a>类型转换器</h2><p>Mybatis自带一些常见的类型处理器，也可以自定义类型处理器。java与jdbc转换。<br>bool与int转换</p>
<h3 id="创建转换器"><a href="#创建转换器" class="headerlink" title="创建转换器"></a>创建转换器</h3><p>实现typehandler接口或者继承basetypehandler</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.gaoming.mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.type.BaseTypeHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.type.JdbcType;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.type.TypeHandler;</span><br><span class="line"><span class="keyword">import</span> java.sql.CallableStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BooleanAndInt</span> <span class="keyword">extends</span> <span class="title">BaseTypeHandler</span>&lt;<span class="title">Boolean</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">//java代码到数据库</span></span><br><span class="line">    <span class="comment">//o是Java值，jdbcType是jdbc操作的数据库类型。ture 1 false 0</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNonNullParameter</span><span class="params">(PreparedStatement preparedStatement</span></span></span><br><span class="line"><span class="function"><span class="params">    	, <span class="keyword">int</span> i, Boolean o, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(o)</span><br><span class="line">            preparedStatement.setInt(i,<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            preparedStatement.setInt(i,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//数据库到Java</span></span><br><span class="line">    <span class="comment">//通过列名</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">getNullableResult</span><span class="params">(ResultSet resultSet, String s)</span> </span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> sex=resultSet.getInt(s);</span><br><span class="line">       <span class="keyword">if</span>(sex==<span class="number">1</span>)</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//通过下标</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">getNullableResult</span><span class="params">(ResultSet resultSet, <span class="keyword">int</span> i)</span> </span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sex=resultSet.getInt(i);</span><br><span class="line">        <span class="keyword">if</span>(sex==<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//通过存储过程</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">getNullableResult</span><span class="params">(CallableStatement callableStatement</span></span></span><br><span class="line"><span class="function"><span class="params">    	, <span class="keyword">int</span> i)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sex=callableStatement.getInt(i);</span><br><span class="line">        <span class="keyword">if</span>(sex==<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="在config中配置"><a href="#在config中配置" class="headerlink" title="在config中配置"></a>在config中配置</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">"org.gaoming.mapper.BooleanAndInt"</span> </span></span><br><span class="line"><span class="tag">       	<span class="attr">javaType</span>=<span class="string">"Boolean"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="在数据库中增加sex属性，在类中添加sex属性"><a href="#在数据库中增加sex属性，在类中添加sex属性" class="headerlink" title="在数据库中增加sex属性，在类中添加sex属性"></a>在数据库中增加sex属性，在类中添加sex属性</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter table pperson add column sex int;</span><br><span class="line">Query OK, 0 rows affected (0.15 sec)</span><br><span class="line">mysql&gt; update pperson set sex&#x3D;0;</span><br><span class="line">Query OK, 2 rows affected (0.01 sec)</span><br><span class="line">Rows matched: 2  Changed: 2  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from pperson;</span><br><span class="line">+------+------+------+------+</span><br><span class="line">| id   | name | age  | sex  |</span><br><span class="line">+------+------+------+------+</span><br><span class="line">|    2 | kl   |   12 |    0 |</span><br><span class="line">|    1 | op   |   20 |    0 |</span><br><span class="line">+------+------+------+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="resultMap"><a href="#resultMap" class="headerlink" title="resultMap"></a>resultMap</h3><p>如果类中的属性和表中的字段类型能够识别可以使用resultType，如果不能则需要使用resultMap<br>如果类型属性名和表中字段名一样则用resultType，否则使用resultMap<br>resultMap与id对应</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"querybyid"</span> <span class="attr">resultMap</span>=<span class="string">"ppersonresult"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">parameterType</span>=<span class="string">"int"</span> &gt;</span></span><br><span class="line">        select * from pperson where id = #&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"ppersonresult"</span> <span class="attr">type</span>=<span class="string">"org.gaoming.my.Pperson"</span>&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--对应分为主键和非主键，在数据库中将id变为主键 --&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--主键用id，非主键用result --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"age"</span> <span class="attr">column</span>=<span class="string">"age"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"sex"</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span> </span></span><br><span class="line"><span class="tag">        	<span class="attr">javaType</span>=<span class="string">"boolean"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--写对象属性名严格区分大小写 --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"addquery"</span> <span class="attr">parameterType</span>=<span class="string">"org.gaoming.my.Person"</span>&gt;</span></span><br><span class="line">        insert into person(id,name,age,sex) values(#&#123;id&#125;,#&#123;name&#125;,#&#123;age&#125;,#&#123;sex,</span><br><span class="line">        javaType=boolean,</span><br><span class="line">        jdbcType=INTEGER&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="两种取值符号以及parameterType"><a href="#两种取值符号以及parameterType" class="headerlink" title="两种取值符号以及parameterType"></a>两种取值符号以及parameterType</h2><ol>
<li>输入参数的类型如果是简单类型（8个基本类型+string) #{xx}xx可以任意写  </li>
<li>也可以使用${value},简单类型必须写value</li>
<li>输入参数是对象类型，#{属性名} ${属性名}</li>
</ol>
<h3 id="两种符号的区别"><a href="#两种符号的区别" class="headerlink" title="两种符号的区别"></a>两种符号的区别</h3><ol>
<li>井号会自动给string类型加上’’，使用#自动加’’相当于常量排序实际无效，根据的是字段</li>
<li>$ 原样输出，也就是说如果参数是string要写为 ‘${value}’，但是$适合动态排序</li>
<li>#{}可以防止sql注入，${}不可以</li>
<li>模糊查询时#必须存入参数时就写%，而$可以写为 ‘%${name}%’，传入参数不用写%</li>
</ol>
<ul>
<li>静态排序<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from pperson order by name desc</span><br></pre></td></tr></table></figure></li>
<li>动态排序<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from pperson order by $&#123;value&#125; desc</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="嵌套对象类型"><a href="#嵌套对象类型" class="headerlink" title="嵌套对象类型"></a>嵌套对象类型</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; alter table pperson add homeaddress varchar(20);</span><br><span class="line">Query OK, 0 rows affected (0.25 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table pperson add schooladdress varchar(20);</span><br><span class="line">Query OK, 0 rows affected (0.03 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from pperson;</span><br><span class="line">+----+------+------+------+-------------+---------------+</span><br><span class="line">| id | name | age  | sex  | homeaddress | schooladdress |</span><br><span class="line">+----+------+------+------+-------------+---------------+</span><br><span class="line">|  1 | op   |   20 |    0 | ls          | ss            |</span><br><span class="line">|  2 | kl   |   12 |    0 | sz          | gz            |</span><br><span class="line">|  4 | vx   |   21 |    1 | sz          | gz            |</span><br><span class="line">|  6 | nm   |   31 |    1 | sz          | gz            |</span><br><span class="line">+----+------+------+------+-------------+---------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>创建一个Address类并且补充到Pperson中</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.gaoming.my;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String homeAddress;</span><br><span class="line">    <span class="keyword">private</span> String schoolAddress;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Address</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Address</span><span class="params">(String homeAddress,String schoolAddress)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.homeAddress=homeAddress;</span><br><span class="line">    <span class="keyword">this</span>.schoolAddress=schoolAddress;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getHomeAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> homeAddress;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHomeAddress</span><span class="params">(String homeAddress)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.homeAddress = homeAddress;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSchoolAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> schoolAddress;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSchoolAddress</span><span class="params">(String schoolAddress)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.schoolAddress = schoolAddress;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.homeAddress+<span class="string">" "</span>+<span class="keyword">this</span>.schoolAddress;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改mapper文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"ppersonresult"</span> <span class="attr">type</span>=<span class="string">"org.gaoming.my.Pperson"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--对应分为主键和非主键，在数据库中将id变为主键 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--主键用id，非主键用result --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"age"</span> <span class="attr">column</span>=<span class="string">"age"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"sex"</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">javaType</span>=<span class="string">"boolean"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address.homeAddress"</span> <span class="attr">column</span>=<span class="string">"homeaddress"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address.schoolAddress"</span> <span class="attr">column</span>=<span class="string">"schooladdress"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryaddress"</span> <span class="attr">parameterType</span>=<span class="string">"org.gaoming.my.Pperson"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">resultMap</span>=<span class="string">"ppersonresult"</span> &gt;</span></span><br><span class="line">    select * from pperson where homeaddress =#&#123;address.homeAddress&#125; or</span><br><span class="line">    schooladdress=#&#123;address.schoolAddress&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改接口和测试类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Ppermapper p=session.getMapper(Ppermapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">      Pperson pp=<span class="keyword">new</span> Pperson();</span><br><span class="line">      Address add=<span class="keyword">new</span> Address(<span class="string">"ls"</span>,<span class="string">"gz"</span>);</span><br><span class="line">      pp.setAddress(add);</span><br><span class="line">      List&lt;Pperson&gt; list=p.queryaddress(pp);</span><br><span class="line">      System.out.println(list);</span><br><span class="line">      session.close();</span><br><span class="line">      <span class="comment">//接口</span></span><br><span class="line">      <span class="function">List&lt;Pperson&gt; <span class="title">queryaddress</span><span class="params">(Pperson p)</span></span>;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/02/28/Mybatis/number1.jpg" alt></p>
<h3 id="参数为HashMap"><a href="#参数为HashMap" class="headerlink" title="参数为HashMap"></a>参数为HashMap</h3><p>将map中的key匹配占位符#{}<br>修改mapper文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryhash"</span> <span class="attr">parameterType</span>=<span class="string">"HashMap"</span> <span class="attr">resultMap</span>=<span class="string">"ppersonresult"</span>&gt;</span></span><br><span class="line">    select * from pperson where age=#&#123;age&#125; or name=#&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改测试类和接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//接口</span></span><br><span class="line"><span class="function">List&lt;Pperson&gt; <span class="title">queryhash</span><span class="params">(HashMap&lt;String,Object&gt; map)</span></span>;</span><br><span class="line">HashMap&lt;String,Object&gt; map=<span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       map.put(<span class="string">"age"</span>,<span class="number">20</span>);</span><br><span class="line">       map.put(<span class="string">"name"</span>,<span class="string">"kl"</span>);</span><br><span class="line">       List&lt;Pperson&gt; list=p.queryhash(map);</span><br><span class="line">       System.out.println(list);</span><br></pre></td></tr></table></figure>
<h2 id="Mybatis调用存储过程"><a href="#Mybatis调用存储过程" class="headerlink" title="Mybatis调用存储过程"></a>Mybatis调用存储过程</h2></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">高明</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://skysea-gaoming.github.io/2020/02/28/Mybatis/">https://skysea-gaoming.github.io/2020/02/28/Mybatis/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/02/28/SpringBoot/"><i class="fa fa-chevron-left">  </i><span>SpringBoot</span></a></div><div class="next-post pull-right"><a href="/2020/02/28/Mysql/"><span>Mysql</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://skysea-gaoming.github.io/2020/02/28/Mybatis/';
  this.page.identifier = '2020/02/28/Mybatis/';
  this.page.title = 'Mybatis';
}
var d = document, s = d.createElement('script');
s.src = "https://" + '你的disqus的 short-name' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://你的disqus的 short-name.disqus.com/count.js" async></script></div></div><footer class="footer-bg" style="background-image: url(https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1582887545110&amp;di=c0427815f56b46f90d0beae680440130&amp;imgtype=0&amp;src=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F01786e56570a716ac7251c94aa512e.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By 高明</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>