<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="JavaWeb"><meta name="keywords" content="Java"><meta name="author" content="高明"><meta name="copyright" content="高明"><title>JavaWeb | SkySea-GaoMing</title><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#参考"><span class="toc-number">1.</span> <span class="toc-text">参考</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON基础"><span class="toc-number"></span> <span class="toc-text">JSON基础</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web基础"><span class="toc-number"></span> <span class="toc-text">web基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#web应用程序"><span class="toc-number">1.</span> <span class="toc-text">web应用程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#静态web"><span class="toc-number">2.</span> <span class="toc-text">静态web</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动态web"><span class="toc-number">3.</span> <span class="toc-text">动态web</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web服务器"><span class="toc-number">4.</span> <span class="toc-text">web服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#应用服务器"><span class="toc-number">5.</span> <span class="toc-text">应用服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常见的web服务器"><span class="toc-number">6.</span> <span class="toc-text">常见的web服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常见的应用服务器"><span class="toc-number">7.</span> <span class="toc-text">常见的应用服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代理"><span class="toc-number">8.</span> <span class="toc-text">代理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#正向代理"><span class="toc-number">8.1.</span> <span class="toc-text">正向代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#反向代理"><span class="toc-number">8.2.</span> <span class="toc-text">反向代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#用途"><span class="toc-number">8.3.</span> <span class="toc-text">用途</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安全性"><span class="toc-number">8.4.</span> <span class="toc-text">安全性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#一个例子"><span class="toc-number">8.5.</span> <span class="toc-text">一个例子</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#反向代理服务器的工作原理"><span class="toc-number">8.6.</span> <span class="toc-text">反向代理服务器的工作原理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tomcat服务器"><span class="toc-number"></span> <span class="toc-text">Tomcat服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat的目录"><span class="toc-number">1.</span> <span class="toc-text">Tomcat的目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat服务器的端口"><span class="toc-number">2.</span> <span class="toc-text">Tomcat服务器的端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat虚拟目录的映射"><span class="toc-number">3.</span> <span class="toc-text">Tomcat虚拟目录的映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat服务器自动映射"><span class="toc-number">4.</span> <span class="toc-text">Tomcat服务器自动映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#浏览器与服务器交互"><span class="toc-number">5.</span> <span class="toc-text">浏览器与服务器交互</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Javaweb应用的组成结构"><span class="toc-number">6.</span> <span class="toc-text">Javaweb应用的组成结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Javaweb应用的打包"><span class="toc-number">7.</span> <span class="toc-text">Javaweb应用的打包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat的体系结构"><span class="toc-number">8.</span> <span class="toc-text">Tomcat的体系结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Http协议"><span class="toc-number"></span> <span class="toc-text">Http协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Http请求"><span class="toc-number">1.</span> <span class="toc-text">Http请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#请求行"><span class="toc-number">2.</span> <span class="toc-text">请求行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#消息头"><span class="toc-number">3.</span> <span class="toc-text">消息头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Http响应"><span class="toc-number">4.</span> <span class="toc-text">Http响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重定向和请求转发的区别"><span class="toc-number">5.</span> <span class="toc-text">重定向和请求转发的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cookie"><span class="toc-number"></span> <span class="toc-text">Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Http无状态"><span class="toc-number">1.</span> <span class="toc-text">Http无状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie的常用方法"><span class="toc-number">2.</span> <span class="toc-text">Cookie的常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用cookie记录用户上一次访问时间"><span class="toc-number">3.</span> <span class="toc-text">使用cookie记录用户上一次访问时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#会话"><span class="toc-number">4.</span> <span class="toc-text">会话</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie的注意细节"><span class="toc-number">5.</span> <span class="toc-text">Cookie的注意细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Session"><span class="toc-number"></span> <span class="toc-text">Session</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie和Session的区别"><span class="toc-number">1.</span> <span class="toc-text">Cookie和Session的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session实现原理"><span class="toc-number">2.</span> <span class="toc-text">Session实现原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session对象的创建和销毁"><span class="toc-number">3.</span> <span class="toc-text">Session对象的创建和销毁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session防止表单重复提交"><span class="toc-number">4.</span> <span class="toc-text">Session防止表单重复提交</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#生成Token"><span class="toc-number">4.1.</span> <span class="toc-text">生成Token</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaBean"><span class="toc-number"></span> <span class="toc-text">JavaBean</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#标准MVC模型"><span class="toc-number">1.</span> <span class="toc-text">标准MVC模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PathVariable和RequestParam"><span class="toc-number">2.</span> <span class="toc-text">PathVariable和RequestParam</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet-JSP-JavaBean"><span class="toc-number">3.</span> <span class="toc-text">Servlet+JSP+JavaBean</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JDBC"><span class="toc-number"></span> <span class="toc-text">JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库驱动"><span class="toc-number">1.</span> <span class="toc-text">数据库驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DriverManager"><span class="toc-number">2.</span> <span class="toc-text">DriverManager</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务"><span class="toc-number">3.</span> <span class="toc-text">事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的隔离级别"><span class="toc-number">4.</span> <span class="toc-text">事务的隔离级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库连接池"><span class="toc-number">5.</span> <span class="toc-text">数据库连接池</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Filter"><span class="toc-number"></span> <span class="toc-text">Filter</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Filter实现拦截"><span class="toc-number">1.</span> <span class="toc-text">Filter实现拦截</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Filter的生命周期"><span class="toc-number">2.</span> <span class="toc-text">Filter的生命周期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#监听器"><span class="toc-number"></span> <span class="toc-text">监听器</span></a></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2762516417,1589137703&amp;fm=26&amp;gp=0.jpg"></div><div class="author-info__name text-center">高明</div><div class="author-info__description text-center">JAVA</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">40</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">10</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">6</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1603820855526&amp;di=814b302a9516d264731a29c3c1fce803&amp;imgtype=0&amp;src=http%3A%2F%2Fwenhui.whb.cn%2Fu%2Fcms%2Fwww%2F201804%2F16135756wr02.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">SkySea-GaoMing</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">JavaWeb</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-29</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/">后端技术</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2020/02/29/JavaWeb/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2020/02/29/JavaWeb/"></span></a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p>B站颜群老师JavaWeb教程，博客园孤傲苍狼的教程</p>
<h2 id="JSON基础"><a href="#JSON基础" class="headerlink" title="JSON基础"></a>JSON基础</h2><p>JSON: JavaScript Object Notation(JavaScript 对象表示法)<br>JSON 是存储和交换文本信息的语法，类似 XML。Key:Value，类似map,Key是<br>字符串，Value是任意类型，通过Key可以得到Value。目前SpringBoot中通过<br>@ResponseBody注解可以直接将Java对象转换为json格式的数据</p>
<ol>
<li>map集合转为json对象<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,Object&gt; map=<span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">map.put(<span class="string">"fdf"</span>,<span class="string">"vc"</span>);</span><br><span class="line">map.put(<span class="string">"vc"</span>,<span class="string">"vcz"</span>);</span><br><span class="line">map.put(<span class="string">"vcv"</span>,<span class="string">"q"</span>);</span><br><span class="line">JSONObject josn=JSONObject.fromObject(map);</span><br><span class="line"><span class="comment">//&#123;"fdf":"vc","vc":"vcz","vcv":"q"&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>javabean转换为json<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Address address;</span><br><span class="line">	<span class="comment">//省略构造器和构造方法...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String home;</span><br><span class="line">	<span class="keyword">private</span> String school;</span><br><span class="line">	<span class="comment">//省略构造器和构造方法...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Person per=<span class="keyword">new</span> Person();</span><br><span class="line">	per.setName(<span class="string">"vc"</span>);</span><br><span class="line">	per.setAge(<span class="number">20</span>);</span><br><span class="line">	Address address=<span class="keyword">new</span> Address();</span><br><span class="line">	address.setHome(<span class="string">"vsdf"</span>);</span><br><span class="line">	address.setSchool(<span class="string">"vcxfa"</span>);</span><br><span class="line">	per.setAddress(address);</span><br><span class="line">	JSONObject josn=JSONObject.fromObject(per);</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		&#123;"address":&#123;"school":"vcxfa","home":"vsdf"&#125;,</span></span><br><span class="line"><span class="comment">		"name":"vx",</span></span><br><span class="line"><span class="comment">		"age":20&#125;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>String变为json,String有格式要求<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//两种写法</span></span><br><span class="line">	String str=<span class="string">"&#123;\"name\":\"zs\",\"age\":23&#125;"</span>;</span><br><span class="line">	String strr=<span class="string">"&#123;'name':'zs','age':23&#125;"</span>;</span><br><span class="line">	JSONObject json=JSONObject.fromObject(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>文件变为json,先将文件变为字符串，字符串变为json<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"name"</span>:<span class="string">"zs"</span>,</span><br><span class="line">	<span class="attr">"age"</span>:<span class="number">22</span>,</span><br><span class="line">	<span class="attr">"address"</span>:&#123;<span class="attr">"home"</span>:<span class="string">"vcx"</span>,<span class="attr">"school"</span>:<span class="string">"zv"</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用commons.io.jar</span></span><br><span class="line">String s=FileUtils.readFileToString(file);</span><br></pre></td></tr></table></figure></li>
<li>生成json文件<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JSONObject json=JSONObject.fromObject(map);</span><br><span class="line">FileWriter file=<span class="keyword">new</span> FileWriter(pathname)</span><br><span class="line">json.write(file);</span><br><span class="line">file.close();</span><br></pre></td></tr></table></figure></li>
<li>JsonArray<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String str=<span class="string">"[&#123;\"name\":\"zs\",\"age\":23&#125;,&#123;&#125;,&#123;&#125;]"</span>;</span><br><span class="line">JSONArray array=JSONArray.fromObject(str);</span><br></pre></td></tr></table></figure></li>
<li>map转为jsonarray以及jsaonarray转为map<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">JSONArray array=JSONArray.fromObject(map);</span><br><span class="line"><span class="comment">//[&#123;"vcv":"q","fdf":"vc","vc":"vcz"&#125;]</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;array.size();i++)</span><br><span class="line">&#123;</span><br><span class="line">	JSONObject obj=(JSONObject)array.get(i);</span><br><span class="line">	Set&lt;String&gt; keys=obj.KeySet();</span><br><span class="line">	<span class="keyword">for</span>(String key:keys)</span><br><span class="line">		&#123;</span><br><span class="line">			map.put(key,obj.get(key));</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="web基础"><a href="#web基础" class="headerlink" title="web基础"></a>web基础</h2><p>web在英语里就是网页的意思，表示Internet主机上供外界访问的资源</p>
<ul>
<li>静态网页 web网页中供外部访问的资源始终是不变的，跟访问者无关</li>
<li>动态网页 供人们访问的资源是随时间、地点、用户操作的改变而改变</li>
<li>静态资源开发技术 Html</li>
<li>动态资源开发技术 早期是JSP/Servlet，现在是Vue+SpringBoot</li>
<li>在Java中动态web资源开发技术统称为Javaweb</li>
</ul>
<h3 id="web应用程序"><a href="#web应用程序" class="headerlink" title="web应用程序"></a>web应用程序</h3><p>web应用程序指供用户访问的程序，简称为web应用。把多个web资源放在<br>一个目录中以组成一个web应用。一个web应用由多个静态资源和动态资<br>源组成，比如html,css,js,jsp,java程序jar包和配置文件等</p>
<ul>
<li>web应用开发好后如果要外界访问必须将web应用交给web服务器管理，<br>应用服务器不能被外网访问</li>
</ul>
<h3 id="静态web"><a href="#静态web" class="headerlink" title="静态web"></a>静态web</h3><p>.html是网页的后缀，如果在一个服务器上直接读取这些内容，那么意味着<br>将网页的内容通过网络服务器展现给用户 <img src="/2020/02/29/JavaWeb/number1.jpg" alt></p>
<ol>
<li>在静态WEB程序中，客户端使用WEB浏览器经过网络连接到服务器上，使<br>用HTTP协议发起一个请求告诉服务器我现在需要得到哪个页面，所有请求<br>交给WEB服务器，之后WEB服务器根据用户需要，从文件系统（存放了所有<br>静态页面的磁盘）取出内容。之后通过WEB服务器返回给客户端，客户端接<br>收内容之后经过浏览器渲染解析，得到显示的效果</li>
<li>缺点是Web页面中的内容无法动态更新，所有的用户每时每刻看见的内<br>容和最终效果都是一样的为了可以让静态的WEB的显示更加好看，可以加<br>入了JavaScript以完成一些页面上的显示特效，但是这些特效都是在客<br>户端上借助于浏览器展现给用户的，所以在服务器上本身并没有任何的<br>变化，并不能叫做动态页面</li>
<li>静态WEB无法连接数据库，无法实现和用户的交互。使用数据库保存数<br>据是现在大多数系统的选择，因为数据库中可以方便地管理数据，增删改<br>查操作可以使用标准的SQL语句完成</li>
</ol>
<h3 id="动态web"><a href="#动态web" class="headerlink" title="动态web"></a>动态web</h3><p>所谓的动态不是指页面会动，主要的特性的是“WEB的页面展示效果因时因<br>人而变”，而且动态WEB具有交互性，WEB的页面的内容可以动态更新。常<br>见技术有jsp/servlet,目前主流是vue+springboot <img src="/2020/02/29/JavaWeb/number2.jpg" alt></p>
<ol>
<li>动态WEB中，程序依然使用客户端和服务端，客户端依然使用浏览器<br>（FireFox等），通过网络(Network)连接到服务器上，使用HTTP协议<br>发起请求（Request），现在的所有请求都先经过一个WEB Server Plugin<br>（服务器插件）来处理，此插件用于区分是请求的是静态资源(*.htm或<br>者是*.htm)还是动态资源。</li>
<li>如果WEB Server Plugin发现客户端请求的是静态资源(*.htm或者是<br>*.htm)，则将请求直接转交给WEB服务器，之后WEB服务器从文件系统中<br>取出内容，发送回客户端浏览器进行解析执行。</li>
<li>如果WEB Server Plugin发现客户端请求的是动态资源（*.jsp等），<br>则先将请求转交给WEB  Container(WEB容器)，在WEB Container中连接<br>数据库，从数据库中取出数据等一系列操作后动态拼凑页面的展示内容，<br>拼凑页面的展示内容后，把所有的展示内容交给WEB服务器，之后通过WEB<br>服务器将内容发送回客户端浏览器进行解析执行。</li>
</ol>
<h3 id="web服务器"><a href="#web服务器" class="headerlink" title="web服务器"></a>web服务器</h3><ol>
<li>Web服务器是指驻留于因特网上某种类型计算机的程序，是可以向发出<br>请求的浏览器提供文档的程序。当Web浏览器（客户端）连到服务器上并请<br>求文件时，服务器将处理该请求并将文件反馈到该浏览器上，附带的信息<br>会告诉浏览器如何查看该文件（即文件类型） <img src="/2020/02/29/JavaWeb/number3.jpg" alt></li>
<li>服务器是一种被动程序：只有当Internet上运行在其他计算机中的浏<br>览器发出请求时，服务器才会响应 <img src="/2020/02/29/JavaWeb/number4.jpg" alt></li>
</ol>
<h3 id="应用服务器"><a href="#应用服务器" class="headerlink" title="应用服务器"></a>应用服务器</h3><p>参考 <a href="https://www.zhihu.com/question/20096067" target="_blank" rel="noopener">https://www.zhihu.com/question/20096067</a><br>严格意义上web服务器只负责处理HTTP协议，应用服务器处理动态内容，<br>不过应用服务器也支持HTTP协议，大多数生成环境都有web服务器充当<br>应用服务器的反向代理</p>
<h3 id="常见的web服务器"><a href="#常见的web服务器" class="headerlink" title="常见的web服务器"></a>常见的web服务器</h3><ol>
<li>WebSphere WebSphere Application Server 是一种功能完善、开放<br>的Web应用程序服务器，是IBM公司电子商务计划的核心部分，它是基于<br>Java 的应用环境，用于建立、部署和管理 Internet 和 Intranet<br>Web 应用程序。这一整套产品进行了扩展，以适应 Web应用程序<br>服务器的需要，范围从简单到高级直到企业级 <img src="/2020/02/29/JavaWeb/number6.jpg" alt></li>
<li>Microsoft的Web服务器产品为Internet Information Services<br>（IIS），IIS是允许在公共Intranet或Internet上发布信息的Web服<br>务器。ⅡS是目前最流行的Web服务器产品之一，很多著名的网站都是建<br>立在ⅡS的平台上。IIS提供一个图形界面的管理工具，称为Internet<br>信息服务管理器，可用于监视配置和控制Internet服务。 <img src="/2020/02/29/JavaWeb/number8.jpg" alt></li>
<li>Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器，<br>同时也提供了IMAP/POP3/SMTP服务</li>
</ol>
<h3 id="常见的应用服务器"><a href="#常见的应用服务器" class="headerlink" title="常见的应用服务器"></a>常见的应用服务器</h3><ol>
<li>WebLogic WebLogic是美国Oracle公司出品的一个application<br>server。BEA WebLogic是用于开发、集成、部署和管理大型分布式Web<br>应用、网络应用和数据库应用的Java应用服务器。将Java的动态功能和<br>Java Enterprise标准的安全性引入大型网络应用的开发、集成、部署<br>和管理之中。是目前应用最广泛的Web服务器，支持J2EE规范，而且不<br>断的完善以适应新的开发要求 <img src="/2020/02/29/JavaWeb/number5.jpg" alt></li>
<li>Tomcat Tomcat是一个实现了JAVA EE标准的最小的WEB服务是Apache<br>软件基金会的Jakarta 项目中的一个核心项目，由Apache、Sun 和其他一<br>些公司及个人共同开发而成。因为Tomcat 技术先进、性能稳定，而且开源<br>免费，因而深受Java 爱好者的喜爱并得到了部分软件开发商的认可，成<br>为目前比较流行的Web 应用服务器。学习JavaWeb开发一般都使用Tomcat<br>服务器，该服务器支持全部JSP以及Servlet规范 <img src="/2020/02/29/JavaWeb/number7.jpg" alt></li>
</ol>
<h3 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h3><p><a href="http://blog.csdn.net/m13666368773/article/details/8060481" target="_blank" rel="noopener">http://blog.csdn.net/m13666368773/article/details/8060481</a></p>
<h4 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h4><p>正向代理是一个位于客户端和原始服务器之间的服务器，为了从原始服务器<br>获取数据，客户端向代理发送请求并指定目标（原始服务器），然后代理向<br>原始服务器转交请求并将获得的内容返回给客户端，客户端必须进行一些特<br>别的设置才能使用正向代理。代理可以向原始服务器隐藏客户信息，也可以<br>不隐藏</p>
<h4 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h4><p>举例:用户想访问 ooxx.me/readme，但ooxx.me上并不存在readme页面，<br>他是偷偷从另外一台服务器上取回来,然后作为自己的内容吐给用户，但用<br>户并不知情，这很正常,用户一般都很笨。这里所提到的ooxx.me 这个域名<br>对应的服务器就设置了反向代理功能。<br>反向代理正好相反，对于客户端而言它就像是原始服务器，并且客户端不<br>需要进行任何特别的设置。客户端向反向代理的命名空间 (name-space)<br>中的内容发送普通请求，接着反向代理将判断向何处(原始服务器)转交<br>请求，并将获得的内容返回给客户端，就像这些内容原本就是它自己的<br>一样</p>
<h4 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h4><p>正向代理的典型用途是为在防火墙内的局域网客户端提供访问Internet的<br>途径。正向代理还可以使用缓冲特性减少网络使用率。反向代理的典型用途<br>是将防火墙后面的服务器提供给Internet用户访问。反向代理还可以为后<br>端的多台服务器提供负载平衡，或为后端较慢的服务器提供缓冲服务</p>
<h4 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h4><p>从安全性来讲：正向代理允许客户端通过它访问任意网站并且隐藏客户端<br>自身，因此你必须采取安全措施以确保仅为经过授权的客户端提供服务。<br>反向代理对外都是透明的，访问者并不知道自己访问的是一个代理</p>
<h4 id="一个例子"><a href="#一个例子" class="headerlink" title="一个例子"></a>一个例子</h4><p>a,b,c三个人，正向代理是a通过b向C借钱，a知道c的存在 。反向代理是<br>a向b借钱，b又向C借，a不知道c的存在</p>
<h4 id="反向代理服务器的工作原理"><a href="#反向代理服务器的工作原理" class="headerlink" title="反向代理服务器的工作原理"></a>反向代理服务器的工作原理</h4><p>反向代理方式是指以代理服务器来接受Internet上的连接请求，然后将<br>请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给<br>Internet上请求连接的客户端，此时代理服务器对外就表现为一个<br>服务器 <img src="/2020/02/29/JavaWeb/42.jpg" alt><br>反向代理服务器通常有两种模型，它可以作为内容服务器的替身，也可<br>以作为内容服务器集群的负载均衡器 <img src="/2020/02/29/JavaWeb/43.jpg" alt> <img src="/2020/02/29/JavaWeb/44.jpg" alt></p>
<h2 id="Tomcat服务器"><a href="#Tomcat服务器" class="headerlink" title="Tomcat服务器"></a>Tomcat服务器</h2><h3 id="Tomcat的目录"><a href="#Tomcat的目录" class="headerlink" title="Tomcat的目录"></a>Tomcat的目录</h3><ol>
<li>不管什么web资源，想被远程计算机访问，都必须有一个与之对应的网络<br>通信程序，当用户来访问时，这个网络通信程序读取web资源数据，并把数<br>据发送给来访者</li>
<li>WEB服务器就是这样一个程序，它用于完成底层网络通迅。使用这些服务<br>器，We应用的开发者只需要关注web资源怎么编写，而不需要关心资源如何<br>发送到客户端手中，从而极大的减轻了开发者的开发工作量</li>
<li>Tomcat的目录结构  <img src="/2020/02/29/JavaWeb/number9.jpg" alt></li>
</ol>
<ul>
<li>bin 存放Tomcat启动和关闭的脚本文件 startup.bat启动服务器</li>
<li>conf 存放Tomcat服务器的各种配置文件</li>
<li>lib 存放Tomcat服务器的支撑jar包</li>
<li>logs 存放日志文件</li>
<li>temp 存放Tomcat运行时产生的临时文件</li>
<li>webapps web应用所在的目录，即供外界访问的资源的存放目录</li>
<li>work Tomcat的工作目录</li>
</ul>
<h3 id="Tomcat服务器的端口"><a href="#Tomcat服务器的端口" class="headerlink" title="Tomcat服务器的端口"></a>Tomcat服务器的端口</h3><ol>
<li>Tomcat的所有配置都放在conf文件夹之中，里面的server.xml文件是配<br>置的核心文件。如果想修改Tomcat服务器的启动端口，则可以在server.xml<br>配置文件中的Connector节点进行的端口修改。改变*.xml文件后必须重新<br>启动Tomcat服务器<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8888"</span> <span class="attr">redirectPort</span>=<span class="string">"8443"</span> </span></span><br><span class="line"><span class="tag">	<span class="attr">connectionTimeout</span>=<span class="string">"20000"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Tomcat虚拟目录的映射"><a href="#Tomcat虚拟目录的映射" class="headerlink" title="Tomcat虚拟目录的映射"></a>Tomcat虚拟目录的映射</h3><ol>
<li>Web应用开发好后，若想供外界访问，需要把web应用所在目录交给web服<br>务器管理，这个过程称之为虚似目录的映射</li>
<li>在Host标签之间加入以下内容，Context表示上下文，代表的就是一个<br>JavaWeb应用，Context元素有两个属性</li>
</ol>
<ul>
<li>path 用来配置虚似目录，必须以”/“开头。</li>
<li>docBase 配置此虚拟目录对应着硬盘上的Web应用所在目录</li>
</ul>
<ol start="3">
<li>即可将在D盘下的JavaWebProject这个JavaWeb应用映射到JavaWebApp<br>这个虚拟目录上，JavaWebApp这个虚拟目录是由Tomcat服务器管理的，<br>JavaWebApp是一个硬盘上不存在的目录是我们自己随便写的一个目录，<br>也就是虚拟的一个目录，所以称之为”虚拟目录”</li>
<li>name是虚拟主机的名字，appBase是存放多个web应用的文件夹。<br>平时我们在互联网上使用域名 <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> 访问百度的网站时，其实就<br>是在访问一个名称是 <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> 的虚拟主机<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">"localhost"</span>  <span class="attr">appBase</span>=<span class="string">"webapps"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">unpackWARs</span>=<span class="string">"true"</span> <span class="attr">autoDeploy</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">xmlValidation</span>=<span class="string">"false"</span> <span class="attr">xmlNamespaceAware</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">"/JavaWebApp"</span> <span class="attr">docBase</span>=<span class="string">"D:\JavaWebProject"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Tomcat服务器自动映射"><a href="#Tomcat服务器自动映射" class="headerlink" title="Tomcat服务器自动映射"></a>Tomcat服务器自动映射</h3><ol>
<li>tomcat服务器会自动管理webapps目录下的所有web应用，并把它映射成<br>虚似目录。换句话说，tomcat服务器webapps目录中的web应用，外界可以直<br>接访问</li>
<li>直接将web应用放到webapps目录下，Tomcat会自动将JavaWeb应用映射<br>一个同名的虚拟目录</li>
</ol>
<h3 id="浏览器与服务器交互"><a href="#浏览器与服务器交互" class="headerlink" title="浏览器与服务器交互"></a>浏览器与服务器交互</h3><p>当我们打开浏览器，在浏览器的地址栏中输入URL地址<br><a href="http://www.gacl.cn:8080/JavaWebDemo1/1.jsp" target="_blank" rel="noopener">http://www.gacl.cn:8080/JavaWebDemo1/1.jsp</a> 去访问服务器上的1.jsp<br>这个web资源的过程中，浏览器和服务器都做了神马操作呢，我们是怎么在浏<br>览器里面看到1.jsp这个web资源里面的内容的呢？</p>
<ol>
<li>浏览器根据主机名 <a href="http://www.gacl.cn" target="_blank" rel="noopener">www.gacl.cn</a> 去操作系统的Hosts文件中查找主机名对<br>应的IP地址。</li>
<li>浏览器如果在操作系统的Hosts文件中没有找到对应的IP地址，就去互联网<br>上的DNS服务器上查找 <a href="http://www.gacl.cn" target="_blank" rel="noopener">www.gacl.cn</a> 这台主机对应的IP地址</li>
<li>浏览器查找到 <a href="http://www.gacl.cn" target="_blank" rel="noopener">www.gacl.cn</a> 这台主机对应的IP地址后，就使用IP地址连<br>接到Web服务器。</li>
<li>浏览器连接到web服务器后，就使用http协议向服务器发送请求，发送请求<br>的过程中，浏览器会向Web服务器以Stream(流)的形式传输数据，告诉Web服<br>务器要访问服务器里面的哪个Web应用下的Web资源 <img src="/2020/02/29/JavaWeb/number10.jpg" alt></li>
<li>GET：告诉Web服务器，浏览器是以GET的方式向服务器发请求</li>
<li>/JavaWebDemo1/1.jsp：告诉Web服务器，浏览器要访问JavaWebDemo1应<br>用里面的1.jsp这个Web资源</li>
<li>HTTP/1.1：告诉Web服务器，浏览器是以HTTP协议请求的，使用的是1.1的<br>版本</li>
<li>服务器接收到浏览器传输的数据后，开始解析接收到的数据,将读到的内容<br>再以Stream(流)的形式传输给浏览器</li>
</ol>
<h3 id="Javaweb应用的组成结构"><a href="#Javaweb应用的组成结构" class="headerlink" title="Javaweb应用的组成结构"></a>Javaweb应用的组成结构</h3><p>开发JavaWeb应用时，不同类型的文件有严格的存放规则，否则不仅可能会使<br>web应用无法访问，还会导致web服务器启动报错 <img src="/2020/02/29/JavaWeb/number11.jpg" alt></p>
<ol>
<li>WEB-INF此文件夹必须位于WebRoot文件夹里面，而且必须以这样的形式去<br>命名，字母都要大写</li>
<li>web.xml 配置文件，有格式要求，此文件必须以这样的形式去命名，并且<br>必须放置到WEB-INF文件夹中</li>
</ol>
<h3 id="Javaweb应用的打包"><a href="#Javaweb应用的打包" class="headerlink" title="Javaweb应用的打包"></a>Javaweb应用的打包</h3><p>在Java中，使用”jar”命令将JavaWeb应用打包成一个War包</p>
<ol>
<li>平时开发完JavaWeb应用后，一般都会将JavaWeb应用打包成一个war包，然<br>后将这个war包放到Tomcat服务器的webapps目录下，当Tomcat服务器启动时，<br>就会自动将webapps目录下的war包解压</li>
</ol>
<h3 id="Tomcat的体系结构"><a href="#Tomcat的体系结构" class="headerlink" title="Tomcat的体系结构"></a>Tomcat的体系结构</h3><ol>
<li>Tomcat服务器的启动是基于一个server.xml文件的，Tomcat启动的时候首<br>先会启动一个Server，Server里面就会启动Service，Service里面就会启动<br>多个”Connector(连接器)”，每一个连接器都在等待客户机的连接，当有用户<br>使用浏览器去访问服务器上面的web资源时，首先是连接到Connector(连接器<br>)，Connector(连接器)是不处理用户的请求的，而是将用户的请求交给一个<br>Engine(引擎)去处理，Engine(引擎)接收到请求后就会解析用户想要访问<br>的Host，然后将请求交给相应的Host，Host收到请求后就会解析出用户想<br>要访问这个Host下面的哪一个Web应用,一个web应用对应一个Context <img src="/2020/02/29/JavaWeb/number12.jpg" alt><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Server</span> <span class="attr">port</span>=<span class="string">"8005"</span> <span class="attr">shutdown</span>=<span class="string">"SHUTDOWN"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Service</span> <span class="attr">name</span>=<span class="string">"Catalina"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8080"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8443"</span> </span></span><br><span class="line"><span class="tag">    	<span class="attr">protocol</span>=<span class="string">"org.apache.coyote.http11.Http11Protocol"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">maxThreads</span>=<span class="string">"150"</span> <span class="attr">SSLEnabled</span>=<span class="string">"true"</span> <span class="attr">scheme</span>=<span class="string">"https"</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">secure</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">clientAuth</span>=<span class="string">"false"</span> <span class="attr">sslProtocol</span>=<span class="string">"TLS"</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">keystoreFile</span>=<span class="string">"conf/.keystore"</span> <span class="attr">keystorePass</span>=<span class="string">"123456"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8009"</span> <span class="attr">protocol</span>=<span class="string">"AJP/1.3"</span> <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Engine</span> <span class="attr">name</span>=<span class="string">"Catalina"</span> <span class="attr">defaultHost</span>=<span class="string">"localhost"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">"localhost"</span>  <span class="attr">appBase</span>=<span class="string">"webapps"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">unpackWARs</span>=<span class="string">"true"</span> <span class="attr">autoDeploy</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">"org.apache.catalina.valves.AccessLogValve"</span> </span></span><br><span class="line"><span class="tag">        	<span class="attr">directory</span>=<span class="string">"logs"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">prefix</span>=<span class="string">"localhost_access_log."</span> <span class="attr">suffix</span>=<span class="string">".txt"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">pattern</span>=<span class="string">"%h %l %u %t <span class="symbol">&amp;quot;</span>%r<span class="symbol">&amp;quot;</span> %s %b"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">"www.gacl.cn"</span> <span class="attr">appBase</span>=<span class="string">"F:\JavaWebApps"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">""</span> <span class="attr">docBase</span>=<span class="string">"F:\JavaWebApps\JavaWebDemo1"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Engine</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Service</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Server</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="Http协议"><a href="#Http协议" class="headerlink" title="Http协议"></a>Http协议</h2><p>HTTP是hypertext transfer protocol（超文本传输协议）的简写，它是<br>TCP/IP协议的一个应用层协议，用于定义WEB浏览器与WEB服务器之间交换<br>数据的过程。客户端连上web服务器后，若想获得web服务器中的某个web资<br>源，需遵守一定的通讯格式，HTTP协议用于定义客户端与web服务器通迅的<br>格式</p>
<ol>
<li>HTTP协议的版本：HTTP/1.0、HTTP/1.1</li>
<li>在HTTP1.0协议中，客户端与web服务器建立连接后，只能获得一个web<br>资源。在HTTP1.1协议，允许客户端与web服务器建立连接后，在一个连接上<br>获取多个web资源</li>
</ol>
<h3 id="Http请求"><a href="#Http请求" class="headerlink" title="Http请求"></a>Http请求</h3><ol>
<li>客户端连上服务器后，向服务器请求某个web资源，称之为客户端向服务<br>器发送了一个HTTP请求</li>
<li>一个完整的HTTP请求包括如下内容 一个请求行、若干消息头、以及实体内容<br><img src="/2020/02/29/JavaWeb/number13.jpg" alt></li>
</ol>
<h3 id="请求行"><a href="#请求行" class="headerlink" title="请求行"></a>请求行</h3><ol>
<li>请求行中的GET称之为请求方式，请求方式有：POST、GET、HEAD、OPTIONS<br>、DELETE、TRACE、PUT，常用的有： GET、 POST</li>
<li>用户如果没有设置，默认情况下浏览器向服务器发送的都是get请求，例如<br>在浏览器直接输地址访问，点超链接访问等都是get，用户如想把请求方式改<br>为post，可通过更改表单的提交方式实现</li>
<li>不管POST或GET都用于向服务器请求某个WEB资源，这两种方式的区别主要<br>表现在数据传递上如果请求方式为GET方式，则可以在请求的URL地址后以?的<br>形式带上交给服务器的数据多个数据之间以&amp;进行分隔，例如：GET /mail/</li>
<li>html?name=abc&amp;password=xyz HTTP/1.1</li>
<li>GET方式的特点：在URL地址后附带的参数是有限制的，其数据容量通常不<br>能超过1K</li>
<li>如果请求方式为POST方式，则可以在请求的实体内容中向服务器发送数据<br>，Post方式的特点是传送的数据量无限制</li>
</ol>
<h3 id="消息头"><a href="#消息头" class="headerlink" title="消息头"></a>消息头</h3><ol>
<li>accept:浏览器通过这个头告诉服务器，它所支持的数据类型</li>
<li>Accept-Charset: 浏览器通过这个头告诉服务器，它支持哪种字符集</li>
<li>Accept-Encoding：浏览器通过这个头告诉服务器，支持的压缩格式</li>
<li>Accept-Language：浏览器通过这个头告诉服务器，它的语言环境</li>
<li>Host：浏览器通过这个头告诉服务器，想访问哪台主机</li>
<li>If-Modified-Since: 浏览器通过这个头告诉服务器，缓存数据的时间</li>
<li>Referer：浏览器通过这个头告诉服务器，客户机是哪个页面来的  防盗链</li>
<li>Connection：浏览器通过这个头告诉服务器，请求完后是断开链接还是保持链接<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Accept: application&#x2F;x-ms-application, image&#x2F;jpeg, application&#x2F;xaml+xml,</span><br><span class="line">image&#x2F;gif, image&#x2F;pjpeg,application&#x2F;x-ms-xbap, application&#x2F;vnd.ms-excel,</span><br><span class="line">application&#x2F;vnd.ms-powerpoint, application&#x2F;msword, *&#x2F;*</span><br><span class="line">Referer: http:&#x2F;&#x2F;localhost:8080&#x2F;JavaWebDemoProject&#x2F;Web&#x2F;2.jsp</span><br><span class="line">Accept-Language: zh-CN</span><br><span class="line">User-Agent: Mozilla&#x2F;4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64;</span><br><span class="line">Trident&#x2F;4.0;SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR </span><br><span class="line">3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3)</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Host: localhost:8080</span><br><span class="line">Connection: Keep-Alive</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Http响应"><a href="#Http响应" class="headerlink" title="Http响应"></a>Http响应</h3><p>一个HTTP响应代表服务器向客户端回送的数据，它包括： 一个状态行、若干<br>消息头、以及实体内容  <img src="/2020/02/29/JavaWeb/number14.jpg" alt></p>
<ol>
<li>状态行格式： HTTP版本号 状态码 <img src="/2020/02/29/JavaWeb/number15.jpg" alt></li>
<li>HTTP响应中的常用响应头(消息头)</li>
</ol>
<ul>
<li>Location: 服务器通过这个头，来告诉浏览器跳到哪里</li>
<li>Server：服务器通过这个头，告诉浏览器服务器的型号</li>
<li>Content-Encoding：服务器通过这个头，告诉浏览器，数据的压缩格式</li>
<li>Content-Length: 服务器通过这个头，告诉浏览器回送数据的长度</li>
<li>Content-Language: 服务器通过这个头，告诉浏览器语言环境</li>
<li>Content-Type：服务器通过这个头，告诉浏览器回送数据的类型</li>
<li>Refresh：服务器通过这个头，告诉浏览器定时刷新</li>
<li>Content-Disposition: 服务器通过这个头，告诉浏览器以下载方式获取数据</li>
<li>Transfer-Encoding：服务器通过这个头，告诉浏览器数据是以分块方式回送的</li>
<li>Expires: -1  控制浏览器不要缓存</li>
<li>Cache-Control: no-cache  </li>
<li>Pragma: no-cache </li>
</ul>
<h3 id="重定向和请求转发的区别"><a href="#重定向和请求转发的区别" class="headerlink" title="重定向和请求转发的区别"></a>重定向和请求转发的区别</h3><ol>
<li>一个web资源收到客户端请求后，通知服务器去调用另外一个web资源进行处理，称之为请求<br>转发/307。</li>
<li>一个web资源收到客户端请求后，通知浏览器去访问另外一个web资源进行处理，称之为请求<br>重定向/302。</li>
</ol>
<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>Cookie不是饼干。Cookie是客户端技术，程序把每个用户的数据以cookie<br>的形式写给用户各自的浏览器。当用户使用浏览器再去访问服务器中的web<br>资源时就会带着各自的数据去。这样web资源处理的就是用户各自的数据了<br><img src="/2020/02/29/JavaWeb/45.jpg" alt></p>
<h3 id="Http无状态"><a href="#Http无状态" class="headerlink" title="Http无状态"></a>Http无状态</h3><p>协议对于交互场景没有记忆能力，每一次的请求都是独立的，这种场景无法<br>实现交互，也就是说每一次的操作都是独立的，服务器并不知道用户之前的<br>操作</p>
<h3 id="Cookie的常用方法"><a href="#Cookie的常用方法" class="headerlink" title="Cookie的常用方法"></a>Cookie的常用方法</h3><ol>
<li>Cookie(String name, String value) 构造方法</li>
<li>public void setMaxAge(int expiry) 设置最大保存时间，默认是在<br>一次会话有效。单位是s</li>
</ol>
<h3 id="使用cookie记录用户上一次访问时间"><a href="#使用cookie记录用户上一次访问时间" class="headerlink" title="使用cookie记录用户上一次访问时间"></a>使用cookie记录用户上一次访问时间</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Cookie[] cookies = request.getCookies();</span><br><span class="line">         <span class="comment">//如果用户是第一次访问，那么得到的cookies将是null</span></span><br><span class="line">         <span class="keyword">if</span> (cookies!=<span class="keyword">null</span>) &#123;</span><br><span class="line">             out.write(<span class="string">"您上次访问的时间是："</span>);</span><br><span class="line">             <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cookies.length; i++) &#123;</span><br><span class="line">                 Cookie cookie = cookies[i];</span><br><span class="line">                 <span class="keyword">if</span> (cookie.getName().equals(<span class="string">"lastAccessTime"</span>)) &#123;</span><br><span class="line">                     Long lastAccessTime =Long.parseLong(cookie.getValue());</span><br><span class="line">                     Date date = <span class="keyword">new</span> Date(lastAccessTime);</span><br><span class="line">                     out.write(date.toLocaleString());</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">             out.write(<span class="string">"这是您第一次访问本站！"</span>);</span><br><span class="line">         <span class="comment">//用户访问过之后重新设置用户的访问时间，存储到cookie中，然后发送到客户端浏览器</span></span><br><span class="line">         Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"lastAccessTime"</span>, System.currentTimeMillis()</span><br><span class="line">         	+<span class="string">""</span>);</span><br><span class="line">         <span class="comment">//创建一个cookie，cookie的名字是lastAccessTime</span></span><br><span class="line">         <span class="comment">/*将cookie对象添加到response对象中，这样服务器在输出response对象中的内</span></span><br><span class="line"><span class="comment">         容时就会把cookie也输出到客户端浏览器*/</span></span><br><span class="line">         response.addCookie(cookie);</span><br></pre></td></tr></table></figure>
<p>设置有效期</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用户访问过之后重新设置用户的访问时间，存储到cookie中，然后发送到客户端浏览器</span></span><br><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"lastAccessTime"</span>, System.currentTimeMillis()+<span class="string">""</span>);</span><br><span class="line"><span class="comment">//创建一个cookie，cookie的名字是lastAccessTime</span></span><br><span class="line"><span class="comment">//设置Cookie的有效期为1天</span></span><br><span class="line">cookie.setMaxAge(<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>);</span><br><span class="line"><span class="comment">//将cookie对象添加到response对象中，这样服务器在输出response对象中的内容时就会把</span></span><br><span class="line"><span class="comment">//cookie也输出到客户端浏览器</span></span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>
<p>第一次访问 <img src="/2020/02/29/JavaWeb/48.jpg" alt><br>第二次访问 <img src="/2020/02/29/JavaWeb/49.jpg" alt></p>
<h3 id="会话"><a href="#会话" class="headerlink" title="会话"></a>会话</h3><p>用户开一个浏览器，点击多个超链接，访问服务器多个web资源，然后关闭<br>浏览器，整个过程称之为一个会话</p>
<ol>
<li>有状态会话：一个同学来过教室，下次再来教室，我们会知道这个同学<br>曾经来过，这称之为有状态会话</li>
<li>每个用户在使用浏览器与服务器进行会话的过程中，不可避免各自会产<br>生一些数据，程序要想办法为每个用户保存这些数据</li>
</ol>
<h3 id="Cookie的注意细节"><a href="#Cookie的注意细节" class="headerlink" title="Cookie的注意细节"></a>Cookie的注意细节</h3><ol>
<li>一个Cookie只能标识一种信息，它至少含有一个标识该信息的名称<br>name和设置值value</li>
<li>一个WEB站点可以给一个WEB浏览器发送多个Cookie，一个WEB浏览<br>器也可以存储多个WEB站点提供的Cookie</li>
<li>浏览器一般只允许存放300个Cookie，每个站点最多存20个Cookie<br>，每个Cookie的大小限制为4KB</li>
<li>如果创建了一个cookie，并将他发送到浏览器，默认情况下它是一<br>个会话级别的cookie即存储在浏览器的内存中，用户退出浏览器之后即<br>被删除<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CookieDemo02</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//创建一个名字为lastAccessTime的cookie</span></span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"lastAccessTime"</span>, </span><br><span class="line">        	System.currentTimeMillis()+<span class="string">""</span>);</span><br><span class="line">        <span class="comment">//将cookie的有效期设置为0，命令浏览器删除该cookie</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>cookie不可跨域名。比如Google向浏览器发送cookie，Baidu也向<br>浏览器发送cookie。浏览器访问Google的时候不能带上Baidu发来的<br>cookie</li>
</ol>
<h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><p>Session是服务器端技术，利用这个技术，服务器在运行时可以为每一个<br>用户的浏览器创建一个其独享的session对象，由于session为用户浏览<br>器独享，所以用户在访问服务器的web资源时，可以把各自的数据放在各<br>自的session中，当用户再去访问服务器中的其它web资源时，其它web<br>资源再从用户各自的session中取出数据为用户服务</p>
<h3 id="Cookie和Session的区别"><a href="#Cookie和Session的区别" class="headerlink" title="Cookie和Session的区别"></a>Cookie和Session的区别</h3><ul>
<li>Cookie是把用户的数据写给用户的浏览器</li>
<li>Session技术把用户的数据写到用户独占的session中</li>
<li>Session对象由服务器创建，开发人员可以调用request对象的<br>getSession方法得到session对象</li>
</ul>
<h3 id="Session实现原理"><a href="#Session实现原理" class="headerlink" title="Session实现原理"></a>Session实现原理</h3><p>服务器创建session出来后，会把session的id号，以cookie的形式回<br>写给客户机，这样只要客户机的浏览器不关，再去访问服务器时，都会<br>带着session的id号去，服务器发现客户机浏览器带session id过来<br>了，就会使用内存中与之对应的session为之服务</p>
<ol>
<li>第一次访问时，服务器会创建一个新的sesion，并且把session的Id<br>以cookie的形式发送给客户端浏览器，再次请求服务器此时就可以看到<br>浏览器再请求服务器时，会把存储到cookie中的session的Id一起传递<br>到服务器端了<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionDemo1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        response.setCharacterEncoding(<span class="string">"UTF=8"</span>);</span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        <span class="comment">//使用request对象的getSession()获取session，如果session不存在则创建一个</span></span><br><span class="line">        HttpSession session = request.getSession();</span><br><span class="line">        <span class="comment">//将数据存储到session中</span></span><br><span class="line">        session.setAttribute(<span class="string">"data"</span>, <span class="string">"高明"</span>);</span><br><span class="line">        <span class="comment">//获取session的Id</span></span><br><span class="line">        String sessionId = session.getId();</span><br><span class="line">        <span class="comment">//判断session是不是新创建的</span></span><br><span class="line">        <span class="keyword">if</span> (session.isNew()) &#123;</span><br><span class="line">            response.getWriter().print(<span class="string">"session创建成功，session的id是："</span></span><br><span class="line">            	+sessionId);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            response.getWriter().print(</span><br><span class="line">            	<span class="string">"服务器已经存在该session了，session的id是"</span>+sessionId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
第一次访问时，服务器会创建一个新的session，并且把session的Id以cookie<br>的形式发送给客户端浏览器 <img src="/2020/02/29/JavaWeb/46.jpg" alt><br>点击刷新按钮，再次请求服务器，此时就可以看到浏览器再请求服务器时，<br>会把存储到cookie中的session的Id一起传递到服务器端了 <img src="/2020/02/29/JavaWeb/47.jpg" alt><br>request.getSession()方法内部新创建了Session之后一定是做了如下的处理<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取session的Id</span></span><br><span class="line">String sessionId = session.getId();</span><br><span class="line"><span class="comment">//将session的Id存储到名字为JSESSIONID的cookie中</span></span><br><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"JSESSIONID"</span>, sessionId);</span><br><span class="line"><span class="comment">//设置cookie的有效路径</span></span><br><span class="line">cookie.setPath(request.getContextPath());</span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Session对象的创建和销毁"><a href="#Session对象的创建和销毁" class="headerlink" title="Session对象的创建和销毁"></a>Session对象的创建和销毁</h3><ol>
<li>Session的创建时机，在程序中第一次调用request.getSession()<br>方法时就会创建一个新的Session，可以用isNew()方法来判断Session<br>是不是新创建的<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用request对象的getSession()获取session，如果session不存在则创建一个</span></span><br><span class="line">HttpSession session = request.getSession();</span><br><span class="line"><span class="comment">//获取session的Id</span></span><br><span class="line">String sessionId = session.getId();</span><br><span class="line"><span class="comment">//判断session是不是新创建的</span></span><br><span class="line"><span class="keyword">if</span> (session.isNew()) &#123;</span><br><span class="line">    response.getWriter().print(<span class="string">"session创建成功，session的id是："</span>+sessionId);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    response.getWriter().print(</span><br><span class="line">    	<span class="string">"服务器已经存在session，session的id是："</span>+sessionId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Session的销毁，session对象默认30分钟没有使用，则服务器会自<br>动销毁session，在web.xml文件中可以手工配置session的失效时间<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>也可以手动销毁<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HttpSession session = request.getSession();</span><br><span class="line"><span class="comment">//手工调用session.invalidate方法，摧毁session</span></span><br><span class="line">session.invalidate();</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Session防止表单重复提交"><a href="#Session防止表单重复提交" class="headerlink" title="Session防止表单重复提交"></a>Session防止表单重复提交</h3><p>在平时开发中，如果网速比较慢的情况下，用户提交表单后，发现服务器<br>半天都没有响应，那么用户可能会以为是自己没有提交表单，就会再点击<br>提交按钮重复提交表单，我们在开发中必须防止表单重复提交</p>
<ol>
<li>在服务器端生成一个唯一的随机标识号，专业术语称为Token(令牌)<br>，同时在当前用户的Session域中保存这个Token。然后将Token发送到<br>客户端的Form表单中，在Form表单中使用隐藏域来存储这个Token，表<br>单提交的时候连同这个Token一起提交到服务器端，然后在服务器端判<br>断客户端提交上来的Token与服务器端生成的Token是否一致，如果不<br>一致，那就是重复提交了，此时服务器端就可以不处理重复提交的表<br>单。如果相同则处理表单提交，处理完后清除当前用户的Session域<br>中存储的标识号</li>
<li>以下情况会拒绝表单的请求</li>
</ol>
<ul>
<li>存储Session域中的Token(令牌)与表单提交的Token(令牌)不同</li>
<li>当前用户的Session中不存在Token(令牌)</li>
<li>用户提交的表单数据中没有Token(令牌)</li>
</ul>
<h4 id="生成Token"><a href="#生成Token" class="headerlink" title="生成Token"></a>生成Token</h4><ol>
<li>生成Token<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FormServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">884689940866074733L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        String token = TokenProccessor.getInstance().makeToken();<span class="comment">//创建令牌</span></span><br><span class="line">        System.out.println(<span class="string">"在FormServlet中生成的token："</span>+token);</span><br><span class="line">        request.getSession().setAttribute(<span class="string">"token"</span>, token);</span><br><span class="line">        <span class="comment">//在服务器使用session保存token(令牌)</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">"/form.jsp"</span>).forward(request, response);</span><br><span class="line">        <span class="comment">//跳转到form.jsp页面</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>在form.jsp中使用隐藏域来存储Token<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;form表单&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=</span><br><span class="line">    <span class="string">"$&#123;pageContext.request.contextPath&#125;/servlet/DoFormServlet"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        &lt;%--使用隐藏域存储生成的token--%&gt;</span><br><span class="line">        &lt;%--</span><br><span class="line">            &lt;input type=<span class="string">"hidden"</span> name=<span class="string">"token"</span> value=</span><br><span class="line">            <span class="string">"&lt;%=session.getAttribute("</span>token<span class="string">") %&gt;"</span>&gt;</span><br><span class="line">        --%&gt;</span><br><span class="line">        &lt;%--使用EL表达式取出存储在session中的token--%&gt;</span><br><span class="line">        &lt;input type=<span class="string">"hidden"</span> name=<span class="string">"token"</span> value=<span class="string">"$&#123;token&#125;"</span>/&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
<li>处理表单提交<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DoFormServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">                <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">boolean</span> b = isRepeatSubmit(request);<span class="comment">//判断用户是否是重复提交</span></span><br><span class="line">            <span class="keyword">if</span>(b==<span class="keyword">true</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">"请不要重复提交"</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            request.getSession().removeAttribute(<span class="string">"token"</span>);<span class="comment">//移除session中的token</span></span><br><span class="line">            System.out.println(<span class="string">"处理用户提交请求！！"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 判断客户端提交上来的令牌和服务器端生成的令牌是否一致</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">         *         true 用户重复提交了表单</span></span><br><span class="line"><span class="comment">         *         false 用户没有重复提交表单</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isRepeatSubmit</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">            String client_token = request.getParameter(<span class="string">"token"</span>);</span><br><span class="line">            <span class="comment">//1、如果用户提交的表单数据中没有token，则用户是重复提交了表单</span></span><br><span class="line">            <span class="keyword">if</span>(client_token==<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//取出存储在Session中的token</span></span><br><span class="line">            String server_token = (String) request.getSession().getAttribute</span><br><span class="line">            (<span class="string">"token"</span>);</span><br><span class="line">            <span class="comment">//2、如果当前用户的Session中不存在Token(令牌)，则用户是重复提交了表单</span></span><br><span class="line">            <span class="keyword">if</span>(server_token==<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//3、存储在Session中的Token与表单提交的Token不同，则用户是重复提交了表单</span></span><br><span class="line">            <span class="keyword">if</span>(!client_token.equals(server_token))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>生成Token<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TokenProccessor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *单例设计模式（保证类的对象在内存中只有一个）</span></span><br><span class="line"><span class="comment">     *1、把类的构造函数私有</span></span><br><span class="line"><span class="comment">     *2、自己创建一个类的对象</span></span><br><span class="line"><span class="comment">     *3、对外提供一个公共的方法，返回类的对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">TokenProccessor</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> TokenProccessor instance = <span class="keyword">new</span> TokenProccessor();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回类的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TokenProccessor <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成Token</span></span><br><span class="line"><span class="comment">     * Token：Nv6RRuGEVvmGjB+jimI/gw==</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">makeToken</span><span class="params">()</span></span>&#123;  <span class="comment">//checkException</span></span><br><span class="line">        <span class="comment">//  7346734837483  834u938493493849384  43434384</span></span><br><span class="line">        String token = (System.currentTimeMillis() + <span class="keyword">new</span> Random().</span><br><span class="line">        	nextInt(<span class="number">999999999</span>)) + <span class="string">""</span>;</span><br><span class="line">        <span class="comment">//数据指纹   128位长   16个字节  md5</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            MessageDigest md = MessageDigest.getInstance(<span class="string">"md5"</span>);</span><br><span class="line">            <span class="keyword">byte</span> md5[] =  md.digest(token.getBytes());</span><br><span class="line">            <span class="comment">//base64编码--任意二进制编码明文字符   adfsdfsdfsf</span></span><br><span class="line">            BASE64Encoder encoder = <span class="keyword">new</span> BASE64Encoder();</span><br><span class="line">            <span class="keyword">return</span> encoder.encode(md5);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="JavaBean"><a href="#JavaBean" class="headerlink" title="JavaBean"></a>JavaBean</h2><ol>
<li>JavaBean是一个遵循特定写法的Java类，它通常具有如下特点：</li>
</ol>
<ul>
<li>这个Java类必须具有一个无参的构造函数</li>
<li>属性必须私有化。</li>
<li>私有化的属性必须通过public类型的方法暴露给其它程序，并且方<br>法的命名也必须遵守一定的命名规范</li>
</ul>
<ol start="2">
<li>JavaBean常用于封装数据<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 姓名 String类型</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// 性别 String类型</span></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="comment">// 年龄 int类型</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="comment">//是否已婚 boolean类型</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> married;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isMarried</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> married;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMarried</span><span class="params">(<span class="keyword">boolean</span> married)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.married = married;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="标准MVC模型"><a href="#标准MVC模型" class="headerlink" title="标准MVC模型"></a>标准MVC模型</h3><ol>
<li>是一种架构型的模式，本身不引入新功能，只是帮助我们将开发的<br>结构组织的更加合理，使展示与模型分离、流程控制逻辑、业务逻辑调<br>用与展示逻辑分离 <img src="/2020/02/29/JavaWeb/number33.jpg" alt></li>
<li>Model（模型）：数据模型，提供要展示的数据，因此包含数据和<br>行为，可以认为是领域模型(domain)或JavaBean组件（包含数据和<br>行为），不过现在一般都分离开来：ValueObject（数据）和服务<br>层（行为）。也就是模型提供了模型数据查询和模型数据的状态更<br>新等功能，包括数据和业务</li>
<li>View（视图）：负责进行模型的展示，一般就是我们见到的用户界<br>面，客户想看到的东西</li>
<li>Controller（控制器）：接收用户请求，委托给模型进行处理（状<br>态改变），处理完毕后把返回的模型数据返回给视图，由视图负责展示<br>。 也就是说控制器做了个调度员的工作。</li>
</ol>
<h3 id="PathVariable和RequestParam"><a href="#PathVariable和RequestParam" class="headerlink" title="PathVariable和RequestParam"></a>PathVariable和RequestParam</h3><p>参考 <a href="https://blog.csdn.net/u012062455/article/details/80960200" target="_blank" rel="noopener">https://blog.csdn.net/u012062455/article/details/80960200</a><br>PathVariable只能用于接收url路径上的参数，而RequestParam只能<br>用于接收请求带的params。.PathVariable一般用于get和delete请<br>求，RequestParam一般用于post请求</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/books/&#123;username&#125;"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">testPathVariable</span><span class="params">(@PathVariable String username)</span></span>&#123;</span><br><span class="line">       Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       map.put(<span class="string">"username"</span>,username);</span><br><span class="line">       <span class="keyword">return</span> map;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/* localhost:8080/api/v1/books2/12?name=java </span></span><br><span class="line"><span class="comment">   in action&amp;author=ric&amp;isbn=dsdas2334 */</span></span><br><span class="line">   <span class="meta">@PostMapping</span>(<span class="string">"/books2"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">testRequestParam</span><span class="params">(@RequestParam(<span class="string">"name"</span>)</span> String name,</span></span><br><span class="line"><span class="function">                      @<span class="title">RequestParam</span><span class="params">(<span class="string">"author"</span>)</span> String author,</span></span><br><span class="line"><span class="function">                      @<span class="title">RequestParam</span><span class="params">(<span class="string">"isbn"</span>)</span> String isbn) </span>&#123;</span><br><span class="line">       Map&lt;String, Object&gt; book = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">       book.put(<span class="string">"name"</span>, name);</span><br><span class="line">       book.put(<span class="string">"author"</span>, author);</span><br><span class="line">       book.put(<span class="string">"isbn"</span>, isbn);</span><br><span class="line">       <span class="keyword">return</span> book;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@PostMapping</span>(<span class="string">"/books2/&#123;id&#125;"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">test</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id,@<span class="title">RequestParam</span><span class="params">(<span class="string">"name"</span>)</span> </span></span><br><span class="line"><span class="function">   	String name,@<span class="title">RequestParam</span><span class="params">(<span class="string">"author"</span>)</span> String author,@RequestParam</span></span><br><span class="line"><span class="function">   	<span class="params">(<span class="string">"isbn"</span>)</span> String isbn) </span>&#123;</span><br><span class="line">       Map&lt;String, Object&gt; book = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">       book.put(<span class="string">"id"</span>,id);</span><br><span class="line">       book.put(<span class="string">"name"</span>, name);</span><br><span class="line">       book.put(<span class="string">"author"</span>, author);</span><br><span class="line">       book.put(<span class="string">"isbn"</span>, isbn);</span><br><span class="line">       <span class="keyword">return</span> book;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>





<h3 id="Servlet-JSP-JavaBean"><a href="#Servlet-JSP-JavaBean" class="headerlink" title="Servlet+JSP+JavaBean"></a>Servlet+JSP+JavaBean</h3><ol>
<li>Servlet+JSP+JavaBean架构其实可以认为就是我们所说的Web MVC<br>模型，只是控制器采用Servlet、模型采用JavaBean、视图采用JSP <img src="/2020/02/29/JavaWeb/number34.jpg" alt></li>
</ol>
<h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><h3 id="数据库驱动"><a href="#数据库驱动" class="headerlink" title="数据库驱动"></a>数据库驱动</h3><ol>
<li>这里的驱动的概念和平时听到的那种驱动的概念是一样的，比如平时<br>购买的声卡，网卡直接插到计算机上面是不能用的，必须要安装相应的<br>驱动程序之后才能够使用声卡和网卡，同样道理，我们安装好数据库之<br>后，我们的应用程序也是不能直接使用数据库的，必须要通过相应的数<br>据库驱动程序，通过驱动程序去和数据库打交道  <img src="/2020/02/29/JavaWeb/number35.jpg" alt></li>
<li>SUN公司为了简化、统一对数据库的操作，定义了一套Java操作数据<br>库的规范（接口），称之为JDBC。这套接口由数据库厂商去实现，这样<br>，开发人员只需要学习jdbc接口，并通过jdbc加载具体的驱动，就可<br>以操作数据库。 <img src="/2020/02/29/JavaWeb/number36.jpg" alt></li>
</ol>
<h3 id="DriverManager"><a href="#DriverManager" class="headerlink" title="DriverManager"></a>DriverManager</h3><ol>
<li>Jdbc程序中的DriverManager用于加载驱动，并创建与数据库的链接</li>
<li>URL用于标识数据库的位置，通过URL地址告诉JDBC程序连接哪个数据库 <img src="/2020/02/29/JavaWeb/number37.jpg" alt></li>
</ol>
<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><p>事务指逻辑上的一组操作，组成这组操作的各个单元，要不全部成功，要<br>不全部不成功</p>
<ol>
<li>事务的四大特性</li>
</ol>
<ul>
<li>原子性 原子性是指事务是一个不可分割的工作单位，事务中的操作要么<br>全部成功，要么全部失败。比如在同一个事务中的SQL语句，要么全部执行<br>成功，要么全部执行失败</li>
<li>一致性 事务必须使数据库从一个一致性状态变换到另外一个一致性状态<br>。以转账为例子，A向B转账，假设转账之前这两个用户的钱加起来总共是<br>2000，那么A向B转账之后，不管这两个账户怎么转，A用户的钱和B用户<br>的钱加起来的总额还是2000，这个就是事务的一致性</li>
<li>隔离性 事务的隔离性是多个用户并发访问数据库时，数据库为每一个用<br>户开启的事务，不能被其他事务的操作数据所干扰，多个并发事务之间要<br>相互隔离</li>
<li>持久性 持久性是指一个事务一旦被提交，它对数据库中数据的改变就是<br>永久性的，接下来即使数据库发生故障也不应该对其有任何影响</li>
</ul>
<h3 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h3><ol>
<li>脏读 脏读指一个事务读取了另外一个事务未提交的数据。这是非常危险的，假设Ａ向Ｂ<br>转帐100元，对应sql语句如下所示  </li>
<li>update account set money=money+100 where name=’B’;  </li>
<li>update account set money=money-100  where name=’A’;<br>当第1条sql执行完，第2条还没执行(A未提交时)，如果此时Ｂ查询自己的帐户，<br>就会发现自己多了100元钱。如果A等B走后再回滚，B就会损失100元</li>
<li>不可重复读<br>不可重复读指在一个事务内读取表中的某一行数据，多次读取结果不同。<br>例如银行想查询A帐户余额，第一次查询A帐户为200元，此时A向帐户内存了100元并提交了，<br>银行接着又进行了一次查询，此时A帐户为300元了。银行两次查询不一致，可能就会很困惑，<br>不知道哪次查询是准的。<br>不可重复读和脏读的区别是，脏读是读取前一事务未提交的脏数据，不可重复读是重新读取了前<br>一事务已提交的数据。<br>很多人认为这种情况就对了，无须困惑，当然是后面的为准。我们可以考虑这样一种情况，比如<br>银行程序需要将查询结果分别输出到电脑屏幕和写到文件中，结果在一个事务中针对输出的目的<br>地，进行的两次查询不一致，导致文件和屏幕中的结果不一致，银行工作人员就不知道以哪个为<br>准了。</li>
<li>幻读<br>幻读是指在一个事务内读取到了别的事务插入的数据，导致前后读取不一致。<br>如丙存款100元未提交，这时银行做报表统计account表中所有用户的总额为500元，然后丙<br>提交了，这时银行再统计发现帐户为600元了，造成虚读同样会使银行不知所措，到底以哪个<br>为准。</li>
</ol>
<h3 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h3><ol>
<li>用户每次请求都需要向数据库获得链接，而数据库创建连接通常需要消耗相对较大的资源，<br>创建时间也较长。假设网站一天10万访问量，数据库服务器就需要创建10万次连接，极大的浪费<br>数据库的资源，并且极易造成数据库服务器内存溢出、拓机  <img src="/2020/02/29/JavaWeb/number38.jpg" alt></li>
<li>数据库连接是一种关键的有限的昂贵的资源,这一点在多用户的网页应用程序中体现的尤为<br>突出.对数据库连接的管理能显著影响到整个应用程序的伸缩性和健壮性,影响到程序的性能指<br>标.数据库连接池正式针对这个问题提出来的.数据库连接池负责分配,管理和释放数据库连接,<br>它允许应用程序重复使用一个现有的数据库连接,而不是重新建立一个 <img src="/2020/02/29/JavaWeb/number39.jpg" alt></li>
</ol>
<h2 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h2><ol>
<li>Filter也称之为过滤器，它是Servlet技术中最激动人心的技术，WEB开发人员通过Filter<br>技术，对web服务器管理的所有web资源：例如Jsp, Servlet, 静态图片文件或静态 html 文件<br>等进行拦截，从而实现一些特殊的功能。例如实现URL级别的权限访问控制、过滤敏感词汇、压缩<br>响应信息等一些高级功能。</li>
<li>Servlet API中提供了一个Filter接口，开发web应用时，如果编写的Java类实现了这个<br>接口，则把这个java类称之为过滤器Filter。通过Filter技术，开发人员可以实现用户在访问<br>某个目标资源之前，对访问的请求和响应进行拦截  <img src="/2020/02/29/JavaWeb/number40.jpg" alt></li>
</ol>
<h3 id="Filter实现拦截"><a href="#Filter实现拦截" class="headerlink" title="Filter实现拦截"></a>Filter实现拦截</h3><ol>
<li>Filter接口中有一个doFilter方法，当我们编写好Filter，并配置对哪个web资源进行<br>拦截后，WEB服务器每次在调用web资源的service方法之前，都会先调用一下filter的<br>doFilter方法，因此，在该方法内编写代码可达到如下目的</li>
</ol>
<ul>
<li>调用目标资源之前，让一段代码执行。</li>
<li>是否调用目标资源（即是否让用户访问web资源）。</li>
<li>调用目标资源之后，让一段代码执行。</li>
</ul>
<ol start="2">
<li>web服务器在调用doFilter方法时，会传递一个filterChain对象进来，filterChain对象<br>是filter接口中最重要的一个对 象，它也提供了一个doFilter方法，开发人员可以根据需求<br>决定是否调用此方法，调用该方法，则web服务器就会调用web资源的service方 法，即web资源<br>就会被访问，否则web资源不会被访问。</li>
<li>Filter开发分为二个步骤：</li>
</ol>
<ul>
<li>编写java类实现Filter接口，并实现其doFilter方法。</li>
<li>在 web.xml 文件中使用filter和filter-mapping元素对编写的filter类进行注册<br>，并设置它所能拦截的资源。</li>
</ul>
<h3 id="Filter的生命周期"><a href="#Filter的生命周期" class="headerlink" title="Filter的生命周期"></a>Filter的生命周期</h3><ol>
<li>Filter的创建和销毁由WEB服务器负责。 web 应用程序启动时，web 服务器将创建Filter<br>的实例对象，并调用其init方法，完成对象的初始化功能，从而为后续的用户请求作好拦截的<br>准备工作，filter对象只会创建一次，init方法也只会执行一次。通过init方法的参数，可获<br>得代表当前filter配置信息的FilterConfig对象。</li>
</ol>
<h2 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h2><ol>
<li>监听器是一个专门用于对其他对象身上发生的事件或状态改变进行监听和相应处理的对象，<br>当被监视的对象发生情况时，立即采取相应的行动。监听器其实就是一个实现特定接口的普通<br>java程序，这个程序专门用于监听另一个java对象的方法调用或属性改变，当被监听对象发生<br>上述事件后，监听器某个方法立即被执行。 <img src="/2020/02/29/JavaWeb/number41.jpg" alt></li>
</ol>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">高明</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://skysea-gaoming.github.io/2020/02/29/JavaWeb/">https://skysea-gaoming.github.io/2020/02/29/JavaWeb/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/03/12/vue%E6%80%BB%E7%BB%93/"><i class="fa fa-chevron-left">  </i><span>vue总结</span></a></div><div class="next-post pull-right"><a href="/2020/02/29/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/"><span>计算机系统</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://skysea-gaoming.github.io/2020/02/29/JavaWeb/';
  this.page.identifier = '2020/02/29/JavaWeb/';
  this.page.title = 'JavaWeb';
}
var d = document, s = d.createElement('script');
s.src = "https://" + '你的disqus的 short-name' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://你的disqus的 short-name.disqus.com/count.js" async></script></div></div><footer class="footer-bg" style="background-image: url(https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1603820855526&amp;di=814b302a9516d264731a29c3c1fce803&amp;imgtype=0&amp;src=http%3A%2F%2Fwenhui.whb.cn%2Fu%2Fcms%2Fwww%2F201804%2F16135756wr02.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By 高明</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>