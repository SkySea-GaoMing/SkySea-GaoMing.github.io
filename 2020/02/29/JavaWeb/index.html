<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="JavaWeb"><meta name="keywords" content="Java"><meta name="author" content="高明"><meta name="copyright" content="高明"><title>JavaWeb | SkySea-GaoMing</title><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#参考B站颜群老师JavaWeb教程"><span class="toc-number">1.</span> <span class="toc-text">参考B站颜群老师JavaWeb教程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON基础"><span class="toc-number"></span> <span class="toc-text">JSON基础</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web基础"><span class="toc-number"></span> <span class="toc-text">web基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#web应用程序"><span class="toc-number">1.</span> <span class="toc-text">web应用程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#静态web"><span class="toc-number">2.</span> <span class="toc-text">静态web</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动态web"><span class="toc-number">3.</span> <span class="toc-text">动态web</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet-jsp"><span class="toc-number">4.</span> <span class="toc-text">Servlet&#x2F;jsp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web服务器"><span class="toc-number">5.</span> <span class="toc-text">web服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常见的web服务器"><span class="toc-number">6.</span> <span class="toc-text">常见的web服务器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tomcat服务器"><span class="toc-number"></span> <span class="toc-text">Tomcat服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat的目录"><span class="toc-number">1.</span> <span class="toc-text">Tomcat的目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat服务器的端口"><span class="toc-number">2.</span> <span class="toc-text">Tomcat服务器的端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat虚拟目录的映射"><span class="toc-number">3.</span> <span class="toc-text">Tomcat虚拟目录的映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat服务器自动映射"><span class="toc-number">4.</span> <span class="toc-text">Tomcat服务器自动映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#浏览器与服务器交互"><span class="toc-number">5.</span> <span class="toc-text">浏览器与服务器交互</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Javaweb应用的组成结构"><span class="toc-number">6.</span> <span class="toc-text">Javaweb应用的组成结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Javaweb应用的打包"><span class="toc-number">7.</span> <span class="toc-text">Javaweb应用的打包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tomcat的体系结构"><span class="toc-number">8.</span> <span class="toc-text">Tomcat的体系结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#互联网的加密原理"><span class="toc-number">9.</span> <span class="toc-text">互联网的加密原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对称加密"><span class="toc-number">10.</span> <span class="toc-text">对称加密</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#非对称加密"><span class="toc-number">11.</span> <span class="toc-text">非对称加密</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Http协议"><span class="toc-number"></span> <span class="toc-text">Http协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Http请求"><span class="toc-number">1.</span> <span class="toc-text">Http请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#请求行"><span class="toc-number">2.</span> <span class="toc-text">请求行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#消息头"><span class="toc-number">3.</span> <span class="toc-text">消息头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Http响应"><span class="toc-number">4.</span> <span class="toc-text">Http响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置响应头"><span class="toc-number">5.</span> <span class="toc-text">设置响应头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Content-Encoding响应头"><span class="toc-number">6.</span> <span class="toc-text">Content-Encoding响应头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#content-type响应头"><span class="toc-number">7.</span> <span class="toc-text">content-type响应头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#refresh响应头"><span class="toc-number">8.</span> <span class="toc-text">refresh响应头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#content-disposition响应头"><span class="toc-number">9.</span> <span class="toc-text">content-disposition响应头</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet"><span class="toc-number"></span> <span class="toc-text">Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet的运行过程"><span class="toc-number">1.</span> <span class="toc-text">Servlet的运行过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet调用"><span class="toc-number">2.</span> <span class="toc-text">Servlet调用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet开发"><span class="toc-number">3.</span> <span class="toc-text">Servlet开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet映射url"><span class="toc-number">4.</span> <span class="toc-text">Servlet映射url</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet访问url通配符映射"><span class="toc-number">5.</span> <span class="toc-text">Servlet访问url通配符映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet与普通类的区别"><span class="toc-number">6.</span> <span class="toc-text">Servlet与普通类的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#缺省Servlet"><span class="toc-number">7.</span> <span class="toc-text">缺省Servlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet线程安全问题"><span class="toc-number">8.</span> <span class="toc-text">Servlet线程安全问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ServletConfig"><span class="toc-number">9.</span> <span class="toc-text">ServletConfig</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ServletContext"><span class="toc-number">10.</span> <span class="toc-text">ServletContext</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HttpServletResponse对象"><span class="toc-number"></span> <span class="toc-text">HttpServletResponse对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HttpServletResponse对象常见应用"><span class="toc-number">1.</span> <span class="toc-text">HttpServletResponse对象常见应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#生成验证码"><span class="toc-number">2.</span> <span class="toc-text">生成验证码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置响应头控制浏览器行为"><span class="toc-number">3.</span> <span class="toc-text">设置响应头控制浏览器行为</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Web工程中的URL推荐写法"><span class="toc-number">4.</span> <span class="toc-text">Web工程中的URL推荐写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#response细节"><span class="toc-number">5.</span> <span class="toc-text">response细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HttpServletRequest"><span class="toc-number"></span> <span class="toc-text">HttpServletRequest</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#常用方法"><span class="toc-number">1.</span> <span class="toc-text">常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Request实现请求转发"><span class="toc-number">2.</span> <span class="toc-text">Request实现请求转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重定向和请求转发的区别"><span class="toc-number">3.</span> <span class="toc-text">重定向和请求转发的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cookie"><span class="toc-number"></span> <span class="toc-text">Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#会话"><span class="toc-number">1.</span> <span class="toc-text">会话</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#保存会话数据"><span class="toc-number">2.</span> <span class="toc-text">保存会话数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie使用"><span class="toc-number">3.</span> <span class="toc-text">Cookie使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie的注意细节"><span class="toc-number">4.</span> <span class="toc-text">Cookie的注意细节</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Session"><span class="toc-number"></span> <span class="toc-text">Session</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie和Session的区别"><span class="toc-number">1.</span> <span class="toc-text">Cookie和Session的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session实现原理"><span class="toc-number">2.</span> <span class="toc-text">Session实现原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session对象的创建和销毁"><span class="toc-number">3.</span> <span class="toc-text">Session对象的创建和销毁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session防止表单重复提交"><span class="toc-number">4.</span> <span class="toc-text">Session防止表单重复提交</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSP"><span class="toc-number"></span> <span class="toc-text">JSP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP原理"><span class="toc-number">1.</span> <span class="toc-text">JSP原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Web服务器给jsp提供的对象"><span class="toc-number">2.</span> <span class="toc-text">Web服务器给jsp提供的对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP实践"><span class="toc-number">3.</span> <span class="toc-text">JSP实践</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP基础语法"><span class="toc-number">4.</span> <span class="toc-text">JSP基础语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP指令简介"><span class="toc-number">5.</span> <span class="toc-text">JSP指令简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP运行原理"><span class="toc-number">6.</span> <span class="toc-text">JSP运行原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP四种属性范围"><span class="toc-number">7.</span> <span class="toc-text">JSP四种属性范围</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaBean"><span class="toc-number"></span> <span class="toc-text">JavaBean</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-JavaBean开发模式"><span class="toc-number">1.</span> <span class="toc-text">JSP+JavaBean开发模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet-JSP-JavaBean"><span class="toc-number">2.</span> <span class="toc-text">Servlet+JSP+JavaBean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#标准MVC模型"><span class="toc-number">3.</span> <span class="toc-text">标准MVC模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet-JSP-JavaBean-1"><span class="toc-number">4.</span> <span class="toc-text">Servlet+JSP+JavaBean</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JDBC"><span class="toc-number"></span> <span class="toc-text">JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库驱动"><span class="toc-number">1.</span> <span class="toc-text">数据库驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DriverManager"><span class="toc-number">2.</span> <span class="toc-text">DriverManager</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务"><span class="toc-number">3.</span> <span class="toc-text">事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的隔离级别"><span class="toc-number">4.</span> <span class="toc-text">事务的隔离级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库连接池"><span class="toc-number">5.</span> <span class="toc-text">数据库连接池</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Filter"><span class="toc-number"></span> <span class="toc-text">Filter</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Filter实现拦截"><span class="toc-number">1.</span> <span class="toc-text">Filter实现拦截</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Filter的生命周期"><span class="toc-number">2.</span> <span class="toc-text">Filter的生命周期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#监听器"><span class="toc-number"></span> <span class="toc-text">监听器</span></a></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1582898893694&amp;di=15958b0625c3bcbdd505353b8b5deaa4&amp;imgtype=0&amp;src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F068c0cbf1b1571976ada2e55a53b3a079e1614c5.jpg"></div><div class="author-info__name text-center">高明</div><div class="author-info__description text-center">Java forever</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">29</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">11</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">6</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://tiebapic.baidu.com/forum/w%3D580/sign=65511a41a9096b6381195e583c338733/aeb75982b2b7d0a263e3d9f3dcef76094b369a3d.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">SkySea-GaoMing</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">JavaWeb</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-02-29</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/">后端技术</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2020/02/29/JavaWeb/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2020/02/29/JavaWeb/"></span></a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h3 id="参考B站颜群老师JavaWeb教程"><a href="#参考B站颜群老师JavaWeb教程" class="headerlink" title="参考B站颜群老师JavaWeb教程"></a>参考B站颜群老师JavaWeb教程</h3><h2 id="JSON基础"><a href="#JSON基础" class="headerlink" title="JSON基础"></a>JSON基础</h2><p>Key:Value，类似map,Key是字符串，Value是任意类型，通过Key可以得到Value。</p>
<ol>
<li>map集合转为json对象<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,Object&gt; map=<span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">map.put(<span class="string">"fdf"</span>,<span class="string">"vc"</span>);</span><br><span class="line">map.put(<span class="string">"vc"</span>,<span class="string">"vcz"</span>);</span><br><span class="line">map.put(<span class="string">"vcv"</span>,<span class="string">"q"</span>);</span><br><span class="line">JSONObject josn=JSONObject.fromObject(map);</span><br><span class="line"><span class="comment">//&#123;"fdf":"vc","vc":"vcz","vcv":"q"&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>javabean变为json<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Address address;</span><br><span class="line">	<span class="comment">//省略构造器和构造方法...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String home;</span><br><span class="line">	<span class="keyword">private</span> String school;</span><br><span class="line">	<span class="comment">//省略构造器和构造方法...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Person per=<span class="keyword">new</span> Person();</span><br><span class="line">	per.setName(<span class="string">"vc"</span>);</span><br><span class="line">	per.setAge(<span class="number">20</span>);</span><br><span class="line">	Address address=<span class="keyword">new</span> Address();</span><br><span class="line">	address.setHome(<span class="string">"vsdf"</span>);</span><br><span class="line">	address.setSchool(<span class="string">"vcxfa"</span>);</span><br><span class="line">	per.setAddress(address);</span><br><span class="line">	JSONObject josn=JSONObject.fromObject(per);</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		&#123;"address":&#123;"school":"vcxfa","home":"vsdf"&#125;,</span></span><br><span class="line"><span class="comment">		"name":"vx",</span></span><br><span class="line"><span class="comment">		"age":20&#125;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>String变为json,String有格式要求<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//两种写法</span></span><br><span class="line">	String str=<span class="string">"&#123;\"name\":\"zs\",\"age\":23&#125;"</span>;</span><br><span class="line">	String strr=<span class="string">"&#123;'name':'zs','age':23&#125;"</span>;</span><br><span class="line">	JSONObject json=JSONObject.fromObject(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>文件变为json,先将文件变为字符串，字符串变为json<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"name"</span>:<span class="string">"zs"</span>,</span><br><span class="line"><span class="attr">"age"</span>:<span class="number">22</span>,</span><br><span class="line"><span class="attr">"address"</span>:&#123;<span class="attr">"home"</span>:<span class="string">"vcx"</span>,<span class="attr">"school"</span>:<span class="string">"zv"</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用commons.io.jar</span></span><br><span class="line">String s=FileUtils.readFileToString(file);</span><br></pre></td></tr></table></figure></li>
<li>生成json文件<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JSONObject json=JSONObject.fromObject(map);</span><br><span class="line">FileWriter file=<span class="keyword">new</span> FileWriter(pathname)</span><br><span class="line">json.write(file);</span><br><span class="line">file.close();</span><br></pre></td></tr></table></figure></li>
<li>JsonArray<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String str=<span class="string">"[&#123;\"name\":\"zs\",\"age\":23&#125;,&#123;&#125;,&#123;&#125;]"</span>;</span><br><span class="line">JSONArray array=JSONArray.fromObject(str);</span><br></pre></td></tr></table></figure></li>
<li>map转为jsonarray以及jsaonarray转为map<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">JSONArray array=JSONArray.fromObject(map);</span><br><span class="line"><span class="comment">//[&#123;"vcv":"q","fdf":"vc","vc":"vcz"&#125;]</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;array.size();i++)</span><br><span class="line">&#123;</span><br><span class="line">	JSONObject obj=(JSONObject)array.get(i);</span><br><span class="line">	Set&lt;String&gt; keys=obj.KeySet();</span><br><span class="line">	<span class="keyword">for</span>(String key:keys)</span><br><span class="line">		&#123;</span><br><span class="line">			map.put(key,obj.get(key));</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="web基础"><a href="#web基础" class="headerlink" title="web基础"></a>web基础</h2><p>web在英语里就是网页的意思，表示Internet主机上供外界访问的资源</p>
<ul>
<li>静态网页 web网页中供外部访问的资源始终是不变的，跟访问者无关</li>
<li>动态网页 供人们访问的资源是随时间、地点、用户操作的改变而改变</li>
<li>静态资源开发技术 Html</li>
<li>动态资源开发技术 早期是JSP/Servlet，现在前后端分离比较火</li>
<li>在Java中动态web资源开发技术统称为Javaweb</li>
</ul>
<h3 id="web应用程序"><a href="#web应用程序" class="headerlink" title="web应用程序"></a>web应用程序</h3><p>web应用程序指供用户访问的程序，简称为web应用。比如a.html,b.html等资源，把多个web资源<br>放在一个目录中以组成一个web应用。一个web应用由多个静态资源和动态资源组成，比如html,css<br>,js,jsp,java程序,jar包和配置文件等</p>
<ul>
<li>web应用开发好后如果要外界访问必须将web应用交给web服务器管理</li>
</ul>
<h3 id="静态web"><a href="#静态web" class="headerlink" title="静态web"></a>静态web</h3><p>.html是网页的后缀，如果在一个服务器上直接读取这些内容，那么意味着将网页的内容通过网络<br>服务器展现给用户 <img src="/2020/02/29/JavaWeb/number1.jpg" alt></p>
<ol>
<li>在静态WEB程序中，客户端使用WEB浏览器（FireFox等）经过网络(Network)连接到服务器<br>上，使用HTTP协议发起一个请求（Request），告诉服务器我现在需要得到哪个页面，所有的请求<br>交给WEB服务器，之后WEB服务器根据用户的需要，从文件系统（存放了所有静态页面的磁盘）取出<br>内容。之后通过WEB服务器返回给客户端，客户端接收到内容之后经过浏览器渲染解析，得到显示的<br>效果。</li>
<li>缺点是Web页面中的内容无法动态更新，所有的用户每时每刻看见的内容和最终效果都是一样的<br>为了可以让静态的WEB的显示更加好看，可以加入了JavaScript以完成一些页面上的显示特效，但<br>是这些特效都是在客户端上借助于浏览器展现给用户的，所以在服务器上本身并没有任何的<br>变化，并不能叫做动态页面</li>
<li>静态WEB无法连接数据库，无法实现和用户的交互。使用数据库保存数据是现在大多数系统的选<br>择，因为数据库中可以方便地管理数据，增删改查操作可以使用标准的SQL语句完成。</li>
</ol>
<h3 id="动态web"><a href="#动态web" class="headerlink" title="动态web"></a>动态web</h3><p>所谓的动态不是指页面会动，主要的特性的是“WEB的页面展示效果因时因人而变”，而且动态WEB<br>具有交互性，WEB的页面的内容可以动态更新。常见技术有jsp/servlet,目前主流是vue+springboot<br><img src="/2020/02/29/JavaWeb/number2.jpg" alt></p>
<ol>
<li>动态WEB中，程序依然使用客户端和服务端，客户端依然使用浏览器（FireFox等），通过<br>网络(Network)连接到服务器上，使用HTTP协议发起请求（Request），现在的所有请求都先经<br>过一个WEB Server Plugin（服务器插件）来处理，此插件用于区分是请求的是静态资源<br>(<em>.htm或者是</em>.htm)还是动态资源。</li>
<li>如果WEB Server Plugin发现客户端请求的是静态资源(<em>.htm或者是</em>.htm)，则将请求直接<br>转交给WEB服务器，之后WEB服务器从文件系统中取出内容，发送回客户端浏览器进行解析执行。</li>
<li>如果WEB Server Plugin发现客户端请求的是动态资源（*.jsp等），则先将请求转交给WEB<br>Container(WEB容器)，在WEB Container中连接数据库，从数据库中取出数据等一系列操作后动<br>态拼凑页面的展示内容，拼凑页面的展示内容后，把所有的展示内容交给WEB服务器，之后通过WEB<br>服务器将内容发送回客户端浏览器进行解析执行。</li>
</ol>
<h3 id="Servlet-jsp"><a href="#Servlet-jsp" class="headerlink" title="Servlet/jsp"></a>Servlet/jsp</h3><p>这是SUN公司(SUN现在已经被Oracle公司收购)主推的B/S架构的实现语言，是基于JAVA语言<br>发展起来的，因为JAVA语言足够简单，而且很干净。Servlet/JSP技术的性能也是非常高的，<br>不受平台的限制，各个平台基本上都可以使用。而且在运行中是使用多线程的处理方式，所以性<br>能非常高。SUN公司最早推出的WEB技术推出的是Servlet程序，Servlet程序本身使用的时候有<br>一些问题，所有的程序是采用JAVA代码+HTML的方式编写的，即要使用JAVA输出语句，一行一<br>行地输出所有的HTML代码，之后，SUN公司受到了ASP的启发，发展出了JSP(Java Server Page)<br>JSP某些代码的编写效果与ASP是非常相似的。这样可以很方便地使一些ASP程序员转向JSP的学习<br>加大市场的竞争力度。</p>
<h3 id="web服务器"><a href="#web服务器" class="headerlink" title="web服务器"></a>web服务器</h3><ol>
<li>Web服务器是指驻留于因特网上某种类型计算机的程序，是可以向发出请求的浏览器提供文档的<br>程序。当Web浏览器（客户端）连到服务器上并请求文件时，服务器将处理该请求并将文件反馈到该<br>浏览器上，附带的信息会告诉浏览器如何查看该文件（即文件类型） <img src="/2020/02/29/JavaWeb/number3.jpg" alt></li>
<li>服务器是一种被动程序：只有当Internet上运行在其他计算机中的浏览器发出请求时，服务器<br>才会响应 <img src="/2020/02/29/JavaWeb/number4.jpg" alt></li>
</ol>
<h3 id="常见的web服务器"><a href="#常见的web服务器" class="headerlink" title="常见的web服务器"></a>常见的web服务器</h3><ol>
<li>WebLogic WebLogic是美国Oracle公司出品的一个application server。BEA WebLogic是用<br>于开发、集成、部署和管理大型分布式Web应用、网络应用和数据库应用的Java应用服务器。将Java的<br>动态功能和Java Enterprise标准的安全性引入大型网络应用的开发、集成、部署和管理之中。是目<br>前应用最广泛的Web服务器，支持J2EE规范，而且不断的完善以适应新的开发要求<br><img src="/2020/02/29/JavaWeb/number5.jpg" alt></li>
<li>WebSphere WebSphere Application Server 是一种功能完善、开放的Web应用程序服务器<br>，是IBM公司电子商务计划的核心部分，它是基于 Java 的应用环境，用于建立、部署和管<br>理 Internet 和 Intranet Web 应用程序。这一整套产品进行了扩展，以适应 Web应用程序<br>服务器的需要，范围从简单到高级直到企业级。 <img src="/2020/02/29/JavaWeb/number6.jpg" alt></li>
<li>Tomcat Tomcat是一个实现了JAVA EE标准的最小的WEB服务器，是Apache 软件基金会的<br>Jakarta 项目中的一个核心项目，由Apache、Sun 和其他一些公司及个人共同开发而成。<br>因为Tomcat 技术先进、性能稳定，而且开源免费，因而深受Java 爱好者的喜爱并得到了<br>部分软件开发商的认可，成为目前比较流行的Web 应用服务器。学习JavaWeb开发一般都使用<br>Tomcat服务器，该服务器支持全部JSP以及Servlet规范 <img src="/2020/02/29/JavaWeb/number7.jpg" alt></li>
<li>Microsoft的Web服务器产品为Internet Information Services （IIS），IIS是允许在公<br>共Intranet或Internet上发布信息的Web服务器。ⅡS是目前最流行的Web服务器产品之一，很多著<br>名的网站都是建立在ⅡS的平 台上。IIS提供了一个图形界面的管理工具，称为Internet信息服务<br>管理器，可用于监视配置和控制Internet服务。<br>IIS是一种Web服务组件，其中包括Web服务器、FTP服务器、NNTP服务器和SMTP服务器，分别用于网<br>页浏览、文件传输、新闻服务和邮件发送等方面，它使得在网络（包括互联网和局域网）上发布信息<br>成了一件很容易的事。它提供ISAPI(Intranet Server API）作为扩展Web服务器功能的编程接口<br>同时，它还提供一个Internet数据库连接器，可以实现对数据库的查询和更新。<img src="/2020/02/29/JavaWeb/number8.jpg" alt></li>
</ol>
<h2 id="Tomcat服务器"><a href="#Tomcat服务器" class="headerlink" title="Tomcat服务器"></a>Tomcat服务器</h2><h3 id="Tomcat的目录"><a href="#Tomcat的目录" class="headerlink" title="Tomcat的目录"></a>Tomcat的目录</h3><ol>
<li>不管什么web资源，想被远程计算机访问，都必须有一个与之对应的网络通信程序，当用户<br>来访问时，这个网络通信程序读取web资源数据，并把数据发送给来访者。</li>
<li>WEB服务器就是这样一个程序，它用于完成底层网络通迅。使用这些服务器，We应用的开发者<br>只需要关注web资源怎么编写，而不需要关心资源如何发送到客户端手中，从而极大的减轻了开<br>发者的开发工作量。</li>
<li>Tomcat的目录结构  <img src="/2020/02/29/JavaWeb/number9.jpg" alt></li>
</ol>
<ul>
<li>bin 存放Tomcat启动和关闭的脚本文件 startup.bat启动服务器</li>
<li>conf 存放Tomcat服务器的各种配置文件</li>
<li>lib 存放Tomcat服务器的支撑jar包</li>
<li>logs 存放日志文件</li>
<li>temp 存放Tomcat运行时产生的临时文件</li>
<li>webapps web应用所在的目录，即供外界访问的资源的存放目录</li>
<li>work Tomcat的工作目录</li>
</ul>
<h3 id="Tomcat服务器的端口"><a href="#Tomcat服务器的端口" class="headerlink" title="Tomcat服务器的端口"></a>Tomcat服务器的端口</h3><ol>
<li>Tomcat的所有配置都放在conf文件夹之中，里面的server.xml文件是配置的核心文件。<br>如果想修改Tomcat服务器的启动端口，则可以在server.xml配置文件中的Connector节点进<br>行的端口修改。改变*.xml文件后必须重新启动Tomcat服务器<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8888"</span> <span class="attr">redirectPort</span>=<span class="string">"8443"</span> </span></span><br><span class="line"><span class="tag">	<span class="attr">connectionTimeout</span>=<span class="string">"20000"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Tomcat虚拟目录的映射"><a href="#Tomcat虚拟目录的映射" class="headerlink" title="Tomcat虚拟目录的映射"></a>Tomcat虚拟目录的映射</h3><ol>
<li>Web应用开发好后，若想供外界访问，需要把web应用所在目录交给web服务器管理，这个过<br>程称之为虚似目录的映射</li>
<li>在Host标签之间加入以下内容，Context表示上下文，代表的就是一个JavaWeb应用，Context<br>元素有两个属性</li>
</ol>
<ul>
<li>path 用来配置虚似目录，必须以”/“开头。</li>
<li>docBase 配置此虚拟目录对应着硬盘上的Web应用所在目录</li>
</ul>
<ol start="3">
<li>即可将在D盘下的JavaWebProject这个JavaWeb应用映射到JavaWebApp这个虚拟目录上，<br>JavaWebApp这个虚拟目录是由Tomcat服务器管理的，JavaWebApp是一个硬盘上不存在的目录<br>是我们自己随便写的一个目录，也就是虚拟的一个目录，所以称之为”虚拟目录”</li>
<li>name是虚拟主机的名字，appBase是存放多个web应用的文件夹。<br>平时我们在互联网上使用域名 <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> 访问百度的网站时，其实就是在访问一个名称<br>是 <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> 的虚拟主机<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">"localhost"</span>  <span class="attr">appBase</span>=<span class="string">"webapps"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">unpackWARs</span>=<span class="string">"true"</span> <span class="attr">autoDeploy</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">xmlValidation</span>=<span class="string">"false"</span> <span class="attr">xmlNamespaceAware</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">"/JavaWebApp"</span> <span class="attr">docBase</span>=<span class="string">"D:\JavaWebProject"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Tomcat服务器自动映射"><a href="#Tomcat服务器自动映射" class="headerlink" title="Tomcat服务器自动映射"></a>Tomcat服务器自动映射</h3><ol>
<li>tomcat服务器会自动管理webapps目录下的所有web应用，并把它映射成虚似目录。换句话说，<br>tomcat服务器webapps目录中的web应用，外界可以直接访问。</li>
<li>直接将web应用放到webapps目录下，Tomcat会自动将JavaWeb应用映射一个同名的虚拟目录</li>
</ol>
<h3 id="浏览器与服务器交互"><a href="#浏览器与服务器交互" class="headerlink" title="浏览器与服务器交互"></a>浏览器与服务器交互</h3><p>当我们打开浏览器，在浏览器的地址栏中输入URL地址<br><a href="http://www.gacl.cn:8080/JavaWebDemo1/1.jsp" target="_blank" rel="noopener">http://www.gacl.cn:8080/JavaWebDemo1/1.jsp</a> 去访问服务器上的1.jsp这个web资源的过<br>程中，浏览器和服务器都做了神马操作呢，我们是怎么在浏览器里面看到1.jsp这个web资源里面<br>的内容的呢？</p>
<ol>
<li>浏览器根据主机名 <a href="http://www.gacl.cn" target="_blank" rel="noopener">www.gacl.cn</a> 去操作系统的Hosts文件中查找主机名对应的IP地址。</li>
<li>浏览器如果在操作系统的Hosts文件中没有找到对应的IP地址，就去互联网上的DNS服务器<br>上查找 <a href="http://www.gacl.cn" target="_blank" rel="noopener">www.gacl.cn</a> 这台主机对应的IP地址。</li>
<li>浏览器查找到 <a href="http://www.gacl.cn" target="_blank" rel="noopener">www.gacl.cn</a> 这台主机对应的IP地址后，就使用IP地址连接到Web服务器。</li>
<li>浏览器连接到web服务器后，就使用http协议向服务器发送请求，发送请求的过程中，浏览器<br>会向Web服务器以Stream(流)的形式传输数据，告诉Web服务器要访问服务器里面的哪个Web应<br>用下的Web资源 <img src="/2020/02/29/JavaWeb/number10.jpg" alt></li>
<li>GET：告诉Web服务器，浏览器是以GET的方式向服务器发请求</li>
<li>/JavaWebDemo1/1.jsp：告诉Web服务器，浏览器要访问JavaWebDemo1应用里面的1.jsp<br>这个Web资源。</li>
<li>HTTP/1.1：告诉Web服务器，浏览器是以HTTP协议请求的，使用的是1.1的版本。</li>
<li>服务器接收到浏览器传输的数据后，开始解析接收到的数据,将读到的内容再以<br>Stream(流)的形式传输给浏览器</li>
</ol>
<h3 id="Javaweb应用的组成结构"><a href="#Javaweb应用的组成结构" class="headerlink" title="Javaweb应用的组成结构"></a>Javaweb应用的组成结构</h3><p>开发JavaWeb应用时，不同类型的文件有严格的存放规则，否则不仅可能会使web应用无法访问<br>，还会导致web服务器启动报错 <img src="/2020/02/29/JavaWeb/number11.jpg" alt></p>
<ol>
<li>WEB-INF此文件夹必须位于WebRoot文件夹里面，而且必须以这样的形式去命名，字母都要大写。</li>
<li>web.xml 配置文件，有格式要求，此文件必须以这样的形式去命名，并且必须放置到WEB-INF<br>文件夹中。</li>
</ol>
<h3 id="Javaweb应用的打包"><a href="#Javaweb应用的打包" class="headerlink" title="Javaweb应用的打包"></a>Javaweb应用的打包</h3><p>在Java中，使用”jar”命令将JavaWeb应用打包成一个War包</p>
<ol>
<li>平时开发完JavaWeb应用后，一般都会将JavaWeb应用打包成一个war包，然后将这个war包放<br>到Tomcat服务器的webapps目录下，当Tomcat服务器启动时，就会自动将webapps目录下的war包<br>解压。</li>
</ol>
<h3 id="Tomcat的体系结构"><a href="#Tomcat的体系结构" class="headerlink" title="Tomcat的体系结构"></a>Tomcat的体系结构</h3><ol>
<li>Tomcat服务器的启动是基于一个server.xml文件的，Tomcat启动的时候首先会启动一个<br>Server，Server里面就会启动Service，Service里面就会启动多个”Connector(连接器)”，<br>每一个连接器都在等待客户机的连接，当有用户使用浏览器去访问服务器上面的web资源时，<br>首先是连接到Connector(连接器)，Connector(连接器)是不处理用户的请求的，而是将<br>用户的请求交给一个Engine(引擎)去处理，Engine(引擎)接收到请求后就会解析用户想要访问<br>的Host，然后将请求交给相应的Host，Host收到请求后就会解析出用户想要访问这个Host下面<br>的哪一个Web应用,一个web应用对应一个Context。 <img src="/2020/02/29/JavaWeb/number12.jpg" alt><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Server</span> <span class="attr">port</span>=<span class="string">"8005"</span> <span class="attr">shutdown</span>=<span class="string">"SHUTDOWN"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Service</span> <span class="attr">name</span>=<span class="string">"Catalina"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8080"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8443"</span> </span></span><br><span class="line"><span class="tag">    	<span class="attr">protocol</span>=<span class="string">"org.apache.coyote.http11.Http11Protocol"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">maxThreads</span>=<span class="string">"150"</span> <span class="attr">SSLEnabled</span>=<span class="string">"true"</span> <span class="attr">scheme</span>=<span class="string">"https"</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">secure</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">clientAuth</span>=<span class="string">"false"</span> <span class="attr">sslProtocol</span>=<span class="string">"TLS"</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">keystoreFile</span>=<span class="string">"conf/.keystore"</span> <span class="attr">keystorePass</span>=<span class="string">"123456"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8009"</span> <span class="attr">protocol</span>=<span class="string">"AJP/1.3"</span> <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Engine</span> <span class="attr">name</span>=<span class="string">"Catalina"</span> <span class="attr">defaultHost</span>=<span class="string">"localhost"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">"localhost"</span>  <span class="attr">appBase</span>=<span class="string">"webapps"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">unpackWARs</span>=<span class="string">"true"</span> <span class="attr">autoDeploy</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">"org.apache.catalina.valves.AccessLogValve"</span> </span></span><br><span class="line"><span class="tag">        	<span class="attr">directory</span>=<span class="string">"logs"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">prefix</span>=<span class="string">"localhost_access_log."</span> <span class="attr">suffix</span>=<span class="string">".txt"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">pattern</span>=<span class="string">"%h %l %u %t <span class="symbol">&amp;quot;</span>%r<span class="symbol">&amp;quot;</span> %s %b"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">"www.gacl.cn"</span> <span class="attr">appBase</span>=<span class="string">"F:\JavaWebApps"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">""</span> <span class="attr">docBase</span>=<span class="string">"F:\JavaWebApps\JavaWebDemo1"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Engine</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Service</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Server</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="互联网的加密原理"><a href="#互联网的加密原理" class="headerlink" title="互联网的加密原理"></a>互联网的加密原理</h3><p>Tomcat服务器启动时候会启动多个Connector(连接器)，而Tomcat服务器的连接器又分为加密<br>连接器和非加密连机器</p>
<ol>
<li>这个Connector是一个没有加密的连接器，去请求服务器上的web资源的这个过程中，我们的<br>请求是不加密的，要是想以一种加密的方式来访问Tomcat服务器，那么就要在Tomcat里面配置<br>一个加密的Connector。要配置一个加密连接器，首先应该把互联网上的加密原理弄清楚。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8080"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="对称加密"><a href="#对称加密" class="headerlink" title="对称加密"></a>对称加密</h3><ol>
<li>采用单钥密码系统的加密方法，同一个密钥可以同时用作信息的加密和解密，这种加密方法<br>称为对称加密，也称为单密钥加密。</li>
<li>需要对加密和解密使用相同密钥的加密算法。由于其速度快，对称性加密通常在消息发送方需<br>要加密大量数据时使用。对称性加密也称为密钥加密。</li>
<li>所谓对称，就是采用这种加密方法的双方使用方式用同样的密钥进行加密和解密。密钥是控制<br>加密及解密过程的指令。算法是一组规则，规定如何进行加密和解密。</li>
<li>加密的安全性不仅取决于加密算法本身，密钥管理的安全性更是重要。因为加密和解密都使用<br>同一个密钥，如何把密钥安全地传递到解密者手上就成了必须要解决的问题。</li>
<li>常用的对称加密有：DES、IDEA、RC2、RC4、SKIPJACK、RC5、AES算法等</li>
</ol>
<h3 id="非对称加密"><a href="#非对称加密" class="headerlink" title="非对称加密"></a>非对称加密</h3><p>非对称加密算法需要两个密钥：公开密钥（publickey）和私有密钥（privatekey）。公开密钥<br>与私有密钥是一对，如果用公开密钥对数据进行加密，只有用对应的私有密钥才能解密；如果用<br>私有密钥对数据进行加密，那么只有用对应的公开密钥才能解密。因为加密和解密使用的是两个<br>不同的密钥，所以这种算法叫作非对称加密算法。 非对称加密算法实现机密信息交换的基本过程<br>是：甲方生成一对密钥并将其中的一把作为公用密钥向其它方公开；得到该公用密钥的乙方使用<br>该密钥对机密信息进行加密后再发送给甲方；甲方再用自己保存的另一把专用密钥对加密后的信<br>息进行解密。另一方面，甲方可以使用乙方的公钥对机密信息进行签名后再发送给乙方；乙方再<br>用自己的私匙对数据进行验签。</p>
<h2 id="Http协议"><a href="#Http协议" class="headerlink" title="Http协议"></a>Http协议</h2><p>HTTP是hypertext transfer protocol（超文本传输协议）的简写，它是TCP/IP协议的一个<br>应用层协议，用于定义WEB浏览器与WEB服务器之间交换数据的过程。客户端连上web服务器后，<br>若想获得web服务器中的某个web资源，需遵守一定的通讯格式，HTTP协议用于定义客户端与web<br>服务器通迅的格式。</p>
<ol>
<li>HTTP协议的版本：HTTP/1.0、HTTP/1.1</li>
<li>在HTTP1.0协议中，客户端与web服务器建立连接后，只能获得一个web资源。在HTTP1.1协议，<br>允许客户端与web服务器建立连接后，在一个连接上获取多个web资源。</li>
</ol>
<h3 id="Http请求"><a href="#Http请求" class="headerlink" title="Http请求"></a>Http请求</h3><ol>
<li>客户端连上服务器后，向服务器请求某个web资源，称之为客户端向服务器发送了一个HTTP<br>请求。</li>
<li>一个完整的HTTP请求包括如下内容 一个请求行、若干消息头、以及实体内容<br><img src="/2020/02/29/JavaWeb/number13.jpg" alt></li>
</ol>
<h3 id="请求行"><a href="#请求行" class="headerlink" title="请求行"></a>请求行</h3><ol>
<li>请求行中的GET称之为请求方式，请求方式有：POST、GET、HEAD、OPTIONS、DELETE、TRACE<br>、PUT，常用的有： GET、 POST</li>
<li>用户如果没有设置，默认情况下浏览器向服务器发送的都是get请求，例如在浏览器直接输地址<br>访问，点超链接访问等都是get，用户如想把请求方式改为post，可通过更改表单的提交方式实现。</li>
<li>不管POST或GET都用于向服务器请求某个WEB资源，这两种方式的区别主要表现在数据传递上<br>如果请求方式为GET方式，则可以在请求的URL地址后以?的形式带上交给服务器的数据多个数据<br>之间以&amp;进行分隔，例如：GET /mail/1.html?name=abc&amp;password=xyz HTTP/1.1</li>
<li>GET方式的特点：在URL地址后附带的参数是有限制的，其数据容量通常不能超过1K。</li>
<li>如果请求方式为POST方式，则可以在请求的实体内容中向服务器发送数据，Post方式的特点<br>是传送的数据量无限制。</li>
</ol>
<h3 id="消息头"><a href="#消息头" class="headerlink" title="消息头"></a>消息头</h3><ol>
<li>accept:浏览器通过这个头告诉服务器，它所支持的数据类型</li>
<li>Accept-Charset: 浏览器通过这个头告诉服务器，它支持哪种字符集</li>
<li>Accept-Encoding：浏览器通过这个头告诉服务器，支持的压缩格式</li>
<li>Accept-Language：浏览器通过这个头告诉服务器，它的语言环境</li>
<li>Host：浏览器通过这个头告诉服务器，想访问哪台主机</li>
<li>If-Modified-Since: 浏览器通过这个头告诉服务器，缓存数据的时间</li>
<li>Referer：浏览器通过这个头告诉服务器，客户机是哪个页面来的  防盗链</li>
<li>Connection：浏览器通过这个头告诉服务器，请求完后是断开链接还是保持链接<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Accept: application&#x2F;x-ms-application, image&#x2F;jpeg, application&#x2F;xaml+xml,</span><br><span class="line">image&#x2F;gif, image&#x2F;pjpeg,application&#x2F;x-ms-xbap, application&#x2F;vnd.ms-excel,</span><br><span class="line">application&#x2F;vnd.ms-powerpoint, application&#x2F;msword, *&#x2F;*</span><br><span class="line">Referer: http:&#x2F;&#x2F;localhost:8080&#x2F;JavaWebDemoProject&#x2F;Web&#x2F;2.jsp</span><br><span class="line">Accept-Language: zh-CN</span><br><span class="line">User-Agent: Mozilla&#x2F;4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64;</span><br><span class="line">Trident&#x2F;4.0;SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR </span><br><span class="line">3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3)</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Host: localhost:8080</span><br><span class="line">Connection: Keep-Alive</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Http响应"><a href="#Http响应" class="headerlink" title="Http响应"></a>Http响应</h3><p>一个HTTP响应代表服务器向客户端回送的数据，它包括： 一个状态行、若干消息头、以及实体内容<br><img src="/2020/02/29/JavaWeb/number14.jpg" alt></p>
<ol>
<li>状态行格式： HTTP版本号 状态码 <img src="/2020/02/29/JavaWeb/number15.jpg" alt></li>
<li>HTTP响应中的常用响应头(消息头)</li>
</ol>
<ul>
<li>Location: 服务器通过这个头，来告诉浏览器跳到哪里</li>
<li>Server：服务器通过这个头，告诉浏览器服务器的型号</li>
<li>Content-Encoding：服务器通过这个头，告诉浏览器，数据的压缩格式</li>
<li>Content-Length: 服务器通过这个头，告诉浏览器回送数据的长度</li>
<li>Content-Language: 服务器通过这个头，告诉浏览器语言环境</li>
<li>Content-Type：服务器通过这个头，告诉浏览器回送数据的类型</li>
<li>Refresh：服务器通过这个头，告诉浏览器定时刷新</li>
<li>Content-Disposition: 服务器通过这个头，告诉浏览器以下载方式获取数据</li>
<li>Transfer-Encoding：服务器通过这个头，告诉浏览器数据是以分块方式回送的</li>
<li>Expires: -1  控制浏览器不要缓存</li>
<li>Cache-Control: no-cache  </li>
<li>Pragma: no-cache </li>
</ul>
<h3 id="设置响应头"><a href="#设置响应头" class="headerlink" title="设置响应头"></a>设置响应头</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">..</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo01</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        response.setStatus(<span class="number">302</span>);<span class="comment">//设置服务器的响应状态码</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *设置响应头，服务器通过 Location这个头，来告诉浏览器跳到哪里，</span></span><br><span class="line"><span class="comment">         这就是所谓的请求重定向</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        response.setHeader(<span class="string">"Location"</span>, </span><br><span class="line">        	<span class="string">"/JavaWeb_HttpProtocol_Study_20140528/1.jsp"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当在浏览器中使用URL地址 <a href="http://localhost:8080/JavaWeb_HttpProtocol_Study_20140528/" target="_blank" rel="noopener">http://localhost:8080/JavaWeb_HttpProtocol_Study_20140528/</a><br>servlet/ServletDemo01 访问ServletDemo01时，就可以看到服务器作出响应后发送到浏览<br>器的状态码和响应头信息  <img src="/2020/02/29/JavaWeb/number16.jpg" alt><br>服务器返回一个302状态码告诉浏览器，你要的资源我没有，但是我通过Location响应头告诉你<br>哪里有，而浏览器解析响应头Location后知道要跳转到<br>/JavaWeb_HttpProtocol_Study_20140528/1.jsp页面，所以就会自动跳转到1.jsp</p>
<h3 id="Content-Encoding响应头"><a href="#Content-Encoding响应头" class="headerlink" title="Content-Encoding响应头"></a>Content-Encoding响应头</h3><p><img src="/2020/02/29/JavaWeb/number17.jpg" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *这个小程序是用来演示以下两个小知识点</span></span><br><span class="line"><span class="comment"> *1、使用GZIPOutputStream流来压缩数据</span></span><br><span class="line"><span class="comment"> *2、设置响应头Content-Encoding来告诉浏览器，服务器发送回来的数据压缩后的格式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo02</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String data = <span class="string">"abcdabcdabcdabcdabcdabcdab"</span> +</span><br><span class="line">                <span class="string">"cdabcdabcdabcdabcdabcdabcdabcdabcdabcd"</span>;</span><br><span class="line">        System.out.println(<span class="string">"原始数据的大小为："</span> + data.getBytes().length);</span><br><span class="line">        ByteArrayOutputStream bout = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">        GZIPOutputStream gout = <span class="keyword">new</span> GZIPOutputStream(bout); <span class="comment">//buffer</span></span><br><span class="line">        gout.write(data.getBytes());</span><br><span class="line">        gout.close();</span><br><span class="line">        <span class="comment">//得到压缩后的数据</span></span><br><span class="line">        <span class="keyword">byte</span> g[] = bout.toByteArray();</span><br><span class="line">        response.setHeader(<span class="string">"Content-Encoding"</span>, <span class="string">"gzip"</span>);</span><br><span class="line">        response.setHeader(<span class="string">"Content-Length"</span>,g.length +<span class="string">""</span>);</span><br><span class="line">        response.getOutputStream().write(g);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="content-type响应头"><a href="#content-type响应头" class="headerlink" title="content-type响应头"></a>content-type响应头</h3><p><img src="/2020/02/29/JavaWeb/number18.jpg" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo03</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 浏览器能接收(Accept)的数据类型有: </span></span><br><span class="line"><span class="comment">         * application/x-ms-application, </span></span><br><span class="line"><span class="comment">         * image/jpeg, </span></span><br><span class="line"><span class="comment">         * application/xaml+xml, </span></span><br><span class="line"><span class="comment">         * image/gif, </span></span><br><span class="line"><span class="comment">         * image/pjpeg, </span></span><br><span class="line"><span class="comment">         * application/x-ms-xbap, </span></span><br><span class="line"><span class="comment">         * application/vnd.ms-excel, </span></span><br><span class="line"><span class="comment">         * application/vnd.ms-powerpoint, </span></span><br><span class="line"><span class="comment">         * application/msword, </span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        response.setHeader(<span class="string">"content-type"</span>, <span class="string">"image/jpeg"</span>);</span><br><span class="line">        <span class="comment">//使用content-type响应头指定发送给浏览器的数据类型为"image/jpeg"</span></span><br><span class="line">        <span class="comment">//读取位于项目根目录下的img文件夹里面的WP_20131005_002.jpg这张图片，</span></span><br><span class="line">        <span class="comment">//返回一个输入流</span></span><br><span class="line">        InputStream in = <span class="keyword">this</span>.getServletContext().</span><br><span class="line">        getResourceAsStream(<span class="string">"/img/WP_20131005_002.jpg"</span>);</span><br><span class="line">        <span class="keyword">byte</span> buffer[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        OutputStream out = response.getOutputStream();<span class="comment">//得到输出流</span></span><br><span class="line">        <span class="keyword">while</span> ((len = in.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//读取输入流(in)里面的内容存储到缓冲区(buffer)</span></span><br><span class="line">            out.write(buffer, <span class="number">0</span>, len);<span class="comment">//将缓冲区里面的内容输出到浏览器</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="refresh响应头"><a href="#refresh响应头" class="headerlink" title="refresh响应头"></a>refresh响应头</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo04</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 设置refresh响应头，让浏览器每隔3秒定时刷新</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// response.setHeader("refresh", "3");</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 设置refresh响应头，让浏览器3秒后跳转到http://www.baidu.com</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        response.setHeader(<span class="string">"refresh"</span>, <span class="string">"3;url='http://www.baidu.com'"</span>);</span><br><span class="line">        response.getWriter().write(<span class="string">"gacl"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="content-disposition响应头"><a href="#content-disposition响应头" class="headerlink" title="content-disposition响应头"></a>content-disposition响应头</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo05</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 设置content-disposition响应头，让浏览器下载文件</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        response.setHeader(<span class="string">"content-disposition"</span>, </span><br><span class="line">        	<span class="string">"attachment;filename=xxx.jpg"</span>);</span><br><span class="line">        InputStream in = <span class="keyword">this</span>.getServletContext()</span><br><span class="line">        .getResourceAsStream(<span class="string">"/img/1.jpg"</span>);</span><br><span class="line">        <span class="keyword">byte</span> buffer[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        OutputStream out = response.getOutputStream();</span><br><span class="line">        <span class="keyword">while</span> ((len = in.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            out.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><p>Servlet是sun公司提供的一门用于开发动态web资源的技术。<br>Sun公司在其API中提供了一个servlet接口，用户若想用发一个动态web资源(即开发一个Java程<br>序向浏览器输出数据)，需要完成以下2个步骤</p>
<ul>
<li>编写一个Java类，实现servlet接口。</li>
<li>把开发好的Java类部署到web服务器中。<br>按照一种约定俗成的称呼习惯，通常我们也把实现了servlet接口的java程序，称之为Servlet</li>
</ul>
<h3 id="Servlet的运行过程"><a href="#Servlet的运行过程" class="headerlink" title="Servlet的运行过程"></a>Servlet的运行过程</h3><p>Servlet程序是由WEB服务器调用，web服务器收到客户端的Servlet访问请求后</p>
<ol>
<li>Web服务器首先检查是否已经装载并创建了该Servlet的实例对象。如果是，则直接执行第4步，<br>否则，执行第2步。</li>
<li>装载并创建该Servlet的一个实例对象。</li>
<li>调用Servlet实例对象的init()方法。</li>
<li>创建一个用于封装HTTP请求消息的HttpServletRequest对象和一个代表HTTP响应消息的<br>HttpServletResponse对象，然后调用Servlet的service()方法并将请求和响应对象作为参<br>数传递进去。</li>
<li>WEB应用程序被停止或重新启动之前，Servlet引擎将卸载Servlet，并在卸载之前调用<br>Servlet的destroy()方法。 </li>
<li><img src="/2020/02/29/JavaWeb/number19.jpg" alt>  <img src="/2020/02/29/JavaWeb/number21.jpg" alt> <img src="/2020/02/29/JavaWeb/number20.jpg" alt> <img src="/2020/02/29/JavaWeb/number22.jpg" alt></li>
<li><img src="/2020/02/29/JavaWeb/number23.jpg" alt> <img src="/2020/02/29/JavaWeb/number24.jpg" alt></li>
</ol>
<h3 id="Servlet调用"><a href="#Servlet调用" class="headerlink" title="Servlet调用"></a>Servlet调用</h3><p><img src="/2020/02/29/JavaWeb/number25.jpg" alt></p>
<h3 id="Servlet开发"><a href="#Servlet开发" class="headerlink" title="Servlet开发"></a>Servlet开发</h3><ol>
<li>Servlet接口SUN公司定义了两个默认实现类，分别为：GenericServlet、HttpServlet。</li>
<li>HttpServlet指能够处理HTTP请求的servlet，它在原有Servlet接口上添加了一些与HTTP<br>协议处理方法，它比Servlet接口的功能更为强大。因此开发人员在编写Servlet时，通常应继承<br>这个类，而避免直接去实现Servlet接口。</li>
<li>HttpServlet在实现Servlet接口时，覆写了service方法，该方法体内的代码会自动判断用<br>户的请求方式，如为GET请求，则调用HttpServlet的doGet方法，如为Post请求，则调用doPost<br>方法。因此，开发人员在编写Servlet时，通常只需要覆写doGet或doPost方法，而不要去覆写<br>service方法。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse</span></span></span><br><span class="line"><span class="function"><span class="params">     response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        out.println(<span class="string">"&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HT//EN\"&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"&lt;HTML&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"  &lt;HEAD&gt;&lt;TITLE&gt;A Servlet&lt;/TITLE&gt;&lt;/HEAD&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"  &lt;BODY&gt;"</span>);</span><br><span class="line">        out.print(<span class="string">"    This is "</span>);</span><br><span class="line">        out.print(<span class="keyword">this</span>.getClass());</span><br><span class="line">        out.println(<span class="string">", using the GET method"</span>);</span><br><span class="line">        out.println(<span class="string">"  &lt;/BODY&gt;"</span>);</span><br><span class="line">        out.println(<span class="string">"&lt;/HTML&gt;"</span>);</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">           doGet(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>而web.xml文件中也多了servlet和servlet-mapping两对标签 <img src="/2020/02/29/JavaWeb/number26.jpg" alt></li>
</ol>
<h3 id="Servlet映射url"><a href="#Servlet映射url" class="headerlink" title="Servlet映射url"></a>Servlet映射url</h3><ol>
<li>由于客户端是通过URL地址访问web服务器中的资源，所以Servlet程序若想被外界访问，必须<br>把 servlet程序映射到一个URL地址上，这个工作在web.xml文件中使用servlet元素和<br>servlet-mapping元素完成。</li>
<li>servlet元素用于注册Servlet，它包含有两个主要的子元素：servlet-name和<br>servlet-class，分别用于设置Servlet的注册名称和Servlet的完整类名。两个name必须一样<br>一个servlet-mapping元素用于映射一个已注册的Servlet的一个对外访问路径，它包含有两个<br>子元素：servlet-name和url-pattern，分别用于指定Servlet的注册名称和Servlet的对外访<br>问路径,注意访问时还要加上项目名然后才是url-pattern<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>gacl.servlet.study.ServletDemo1<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet/ServletDemo1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>同一个Servlet可以被映射到多个URL上，即多个servlet-mapping元素的servlet-name子<br>元素的设置值可以是同一个Servlet的注册名<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>gacl.servlet.study.ServletDemo1<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet/ServletDemo1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/1.htm<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/2.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Servlet访问url通配符映射"><a href="#Servlet访问url通配符映射" class="headerlink" title="Servlet访问url通配符映射"></a>Servlet访问url通配符映射</h3><ol>
<li>在Servlet映射到的URL中也可以使用*通配符，但是只能有两种固定的格式：一种<br>格式是*.扩展名，另一种格式是以正斜杠（/）开头并以*结尾<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>gacl.servlet.study.ServletDemo1<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Servlet与普通类的区别"><a href="#Servlet与普通类的区别" class="headerlink" title="Servlet与普通类的区别"></a>Servlet与普通类的区别</h3><ol>
<li>Servlet是一个供其他Java程序（Servlet引擎）调用的Java类，它不能独立运行，它的运行<br>完全由Servlet引擎来控制和调度。</li>
<li>针对客户端的多次Servlet请求，通常情况下，服务器只会创建一个Servlet实例对象，也就是<br>说Servlet实例对象一旦创建，它就会驻留在内存中，为后续的其它请求服务，直至web容器退出，<br>servlet实例对象才会销毁。</li>
<li>在Servlet的整个生命周期内，Servlet的init方法只被调用一次。而对一个Servlet的每次访<br>问请求都导致Servlet引擎调用一次servlet的service方法。对于每次访问请求，Servlet引擎都<br>会创建一个新的HttpServletRequest请求对象和一个新的HttpServletResponse响应对象，然后<br>将这两个对象作为参数传递给它调用的Servlet的service()方法，service方法再根据请求方式<br>分别调用doXXX方法。</li>
<li>如果在servlet元素中配置了一个 load-on-startup 元素，那么WEB应用程序在启动时，<br>就会装载并创建Servlet的实例对象、以及调用Servlet实例对象的init()方法。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>invoker<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        org.apache.catalina.servlets.InvokerServlet</span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="缺省Servlet"><a href="#缺省Servlet" class="headerlink" title="缺省Servlet"></a>缺省Servlet</h3><ol>
<li>如果某个Servlet的映射路径仅仅为一个正斜杠/那么这个Servlet就成为当前Web应用程序的<br>缺省Servlet。</li>
<li>凡是在web.xml文件中找不到匹配的servlet-mapping元素的URL，它们的访问请求都将交给<br>缺省Servlet处理，也就是说，缺省Servlet用于处理所有其他Servlet都不处理的访问请求</li>
<li>当访问不存在的Servlet时，就使用配置的默认Servlet进行处理</li>
</ol>
<h3 id="Servlet线程安全问题"><a href="#Servlet线程安全问题" class="headerlink" title="Servlet线程安全问题"></a>Servlet线程安全问题</h3><ol>
<li>当多个客户端并发访问同一个Servlet时，web服务器会为每一个客户端的访问请求创建一个<br>线程，并在这个线程上调用Servlet的service方法，因此service方法内如果访问了同一个资源<br>的话，就有可能引发线程安全问题。</li>
</ol>
<h3 id="ServletConfig"><a href="#ServletConfig" class="headerlink" title="ServletConfig"></a>ServletConfig</h3><ol>
<li>在Servlet的配置文件web.xml中，可以使用一个或多个init-param标签为servlet配置一<br>些初始化参数。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletConfigDemo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>gacl.servlet.study.ServletConfigDemo1<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置ServletConfigDemo1的初始化参数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>gacl<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>password<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>123<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>charset<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>当servlet配置了初始化参数后，web容器在创建servlet实例对象时，会自动将这些初始化<br>参数封装到ServletConfig对象中，并在调用servlet的init方法时，将ServletConfig对象传<br>递给servlet。进而，我们通过ServletConfig对象就可以得到当前servlet的初始化参数信息。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletConfigDemo1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ServletConfig config;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当servlet配置了初始化参数后，web容器在创建servlet实例对象时，</span></span><br><span class="line"><span class="comment">     * 会自动将这些初始化参数封装到ServletConfig对象中，并在调用servlet的init方法时，</span></span><br><span class="line"><span class="comment">     * 将ServletConfig对象传递给servlet。进而，程序员通过ServletConfig对象就可以</span></span><br><span class="line"><span class="comment">     * 得到当前servlet的初始化参数信息。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.config = config;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//获取在web.xml中配置的初始化参数</span></span><br><span class="line">        String paramVal = <span class="keyword">this</span>.config.getInitParameter(<span class="string">"name"</span>);</span><br><span class="line">        <span class="comment">//获取指定的初始化参数</span></span><br><span class="line">        response.getWriter().print(paramVal);</span><br><span class="line">        response.getWriter().print(<span class="string">"&lt;hr/&gt;"</span>);</span><br><span class="line">        <span class="comment">//获取所有的初始化参数</span></span><br><span class="line">        Enumeration&lt;String&gt; e = config.getInitParameterNames();</span><br><span class="line">        <span class="keyword">while</span>(e.hasMoreElements())&#123;</span><br><span class="line">            String name = e.nextElement();</span><br><span class="line">            String value = config.getInitParameter(name);</span><br><span class="line">            response.getWriter().print(name + <span class="string">"="</span> + value + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="ServletContext"><a href="#ServletContext" class="headerlink" title="ServletContext"></a>ServletContext</h3><ol>
<li>WEB容器在启动时，它会为每个WEB应用程序都创建一个对应的ServletContext对象，它代表<br>当前web应用。</li>
<li>ServletConfig对象中维护了ServletContext对象的引用，开发人员在编写servlet时，可以<br>通过ServletConfig.getServletContext方法获得ServletContext对象。</li>
<li>由于一个WEB应用中的所有Servlet共享同一个ServletContext对象，因此Servlet对象之间<br>可以通过ServletContext对象来实现通讯。ServletContext对象通常也被称之为context域对象。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletContextDemo1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String data = <span class="string">"xdp_gacl"</span>;</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletConfig().getServletContext();</span><br><span class="line">        <span class="comment">//获得ServletContext对象</span></span><br><span class="line">        context.setAttribute(<span class="string">"data"</span>, data);  <span class="comment">//将data存储到ServletContext对象中</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletContextDemo2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//两种方式都可以获取context</span></span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        String data = (String) context.getAttribute(<span class="string">"data"</span>);</span><br><span class="line">        <span class="comment">//从ServletContext对象中取出数据</span></span><br><span class="line">        response.getWriter().print(<span class="string">"data="</span>+data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ServletContext实现请求转发,访问的是ServletContextDemo4，浏览器显示的却是<br>ServletContextDemo5的内容，这就是使用ServletContext实现了请求转发<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletContextDemo4</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String data = <span class="string">"&lt;h1&gt;&lt;font color='red'&gt;abcdefghjkl&lt;/font&gt;&lt;/h1&gt;"</span>;</span><br><span class="line">        response.getOutputStream().write(data.getBytes());</span><br><span class="line">        <span class="comment">//获取ServletContext对象</span></span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        RequestDispatcher rd = context.getRequestDispatcher(</span><br><span class="line">        <span class="string">"/servlet/ServletContextDemo5"</span>);<span class="comment">//获取请求转发对象(RequestDispatcher)</span></span><br><span class="line">        rd.forward(request, response);<span class="comment">//调用forward方法实现请求转发</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletContextDemo5</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        response.getOutputStream().write(<span class="string">"servletDemo5"</span>.getBytes());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>对于不经常变化的数据，在servlet中可以为其设置合理的缓存时间值，以避免浏览器频繁向<br>服务器发送请求，提升服务器的性能<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo5</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String data = <span class="string">"abcddfwerwesfasfsadf"</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 设置数据合理的缓存时间值，以避免浏览器频繁向服务器发送请求，提升服务器</span></span><br><span class="line"><span class="comment">         * 的性能</span></span><br><span class="line"><span class="comment">         * 这里是将数据的缓存时间设置为1天</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        response.setDateHeader(<span class="string">"expires"</span>,System.currentTimeMillis() + </span><br><span class="line">        	<span class="number">24</span> * <span class="number">3600</span> * <span class="number">1000</span>);</span><br><span class="line">        response.getOutputStream().write(data.getBytes());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="HttpServletResponse对象"><a href="#HttpServletResponse对象" class="headerlink" title="HttpServletResponse对象"></a>HttpServletResponse对象</h2><ol>
<li>Web服务器收到客户端的http请求，会针对每一次请求，分别创建一个用于代表请求的<br>request对象、和代表响应的response对象。</li>
<li>request和response对象既然代表请求和响应，那我们要获取客户机提交过来的数据，只需要<br>找request对象就行了。要向客户机输出数据，只需要找response对象就行了。</li>
<li>HttpServletResponse对象代表服务器的响应。这个对象中封装了向客户端发送数据、发送响<br>应头，发送响应状态码的方法。查看HttpServletResponse的API，可以看到这些相关的方法。</li>
<li>负责向客户端发送数据的相关方法  <img src="/2020/02/29/JavaWeb/number27.jpg" alt></li>
<li>负责向客户端发送响应头的方法  <img src="/2020/02/29/JavaWeb/number28.jpg" alt></li>
</ol>
<h3 id="HttpServletResponse对象常见应用"><a href="#HttpServletResponse对象常见应用" class="headerlink" title="HttpServletResponse对象常见应用"></a>HttpServletResponse对象常见应用</h3><ol>
<li>使用OutputStream流输出中文注意问题,可以通过设置响应头控制浏览器的行为，<br>通过设置响应头控制浏览器以UTF-8的编码显示数据。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setHeader(<span class="string">"content-type"</span>, <span class="string">"text/html;charset=UTF-8"</span>)</span><br></pre></td></tr></table></figure></li>
<li>使用PrintWriter流向客户端浏览器输出中文数据<br>在开发过程中，如果希望服务器输出什么浏览器就能看到什么，那么在服务器端都要以字符串<br>的形式进行输出。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">response.setHeader(<span class="string">"content-type"</span>, <span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">PrintWriter out = response.getWriter();<span class="comment">//获取PrintWriter输出流</span></span><br></pre></td></tr></table></figure></li>
<li>文件下载功能是web开发中经常使用到的功能，使用HttpServletResponse对象就可以实现<br>文件的下载</li>
</ol>
<ul>
<li>获取要下载的文件的绝对路径</li>
<li>获取要下载的文件名</li>
<li>设置content-disposition响应头控制浏览器以下载的形式打开文件</li>
<li>获取要下载的文件输入流</li>
<li>创建数据缓冲区</li>
<li>通过response对象获取OutputStream流</li>
<li>将FileInputStream流写入到buffer缓冲区</li>
<li>使用OutputStream将缓冲区的数据输出到客户端浏览器<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseDemo02</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        downloadFileByOutputStream(response);<span class="comment">//下载文件，通过OutputStream流</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">downloadFileByOutputStream</span><span class="params">(HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> FileNotFoundException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1.获取要下载的文件的绝对路径</span></span><br><span class="line">        String realPath = <span class="keyword">this</span>.getServletContext().getRealPath</span><br><span class="line">        (<span class="string">"/download/1.JPG"</span>);</span><br><span class="line">        <span class="comment">//2.获取要下载的文件名</span></span><br><span class="line">        String fileName = realPath.substring(realPath.lastIndexOf(<span class="string">"\\"</span>)+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//3.设置content-disposition响应头控制浏览器以下载的形式打开文件</span></span><br><span class="line">        response.setHeader(<span class="string">"content-disposition"</span>, <span class="string">"attachment;filename="</span></span><br><span class="line">        	+fileName);</span><br><span class="line">        <span class="comment">//如果文件名包含中文需要编码</span></span><br><span class="line">        response.setHeader(<span class="string">"content-disposition"</span>, <span class="string">"attachment;filename="</span></span><br><span class="line">        	+URLEncoder.encode(fileName, <span class="string">"UTF-8"</span>));</span><br><span class="line">        <span class="comment">//4.获取要下载的文件输入流</span></span><br><span class="line">        InputStream in = <span class="keyword">new</span> FileInputStream(realPath);</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//5.创建数据缓冲区</span></span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//6.通过response对象获取OutputStream流</span></span><br><span class="line">        OutputStream out = response.getOutputStream();</span><br><span class="line">        <span class="comment">//7.将FileInputStream流写入到buffer缓冲区</span></span><br><span class="line">        <span class="keyword">while</span> ((len = in.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//8.使用OutputStream将缓冲区的数据输出到客户端浏览器</span></span><br><span class="line">            out.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="4">
<li>编写文件下载功能时推荐使用OutputStream流，避免使用PrintWriter流，因为<br>OutputStream流是字节流，可以处理任意类型的数据，而PrintWriter流是字符流，只能处理<br>字符数据，如果用字符流处理字节数据，会导致数据丢失。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseDemo02</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        downloadFileByPrintWriter(response);<span class="comment">//下载文件，通过PrintWriter流</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">downloadFileByPrintWriter</span><span class="params">(HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> FileNotFoundException, IOException </span>&#123;</span><br><span class="line">        String realPath = <span class="keyword">this</span>.getServletContext().getRealPath(</span><br><span class="line">        	<span class="string">"/download/张家界国家森林公园.JPG"</span>);<span class="comment">//获取要下载的文件的绝对路径</span></span><br><span class="line">        String fileName = realPath.substring(realPath.lastIndexOf(<span class="string">"\\"</span>)+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//获取要下载的文件名</span></span><br><span class="line">        <span class="comment">//设置content-disposition响应头控制浏览器以下载的形式打开文件，中文文件名</span></span><br><span class="line">        <span class="comment">//要使用URLEncoder.encode方法进行编码</span></span><br><span class="line">        response.setHeader(<span class="string">"content-disposition"</span>, </span><br><span class="line">        	<span class="string">"attachment;filename="</span>+URLEncoder.encode(fileName, <span class="string">"UTF-8"</span>));</span><br><span class="line">        FileReader in = <span class="keyword">new</span> FileReader(realPath);</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">char</span>[] buffer = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        <span class="keyword">while</span> ((len = in.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            out.write(buffer,<span class="number">0</span>,len);<span class="comment">//将缓冲区的数据输出到客户端浏览器</span></span><br><span class="line">        &#125;</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="生成验证码"><a href="#生成验证码" class="headerlink" title="生成验证码"></a>生成验证码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseDemo03</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        </span><br><span class="line">        response.setHeader(<span class="string">"refresh"</span>, <span class="string">"5"</span>);</span><br><span class="line">        <span class="comment">//设置refresh响应头控制浏览器每隔5秒钟刷新一次</span></span><br><span class="line">        <span class="comment">//1.在内存中创建一张图片</span></span><br><span class="line">        BufferedImage image = <span class="keyword">new</span> BufferedImage(<span class="number">80</span>, <span class="number">20</span>, </span><br><span class="line">        	BufferedImage.TYPE_INT_RGB);</span><br><span class="line">        <span class="comment">//2.得到图片</span></span><br><span class="line">        <span class="comment">//Graphics g = image.getGraphics();</span></span><br><span class="line">        Graphics2D g = (Graphics2D)image.getGraphics();</span><br><span class="line">        g.setColor(Color.WHITE);<span class="comment">//设置图片的背景色</span></span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">80</span>, <span class="number">20</span>);<span class="comment">//填充背景色</span></span><br><span class="line">        <span class="comment">//3.向图片上写数据</span></span><br><span class="line">        g.setColor(Color.BLUE);<span class="comment">//设置图片上字体的颜色</span></span><br><span class="line">        g.setFont(<span class="keyword">new</span> Font(<span class="keyword">null</span>, Font.BOLD, <span class="number">20</span>));</span><br><span class="line">        g.drawString(makeNum(), <span class="number">0</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="comment">//4.设置响应头控制浏览器浏览器以图片的方式打开</span></span><br><span class="line">        response.setContentType(<span class="string">"image/jpeg"</span>);</span><br><span class="line">        <span class="comment">//等同于response.setHeader("Content-Type", "image/jpeg");</span></span><br><span class="line">        <span class="comment">//5.设置响应头控制浏览器不缓存图片数据</span></span><br><span class="line">        response.setDateHeader(<span class="string">"expries"</span>, -<span class="number">1</span>);</span><br><span class="line">        response.setHeader(<span class="string">"Cache-Control"</span>, <span class="string">"no-cache"</span>);</span><br><span class="line">        response.setHeader(<span class="string">"Pragma"</span>, <span class="string">"no-cache"</span>);</span><br><span class="line">        <span class="comment">//6.将图片写给浏览器</span></span><br><span class="line">        ImageIO.write(image, <span class="string">"jpg"</span>, response.getOutputStream());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">makeNum</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        String num = random.nextInt(<span class="number">9999999</span>)+<span class="string">""</span>;</span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>-num.length(); i++) &#123;</span><br><span class="line">            sb.append(<span class="string">"0"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        num = sb.toString()+num;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="设置响应头控制浏览器行为"><a href="#设置响应头控制浏览器行为" class="headerlink" title="设置响应头控制浏览器行为"></a>设置响应头控制浏览器行为</h3><ol>
<li>设置http响应头控制浏览器禁止缓存当前文档内容<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">response.setDateHeader(<span class="string">"expries"</span>, -<span class="number">1</span>);</span><br><span class="line">response.setHeader(<span class="string">"Cache-Control"</span>, <span class="string">"no-cache"</span>);</span><br><span class="line">response.setHeader(<span class="string">"Pragma"</span>, <span class="string">"no-cache"</span>);</span><br></pre></td></tr></table></figure></li>
<li>设置http响应头控制浏览器定时刷新网页(refresh)<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置refresh响应头控制浏览器每隔5秒钟刷新一次</span></span><br><span class="line">response.setHeader(<span class="string">"refresh"</span>, <span class="string">"5"</span>);</span><br></pre></td></tr></table></figure></li>
<li>通过response实现请求重定向</li>
</ol>
<ul>
<li>请求重定向指：一个web资源收到客户端请求后，通知客户端去访问另外一个web资源，这称<br>之为请求重定向。</li>
<li>应用场景：用户登陆，用户首先访问登录页面，登录成功后，就会跳转到某个页面，这个过程<br>就是一个请求重定向的过程</li>
<li>实现方式：response.sendRedirect(String location)，即调用response对象的<br>sendRedirect方法实现请求重定向</li>
<li>sendRedirect内部的实现原理：使用response设置302状态码和设置location响应头实现<br>重定向<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseDemo04</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 1.调用sendRedirect方法实现请求重定向,</span></span><br><span class="line"><span class="comment">         * 内部调用response.setStatus(HttpServletResponse.SC_FOUND);</span></span><br><span class="line"><span class="comment">         *设置302状态码，等同于response.setStatus(302);</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        response.sendRedirect(</span><br><span class="line">        	<span class="string">"/JavaWeb_HttpServletResponse_Study_20140615/index.jsp"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Web工程中的URL推荐写法"><a href="#Web工程中的URL推荐写法" class="headerlink" title="Web工程中的URL推荐写法"></a>Web工程中的URL推荐写法</h3><ol>
<li>在JavaWeb开发中，只要是写URL地址，那么建议最好以”/“开头，也就是使用绝对路径的方<br>式，那么这个”/“到底代表什么呢？可以用如下的方式来记忆”/“：如果”/“是给服务器用的，则<br>代表当前的web工程，如果”/“是给浏览器用的，则代表webapps目录。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 1.ServletContext.getRealPath("/download/1.JPG")是用来获取服务器上的某个资源，</span></span><br><span class="line"><span class="comment">* 那么这个"/"就是给服务器用的，"/"此时代表的就是web工程</span></span><br><span class="line"><span class="comment">* ServletContext.getRealPath("/download/1.JPG")表示的就是读取web工程下的</span></span><br><span class="line"><span class="comment">* download文件夹中的1.JPG这个资源</span></span><br><span class="line"><span class="comment">* 只要明白了"/"代表的具体含义，就可以很快写出要访问的web资源的绝对路径</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">this</span>.getServletContext().getRealPath(<span class="string">"/download/1.JPG"</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 2.forward</span></span><br><span class="line"><span class="comment">* 客户端请求某个web资源，服务器跳转到另外一个web资源，这个forward也是给服务器用的，</span></span><br><span class="line"><span class="comment">* 那么这个"/"就是给服务器用的，所以此时"/"代表的就是web工程</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">this</span>.getServletContext().getRequestDispatcher(<span class="string">"/index.jsp"</span>).forward(</span><br><span class="line">	request, response);</span><br></pre></td></tr></table></figure></li>
<li>使用sendRedirect实现请求重定向,服务器发送一个URL地址给浏览器，浏览器拿到URL地址<br>之后，再去请求服务器，所以这个”/“是给浏览器使用的，此时”/“代表的就是webapps目录，<br>“/JavaWeb_HttpServletResponse_Study_20140615/index.jsp”<br>这个地址指的就是”webapps\JavaWeb_HttpServletResponse_Study_20140615\index.jsp<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.sendRedirect(<span class="string">"/JavaWeb_HttpServletResponse_Study_20140615/index.jsp"</span>);</span><br></pre></td></tr></table></figure></li>
<li>response.sendRedirect(“/项目名称/文件夹目录/页面”);这种写法是将项目名称写死在<br>程序中的做法，不灵活，万一哪天项目名称变了，此时就得改程序<br>request.getContextPath()获取到的内容就是<br>“/JavaWeb_HttpServletResponse_Study_20140615”<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.sendRedirect(request.getContextPath()+<span class="string">"/index.jsp"</span>);</span><br></pre></td></tr></table></figure></li>
<li>这是客户端浏览器使用的超链接跳转，这个”/“是给浏览器使用的，此时”/“代表的就是<br>webapps目录<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/JavaWeb_HttpServletResponse_Study_20140615/index.jsp"</span>&gt;</span>跳转到首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/index.jsp"</span>&gt;</span>跳转到首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="response细节"><a href="#response细节" class="headerlink" title="response细节"></a>response细节</h3><ol>
<li>getOutputStream和getWriter方法分别用于得到输出二进制数据、输出文本数据的<br>ServletOuputStream、Printwriter对象。</li>
<li>getOutputStream和getWriter这两个方法互相排斥，调用了其中的任何一个方法后，就不<br>能再调用另一方法。  </li>
<li>Servlet程序向ServletOutputStream或PrintWriter对象中写入的数据将被Servlet引擎从<br>response里面获取，Servlet引擎将这些数据当作响应消息的正文，然后再与响应状态行和各响<br>应头组合后输出到客户端。</li>
<li>Serlvet的service方法结束后，Servlet引擎将检查getWriter或getOutputStream方法返<br>回的输出流对象是否已经调用过close方法，如果没有，Servlet引擎将调用close方法关闭该输<br>出流对象。</li>
</ol>
<h2 id="HttpServletRequest"><a href="#HttpServletRequest" class="headerlink" title="HttpServletRequest"></a>HttpServletRequest</h2><p>HttpServletRequest对象代表客户端的请求，当客户端通过HTTP协议访问服务器时，HTTP请求<br>头中的所有信息都封装在这个对象中，通过这个对象提供的方法，可以获得客户端请求的所有信息。</p>
<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><ol>
<li>获取客户机信息</li>
</ol>
<ul>
<li>getRequestURL方法返回客户端发出请求时的完整URL。</li>
<li>getRequestURI方法返回请求行中的资源名部分。</li>
<li>getQueryString 方法返回请求行中的参数部分。</li>
<li>getPathInfo方法返回请求URL中的额外路径信息。额外路径信息是请求URL中的位于Servlet<br>的路径之后和查询参数之前的内容，它以“/”开头。</li>
<li>getRemoteAddr方法返回发出请求的客户机的IP地址。</li>
<li>getRemoteHost方法返回发出请求的客户机的完整主机名。</li>
<li>getRemotePort方法返回客户机所使用的网络端口号。</li>
<li>getLocalAddr方法返回WEB服务器的IP地址。</li>
<li>getLocalName方法返回WEB服务器的主机名。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo01</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String requestUrl = request.getRequestURL().toString();</span><br><span class="line">        <span class="comment">//得到请求的URL地址</span></span><br><span class="line">        String requestUri = request.getRequestURI();</span><br><span class="line">        <span class="comment">//得到请求的资源</span></span><br><span class="line">        String queryString = request.getQueryString();</span><br><span class="line">        <span class="comment">//得到请求的URL地址中附带的参数</span></span><br><span class="line">        String remoteAddr = request.getRemoteAddr();</span><br><span class="line">        <span class="comment">//得到来访者的IP地址</span></span><br><span class="line">        String remoteHost = request.getRemoteHost();</span><br><span class="line">        <span class="keyword">int</span> remotePort = request.getRemotePort();</span><br><span class="line">        String remoteUser = request.getRemoteUser();</span><br><span class="line">        String method = request.getMethod();</span><br><span class="line">        <span class="comment">//得到请求URL地址时使用的方法</span></span><br><span class="line">        String pathInfo = request.getPathInfo();</span><br><span class="line">        String localAddr = request.getLocalAddr();</span><br><span class="line">        <span class="comment">//获取WEB服务器的IP地址</span></span><br><span class="line">        String localName = request.getLocalName();</span><br><span class="line">        <span class="comment">//获取WEB服务器的主机名</span></span><br><span class="line">        response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">        <span class="comment">//设置将字符以"UTF-8"编码输出到客户端浏览器</span></span><br><span class="line">        <span class="comment">//通过设置响应头控制浏览器以UTF-8的编码显示数据，如果不加这句话，那么浏览</span></span><br><span class="line">        <span class="comment">//器显示的将是乱码</span></span><br><span class="line">        response.setHeader(<span class="string">"content-type"</span>, <span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        out.write(<span class="string">"获取到的客户机信息如下："</span>);</span><br><span class="line">        out.write(<span class="string">"&lt;hr/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"请求的URL地址："</span>+requestUrl);</span><br><span class="line">        out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"请求的资源："</span>+requestUri);</span><br><span class="line">        out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"请求的URL地址中附带的参数："</span>+queryString);</span><br><span class="line">        out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"来访者的IP地址："</span>+remoteAddr);</span><br><span class="line">        out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"来访者的主机名："</span>+remoteHost);</span><br><span class="line">        out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"使用的端口号："</span>+remotePort);</span><br><span class="line">        out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"remoteUser："</span>+remoteUser);</span><br><span class="line">        out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"请求使用的方法："</span>+method);</span><br><span class="line">        out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"pathInfo："</span>+pathInfo);</span><br><span class="line">        out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"localAddr："</span>+localAddr);</span><br><span class="line">        out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"localName："</span>+localName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2020/02/29/JavaWeb/number29.jpg" alt></li>
</ul>
<ol start="2">
<li>获取客户请求头</li>
</ol>
<ul>
<li>getHeader(string name)方法:String</li>
<li>getHeaders(String name)方法:Enumeration</li>
<li>getHeaderNames()方法 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo02</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">        <span class="comment">//设置将字符以"UTF-8"编码输出到客户端浏览器</span></span><br><span class="line">        <span class="comment">//通过设置响应头控制浏览器以UTF-8的编码显示数据</span></span><br><span class="line">        response.setHeader(<span class="string">"content-type"</span>, <span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        Enumeration&lt;String&gt; reqHeadInfos = request.getHeaderNames();</span><br><span class="line">        <span class="comment">//获取所有的请求头</span></span><br><span class="line">        out.write(<span class="string">"获取到的客户端所有的请求头信息如下："</span>);</span><br><span class="line">        out.write(<span class="string">"&lt;hr/&gt;"</span>);</span><br><span class="line">        <span class="keyword">while</span> (reqHeadInfos.hasMoreElements()) &#123;</span><br><span class="line">            String headName = (String) reqHeadInfos.nextElement();</span><br><span class="line">            String headValue = request.getHeader(headName);</span><br><span class="line">            <span class="comment">//根据请求头的名字获取对应的请求头的值</span></span><br><span class="line">            out.write(headName+<span class="string">":"</span>+headValue);</span><br><span class="line">            out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        out.write(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        out.write(<span class="string">"获取到的客户端Accept-Encoding请求头的值："</span>);</span><br><span class="line">        out.write(<span class="string">"&lt;hr/&gt;"</span>);</span><br><span class="line">        String value = request.getHeader(<span class="string">"Accept-Encoding"</span>);</span><br><span class="line">        <span class="comment">//获取Accept-Encoding请求头对应的值</span></span><br><span class="line">        out.write(value);</span><br><span class="line">        Enumeration&lt;String&gt; e = request.getHeaders(<span class="string">"Accept-Encoding"</span>);</span><br><span class="line">        <span class="keyword">while</span> (e.hasMoreElements()) &#123;</span><br><span class="line">            String string = (String) e.nextElement();</span><br><span class="line">            System.out.println(string);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2020/02/29/JavaWeb/number30.jpg" alt></li>
</ul>
<ol start="3">
<li>获得客户机请求参数(客户端提交的数据)</li>
</ol>
<ul>
<li>getParameter(String)方法(常用)</li>
<li>getParameterValues(String name)方法(常用)</li>
<li>getParameterMap()方法(编写框架时常用)<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">import</span>=<span class="string">"java.util.*"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Html的Form表单元素<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fieldset</span> <span class="attr">style</span>=<span class="string">"width:500px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">legend</span>&gt;</span>Html的Form表单元素<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--form表单的action属性规定当提交表单时，向何处发送表单数据，method属性指明</span></span><br><span class="line"><span class="comment">    表单的提交方式，分为get和post，默认为get--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;</span></span></span><br><span class="line"><span class="tag"><span class="string">    /servlet/RequestDemo03"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--输入文本框，SIZE表示显示长度，maxlength表示最多输入长度--&gt;</span></span><br><span class="line">    编<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>号(文本框)：</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"userid"</span> <span class="attr">value</span>=<span class="string">"NO."</span> <span class="attr">size</span>=<span class="string">"2"</span> <span class="attr">maxlength</span>=<span class="string">"2"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--输入文本框，通过value指定其显示的默认值--&gt;</span></span><br><span class="line">    用户名(文本框)：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"请输入用户名"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--密码框，其中所有输入的内容都以密文的形式显示--&gt;</span></span><br><span class="line">    密<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>码(密码框)：</span><br><span class="line">    <span class="comment">&lt;!--&amp;nbsp;表示的是一个空格--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"userpass"</span> <span class="attr">value</span>=<span class="string">"请输入密码"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--单选按钮，通过checked指定默认选中，名称必须一样，其中value为真正需要的内容--&gt;</span></span><br><span class="line">    性<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>别(单选框)：</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"男"</span> <span class="attr">checked</span>&gt;</span>男 </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"女"</span>&gt;</span>女<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--下拉列表框，通过&lt;option&gt;元素指定下拉的选项--&gt;</span></span><br><span class="line">    部<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>门(下拉框)：</span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"dept"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"技术部"</span>&gt;</span>技术部<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"销售部"</span> <span class="attr">SELECTED</span>&gt;</span>销售部<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"财务部"</span>&gt;</span>财务部<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--复选框，可以同时选择多个选项，名称必须一样，其中value为真正需要的内容--&gt;</span></span><br><span class="line">    兴<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>趣(复选框)： </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"inst"</span> <span class="attr">value</span>=<span class="string">"唱歌"</span>&gt;</span>唱歌 </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"inst"</span> <span class="attr">value</span>=<span class="string">"游泳"</span>&gt;</span>游泳 </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"inst"</span> <span class="attr">value</span>=<span class="string">"跳舞"</span>&gt;</span>跳舞 </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"inst"</span> <span class="attr">value</span>=<span class="string">"编程"</span> <span class="attr">checked</span>&gt;</span>编程 </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"inst"</span> <span class="attr">value</span>=<span class="string">"上网"</span>&gt;</span>上网</span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--大文本输入框，宽度为34列，高度为5行--&gt;</span></span><br><span class="line">    说<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>明(文本域)：</span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"note"</span> <span class="attr">cols</span>=<span class="string">"34"</span> <span class="attr">rows</span>=<span class="string">"5"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--隐藏域，在页面上无法看到，专门用来传递参数或者保存参数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"hiddenField"</span> <span class="attr">value</span>=<span class="string">"hiddenvalue"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--提交表单按钮，当点击提交后，所有填写的表单内容都会被传输到服务器端--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交(提交按钮)"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--重置表单按钮，当点击重置后，所有表单恢复原始显示内容--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置(重置按钮)"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--表单结束--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--完结标记--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--完结标记--&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestDemo03</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//客户端是以UTF-8编码提交表单数据的，所以需要设置服务器端以UTF-8的编码进</span></span><br><span class="line">        <span class="comment">//行接收，否则对于中文数据就会产生乱码</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 编&amp;nbsp;&amp;nbsp;号(文本框)：</span></span><br><span class="line"><span class="comment">         * &lt;input type="text" name="userid" value="NO." size="2" maxlength="2"&gt;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        String userid = request.getParameter(<span class="string">"userid"</span>);</span><br><span class="line">        <span class="comment">//获取填写的编号，userid是文本框的名字，&lt;input type="text" name="userid"&gt;</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 用户名(文本框)&lt;input type="text" name="username" value="请输入用户名"&gt;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        String username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">        <span class="comment">//获取填写的用户名</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 密码(密码框)&lt;input type="password" name="userpass" value="请输入密码"&gt;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        String userpass = request.getParameter(<span class="string">"userpass"</span>);</span><br><span class="line">        <span class="comment">//获取填写的密码</span></span><br><span class="line">        String sex = request.getParameter(<span class="string">"sex"</span>);</span><br><span class="line">        <span class="comment">//获取选中的性别</span></span><br><span class="line">        String dept = request.getParameter(<span class="string">"dept"</span>);</span><br><span class="line">        <span class="comment">//获取选中的部门</span></span><br><span class="line">        <span class="comment">//获取选中的兴趣，因为可以选中多个值，所以获取到的值是一个字符串数组，</span></span><br><span class="line">        <span class="comment">//因此需要使用getParameterValues方法来获取</span></span><br><span class="line">        String[] insts = request.getParameterValues(<span class="string">"inst"</span>);</span><br><span class="line">        String note = request.getParameter(<span class="string">"note"</span>);</span><br><span class="line">        <span class="comment">//获取填写的说明信息</span></span><br><span class="line">        String hiddenField = request.getParameter(<span class="string">"hiddenField"</span>);</span><br><span class="line">        <span class="comment">//获取隐藏域的内容</span></span><br><span class="line">        String instStr=<span class="string">""</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 获取数组数据的技巧，可以避免insts数组为null时引发的空指针异常错误！</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; insts!=<span class="keyword">null</span> &amp;&amp; i &lt; insts.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == insts.length-<span class="number">1</span>) &#123;</span><br><span class="line">                instStr+=insts[i];</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                instStr+=insts[i]+<span class="string">","</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">        <span class="comment">//设置服务器端以UTF-8编码输出数据到客户端</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        <span class="comment">//设置客户端浏览器以UTF-8编码解析数据  </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="4">
<li>对于以get方式传输的数据，request即使设置了以指定的编码接收数据也是无效的，默认的<br>还是使用ISO8859-1这个字符编码来接收数据，客户端以UTF-8的编码传输数据到服务器端，而<br>服务器端的request对象使用的是ISO8859-1这个字符编码来接收数据，服务器和客户端沟通的<br>编码不一致因此才会产生中文乱码的。解决办法：在接收到数据后，先获取request对象以<br>ISO8859-1字符编码接收到的原始数据的字节数组，然后通过字节数组以指定的编码构建字符串，<br>解决乱码问题。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span>&#123;</span><br><span class="line">        String name = request.getParameter(<span class="string">"name"</span>);</span><br><span class="line">        <span class="comment">//接收数据</span></span><br><span class="line">        name =<span class="keyword">new</span> String(name.getBytes(<span class="string">"ISO8859-1"</span>), <span class="string">"UTF-8"</span>) ;</span><br><span class="line">        <span class="comment">//获取request对象以ISO8859-1字符编码接收到的原始数据的字节数组，然后通</span></span><br><span class="line">        <span class="comment">//过字节数组以指定的编码构建字符串，解决乱码问题</span></span><br><span class="line">        System.out.println(<span class="string">"name："</span>+name);    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Request实现请求转发"><a href="#Request实现请求转发" class="headerlink" title="Request实现请求转发"></a>Request实现请求转发</h3><ol>
<li>请求转发：指一个web资源收到客户端请求后，通知服务器去调用另外一个web资源进行处理。</li>
<li>请求转发的应用场景：MVC设计模式</li>
<li>在Servlet中实现请求转发的两种方式：</li>
</ol>
<ul>
<li>通过ServletContext的getRequestDispatcher(String path)方法，该方法返<br>回一个RequestDispatcher对象，调用这个对象的forward方法可以实现请求转发。</li>
<li>通过request对象提供的getRequestDispatche(String path)方法，该方法返回一个<br>RequestDispatcher对象，调用这个对象的forward方法可以实现请求转发。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RequestDispatcher reqDispatcher =<span class="keyword">this</span>.getServletContext()</span><br><span class="line">.getRequestDispatcher(<span class="string">"/test.jsp"</span>);</span><br><span class="line">reqDispatcher.forward(request, response);</span><br><span class="line"></span><br><span class="line">request.getRequestDispatcher(<span class="string">"/test.jsp"</span>).forward(request, response);</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="4">
<li>request可以作为一个Map容器</li>
</ol>
<ul>
<li>setAttribute(String name,Object o)方法，将数据作为request对象的一个属性存放<br>到request对象中，例如：request.setAttribute(“data”, data);</li>
<li>getAttribute(String name)方法，获取request对象的name属性的属性值<br>，例如request.getAttribute(“data”)</li>
<li>removeAttribute(String name)方法，移除request对象的name属性，例如<br>request.removeAttribute(“data”)</li>
<li>getAttributeNames方法，获取request对象的所有属性名，返回的是一个枚举，例如<br>Enumeration<String> attrNames = request.getAttributeNames();</String></li>
</ul>
<h3 id="重定向和请求转发的区别"><a href="#重定向和请求转发的区别" class="headerlink" title="重定向和请求转发的区别"></a>重定向和请求转发的区别</h3><ol>
<li>一个web资源收到客户端请求后，通知服务器去调用另外一个web资源进行处理，称之为请求<br>转发/307。</li>
<li>一个web资源收到客户端请求后，通知浏览器去访问另外一个web资源进行处理，称之为请求<br>重定向/302。</li>
</ol>
<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>Cookie不是饼干！！！</p>
<h3 id="会话"><a href="#会话" class="headerlink" title="会话"></a>会话</h3><ol>
<li>用户开一个浏览器，点击多个超链接，访问服务器多个web资源，然后关闭浏览器，整个过程<br>称  之为一个会话。</li>
<li>有状态会话：一个同学来过教室，下次再来教室，我们会知道这个同学曾经来过，这称之为<br>有状态会话。</li>
<li>每个用户在使用浏览器与服务器进行会话的过程中，不可避免各自会产生一些数据，程序要<br>想办法为每个用户保存这些数据。</li>
</ol>
<h3 id="保存会话数据"><a href="#保存会话数据" class="headerlink" title="保存会话数据"></a>保存会话数据</h3><ol>
<li>Cookie是客户端技术，程序把每个用户的数据以cookie的形式写给用户各自的浏览器。当<br>用户使用浏览器再去访问服务器中的web资源时，就会带着各自的数据去。这样，web资源处理<br>的就是用户各自的数据了</li>
<li>Session是服务器端技术，利用这个技术，服务器在运行时可以为每一个用户的浏览器创<br>建一个其独享的session对象，由于session为用户浏览器独享，所以用户在访问服务器的web<br>资源时，可以把各自的数据放在各自的session中，当用户再去访问服务器中的其它web资源时，<br>其它web资源再从用户各自的session中取出数据为用户服务。</li>
</ol>
<h3 id="Cookie使用"><a href="#Cookie使用" class="headerlink" title="Cookie使用"></a>Cookie使用</h3><ol>
<li>使用cookie记录用户上一次访问的时间<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CookieDemo01</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//设置服务器端以UTF-8编码进行输出</span></span><br><span class="line">        response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">        <span class="comment">//设置浏览器以UTF-8编码进行接收,解决中文乱码问题</span></span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        <span class="comment">//获取浏览器访问访问服务器时传递过来的cookie数组</span></span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line">        <span class="comment">//如果用户是第一次访问，那么得到的cookies将是null</span></span><br><span class="line">        <span class="keyword">if</span> (cookies!=<span class="keyword">null</span>) &#123;</span><br><span class="line">            out.write(<span class="string">"您上次访问的时间是："</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cookies.length; i++) &#123;</span><br><span class="line">                Cookie cookie = cookies[i];</span><br><span class="line">                <span class="keyword">if</span> (cookie.getName().equals(<span class="string">"lastAccessTime"</span>)) &#123;</span><br><span class="line">                    Long lastAccessTime =Long.parseLong(cookie.getValue());</span><br><span class="line">                    Date date = <span class="keyword">new</span> Date(lastAccessTime);</span><br><span class="line">                    out.write(date.toLocaleString());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            out.write(<span class="string">"这是您第一次访问本站！"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//用户访问过之后重新设置用户的访问时间，存储到cookie中，然后发送到客户端浏览器</span></span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"lastAccessTime"</span>, </span><br><span class="line">        System.currentTimeMillis()+<span class="string">""</span>);</span><br><span class="line">        <span class="comment">//创建一个cookie，cookie的名字是lastAccessTime</span></span><br><span class="line">        <span class="comment">//将cookie对象添加到response对象中，这样服务器在输出response对象中的</span></span><br><span class="line">        <span class="comment">//内容时就会把cookie也输出到客户端浏览器</span></span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>在上面的例子中，在程序代码中并没有使用setMaxAge方法设置cookie的有效期，所以当关<br>闭浏览器之后，cookie就失效了，要想在关闭了浏览器之后，cookie依然有效，那么在创建<br>cookie时，就要为cookie设置一个有效期。<br>用户第一次访问时，服务器发送给浏览器的cookie就存储到了硬盘上<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用户访问过之后重新设置用户的访问时间，存储到cookie中，然后发送到客户端浏览器</span></span><br><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"lastAccessTime"</span>, System.currentTimeMillis()+<span class="string">""</span>);</span><br><span class="line"><span class="comment">//创建一个cookie，cookie的名字是lastAccessTime</span></span><br><span class="line"><span class="comment">//设置Cookie的有效期为1天</span></span><br><span class="line">cookie.setMaxAge(<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>);</span><br><span class="line"><span class="comment">//将cookie对象添加到response对象中，这样服务器在输出response对象中的内容时就会把</span></span><br><span class="line"><span class="comment">//cookie也输出到客户端浏览器</span></span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Cookie的注意细节"><a href="#Cookie的注意细节" class="headerlink" title="Cookie的注意细节"></a>Cookie的注意细节</h3><ol>
<li>一个Cookie只能标识一种信息，它至少含有一个标识该信息的名称name和设置值value</li>
<li>一个WEB站点可以给一个WEB浏览器发送多个Cookie，一个WEB浏览器也可以存储多个WEB站<br>点提供的Cookie。</li>
<li>浏览器一般只允许存放300个Cookie，每个站点最多存放20个Cookie，每个Cookie的大小<br>限制为4KB。</li>
<li>如果创建了一个cookie，并将他发送到浏览器，默认情况下它是一个会话级别的cookie<br>即存储在浏览器的内存中，用户退出浏览器之后即被删除。若希望浏览器将该cookie存储在磁盘<br>上，则需要使用maxAge，并给出一个以秒为单位的时间。将最大时效设为0则是命令浏览器删除该<br>cookie。<br>5 删除cookie<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CookieDemo02</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//创建一个名字为lastAccessTime的cookie</span></span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"lastAccessTime"</span>, </span><br><span class="line">        	System.currentTimeMillis()+<span class="string">""</span>);</span><br><span class="line">        <span class="comment">//将cookie的有效期设置为0，命令浏览器删除该cookie</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><p>在WEB开发中，服务器可以为每个用户浏览器创建一个会话对象（session对象），注意<br>一个浏览器独占一个session对象(默认情况下)。因此，在需要保存用户数据时，服务器程序<br>可以把用户数据写到用户浏览器独占的session中，当用户使用浏览器访问其它程序时，其它<br>程序可以从用户的session中取出该用户的数据，为用户服务。</p>
<h3 id="Cookie和Session的区别"><a href="#Cookie和Session的区别" class="headerlink" title="Cookie和Session的区别"></a>Cookie和Session的区别</h3><ul>
<li>Cookie是把用户的数据写给用户的浏览器。</li>
<li>Session技术把用户的数据写到用户独占的session中。</li>
<li>Session对象由服务器创建，开发人员可以调用request对象的getSession方法得到<br>session对象。</li>
</ul>
<h3 id="Session实现原理"><a href="#Session实现原理" class="headerlink" title="Session实现原理"></a>Session实现原理</h3><p>服务器创建session出来后，会把session的id号，以cookie的形式回写给客户机，这样，只要<br>客户机的浏览器不关，再去访问服务器时，都会带着session的id号去，服务器发现客户机浏览<br>器带session id过来了，就会使用内存中与之对应的session为之服务</p>
<ol>
<li>第一次访问时，服务器会创建一个新的sesion，并且把session的Id以cookie的形式发送<br>给客户端浏览器,再次请求服务器，此时就可以看到浏览器再请求服务器时，会把存储到cookie<br>中的session的Id一起传递到服务器端了<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionDemo1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse </span></span></span><br><span class="line"><span class="function"><span class="params">    	response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        response.setCharacterEncoding(<span class="string">"UTF=8"</span>);</span><br><span class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">        <span class="comment">//使用request对象的getSession()获取session，如果session不存在则创建一个</span></span><br><span class="line">        HttpSession session = request.getSession();</span><br><span class="line">        <span class="comment">//将数据存储到session中</span></span><br><span class="line">        session.setAttribute(<span class="string">"data"</span>, <span class="string">"高明"</span>);</span><br><span class="line">        <span class="comment">//获取session的Id</span></span><br><span class="line">        String sessionId = session.getId();</span><br><span class="line">        <span class="comment">//判断session是不是新创建的</span></span><br><span class="line">        <span class="keyword">if</span> (session.isNew()) &#123;</span><br><span class="line">            response.getWriter().print(<span class="string">"session创建成功，session的id是："</span></span><br><span class="line">            	+sessionId);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            response.getWriter().print(</span><br><span class="line">            	<span class="string">"服务器已经存在该session了，session的id是"</span>+sessionId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Session对象的创建和销毁"><a href="#Session对象的创建和销毁" class="headerlink" title="Session对象的创建和销毁"></a>Session对象的创建和销毁</h3><ol>
<li>Session的创建时机，在程序中第一次调用request.getSession()方法时就会创建一个<br>新的Session，可以用isNew()方法来判断Session是不是新创建的<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用request对象的getSession()获取session，如果session不存在则创建一个</span></span><br><span class="line">HttpSession session = request.getSession();</span><br><span class="line"><span class="comment">//获取session的Id</span></span><br><span class="line">String sessionId = session.getId();</span><br><span class="line"><span class="comment">//判断session是不是新创建的</span></span><br><span class="line"><span class="keyword">if</span> (session.isNew()) &#123;</span><br><span class="line">    response.getWriter().print(<span class="string">"session创建成功，session的id是："</span>+sessionId);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    response.getWriter().print(</span><br><span class="line">    	<span class="string">"服务器已经存在session，session的id是："</span>+sessionId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Session的销毁，session对象默认30分钟没有使用，则服务器会自动销毁session，<br>在web.xml文件中可以手工配置session的失效时间<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>也可以手动销毁<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HttpSession session = request.getSession();</span><br><span class="line"><span class="comment">//手工调用session.invalidate方法，摧毁session</span></span><br><span class="line">session.invalidate();</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Session防止表单重复提交"><a href="#Session防止表单重复提交" class="headerlink" title="Session防止表单重复提交"></a>Session防止表单重复提交</h3><ol>
<li>在服务器端生成一个唯一的随机标识号，专业术语称为Token(令牌)，同时在当前用户的<br>Session域中保存这个Token。然后将Token发送到客户端的Form表单中，在Form表单中使用隐<br>藏域来存储这个Token，表单提交的时候连同这个Token一起提交到服务器端，然后在服务器端<br>判断客户端提交上来的Token与服务器端生成的Token是否一致，如果不一致，那就是重复提交<br>了，此时服务器端就可以不处理重复提交的表单。如果相同则处理表单提交，处理完后清除当前<br>用户的Session域中存储的标识号</li>
<li>以下情况会拒绝表单的请求</li>
</ol>
<ul>
<li>存储Session域中的Token(令牌)与表单提交的Token(令牌)不同。</li>
<li>当前用户的Session中不存在Token(令牌)。</li>
<li>用户提交的表单数据中没有Token(令牌)。</li>
</ul>
<h2 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h2><ol>
<li>JSP虽然已经过时，但是了解一下还是有必要的</li>
<li>JSP全称是Java Server Pages，它和servle技术一样，都是SUN公司定义的一种用<br>于开发动态web资源的技术。</li>
<li>JSP这门技术的最大的特点在于，写jsp就像在写html，但它相比html而言，html只能为<br>用户提供静态数据，而Jsp技术允许在页面中嵌套java代码，为用户提供动态数据。</li>
</ol>
<h3 id="JSP原理"><a href="#JSP原理" class="headerlink" title="JSP原理"></a>JSP原理</h3><ol>
<li>浏览器向服务器发请求，不管访问的是什么资源，其实都是在访问Servlet，所以当访问一个<br>jsp页面时，其实也是在访问一个Servlet，服务器在执行jsp的时候，首先把jsp翻译成一个<br>Servlet，所以我们访问jsp时，其实不是在访问jsp，而是在访问jsp翻译过后的那个Servlet<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">String path = request.getContextPath();</span><br><span class="line">String basePath = request.getScheme()+<span class="string">"://"</span>+request.getServerName()+</span><br><span class="line"><span class="string">":"</span>+request.getServerPort()+path+<span class="string">"/"</span>;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;base href=<span class="string">"&lt;%=basePath%&gt;"</span>&gt;</span><br><span class="line">    &lt;title&gt;First Jsp&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        out.print(<span class="string">"Hello Jsp"</span>);</span><br><span class="line">    %&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
<li>通过浏览器访问index.jsp时，服务器首先将index.jsp翻译成一个index_jsp.class,<br>index_jsp这个类是继承HttpJspBase这个类,HttpJspBase类是继承HttpServlet的,<br>所以index_jsp类也是一个Servlet</li>
<li>在jsp中编写的java代码和html代码都会被翻译到_jspService方法中去，在jsp中<br>编写的java代码会原封不动地翻译成java代码</li>
<li>在jsp中编写的java代码会被翻译到_jspService方法中去，当执行_jspService方法处<br>理请求时，就会执行在jsp编写的java代码了，所以Jsp页面中的java代码服务器是通过调用<br>_jspService方法处理请求时执行的。</li>
</ol>
<h3 id="Web服务器给jsp提供的对象"><a href="#Web服务器给jsp提供的对象" class="headerlink" title="Web服务器给jsp提供的对象"></a>Web服务器给jsp提供的对象</h3><ol>
<li>8大内置对象</li>
</ol>
<ul>
<li>PageContext pageContext;</li>
<li>HttpSession session;</li>
<li>ServletContext application;</li>
<li>ServletConfig config;</li>
<li>JspWriter out;</li>
<li>Object page = this;</li>
<li>HttpServletRequest request, </li>
<li>HttpServletResponse response</li>
</ul>
<ol start="2">
<li>其中page对象，request和response已经完成了实例化，而其它5个没有实例化的对象通过<br>下面的方式实例化<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pageContext = _jspxFactory.getPageContext</span><br><span class="line">(<span class="keyword">this</span>, request, response,<span class="keyword">null</span>, <span class="keyword">true</span>, <span class="number">8192</span>, <span class="keyword">true</span>);</span><br><span class="line">application = pageContext.getServletContext();</span><br><span class="line">config = pageContext.getServletConfig();</span><br><span class="line">session = pageContext.getSession();</span><br><span class="line">out = pageContext.getOut();</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="JSP实践"><a href="#JSP实践" class="headerlink" title="JSP实践"></a>JSP实践</h3><ol>
<li>不管是JSP还是Servlet，虽然都可以用于开发动态web资源。但由于这2门技术各自的特点，<br>在长期的软件实践中，人们逐渐把servlet作为web应用中的控制器组件来使用，而把JSP技术<br>作为数据显示模板来使用。其原因为，程序的数据通常要美化后再输出：让jsp既用java代码产<br>生动态数据，又做美化会导致页面难以维护。让servlet既产生数据，又在里面嵌套html代码美<br>化数据，同样也会导致程序可读性差，难以维护。因此最好的办法就是根据这两门技术的特点，<br>让它们各自负责各的，servlet只负责响应请求产生数据，并把数据通过转发技术带给jsp，数<br>据的显示jsp来做。</li>
<li>第一次执行客户端通过电脑连接服务器，因为是请求是动态的，所以所有的请求交给WEB容器<br>来处理</li>
</ol>
<ul>
<li>在容器中找到需要执行的*.jsp文件</li>
<li>之后*.jsp文件通过转换变为*.java文件</li>
<li>*.java文件经过编译后，形成*.class文件</li>
<li>最终服务器要执行形成的*.class文件</li>
<li>第二次执行因为已经存在了*.class文件，所以不在需要转换和编译的过程</li>
<li>修改后执行，源文件已经被修改过了，所以需要重新转换，重新编译。</li>
</ul>
<h3 id="JSP基础语法"><a href="#JSP基础语法" class="headerlink" title="JSP基础语法"></a>JSP基础语法</h3><ol>
<li>任何语言都有自己的语法，JAVA中有，JSP虽然是在JAVA上的一种应用，但是依然有其自己<br>扩充的语法，而且在JSP中，所有的JAVA语句都可以使用。</li>
<li>JSP页面中的HTML内容称之为JSP模版元素。JSP模版元素定义了网页的基本骨架，即定义了<br>页面的结构和外观。</li>
<li>在&lt;% %&gt;中可以定义变量、编写语句，不能定义方法。</li>
<li>&lt;%= 变量或表达式 %&gt;</li>
</ol>
<h3 id="JSP指令简介"><a href="#JSP指令简介" class="headerlink" title="JSP指令简介"></a>JSP指令简介</h3><ol>
<li>JSP指令（directive）是为JSP引擎而设计的，它们并不直接产生任何可见输出，而只是告<br>诉引擎如何处理JSP页面中的其余部分。JSP指令的基本语法格式：&lt;%@ 指令 属性名=”值” %&gt;</li>
</ol>
<ul>
<li>page指令</li>
<li>Include指令</li>
<li>taglib指令</li>
</ul>
<h3 id="JSP运行原理"><a href="#JSP运行原理" class="headerlink" title="JSP运行原理"></a>JSP运行原理</h3><ol>
<li>每个JSP 页面在第一次被访问时，WEB容器都会把请求交给JSP引擎（即一个Java程序）<br>去处理。JSP引擎先将JSP翻译成一个_jspServlet(实质上也是一个servlet) ，然后按照<br>servlet的调用方式进行调用。</li>
<li>由于JSP第一次访问时会翻译成servlet，所以第一次访问通常会比较慢，但第二次访问，<br>JSP引擎如果发现JSP没有变化，就不再翻译，而是直接调用，所以程序的执行效率不会受到影响。</li>
<li>JSP引擎在调用JSP对应的_jspServlet时，会传递或创建9个与web开发相关的对象<br>供_jspServlet使用。JSP技术的设计者为便于开发人员在编写JSP页面时获得这些web对象的<br>引用，特意定义了9个相应的变量，开发人员在JSP页面中通过这些变量就可以快速获得这9大<br>对象的引用。</li>
</ol>
<ul>
<li>pageContext</li>
<li>request</li>
<li>response</li>
<li>session</li>
<li>application</li>
<li>config</li>
<li>out</li>
<li>page</li>
<li>exception</li>
</ul>
<h3 id="JSP四种属性范围"><a href="#JSP四种属性范围" class="headerlink" title="JSP四种属性范围"></a>JSP四种属性范围</h3><ol>
<li>request：如果客户向服务器发请求，产生的数据，用户看完就没用了，像这样的数据就存<br>在request域,像新闻数据，属于用户看完就没用的。</li>
<li>session：如果客户向服务器发请求，产生的数据，用户用完了等一会儿还有用，像这样的<br>数据就存在session域中，像购物数据，用户需要看到自己购物信息，并且等一会儿，还要用这<br>个购物数据结帐。</li>
<li>application(servletContext)：如果客户向服务器发请求，产生的数据，用户用完了，<br>还要给其它用户用，像这样的数据就存在application(servletContext)域中，像聊天数据。</li>
</ol>
<h2 id="JavaBean"><a href="#JavaBean" class="headerlink" title="JavaBean"></a>JavaBean</h2><ol>
<li>JavaBean是一个遵循特定写法的Java类，它通常具有如下特点：</li>
</ol>
<ul>
<li>这个Java类必须具有一个无参的构造函数</li>
<li>属性必须私有化。</li>
<li>私有化的属性必须通过public类型的方法暴露给其它程序，并且方法的命名也必须遵守一定<br>的命名规范。</li>
</ul>
<ol start="2">
<li>JavaBean常用于封装数据<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 姓名 String类型</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// 性别 String类型</span></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="comment">// 年龄 int类型</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="comment">//是否已婚 boolean类型</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> married;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isMarried</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> married;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMarried</span><span class="params">(<span class="keyword">boolean</span> married)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.married = married;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="JSP-JavaBean开发模式"><a href="#JSP-JavaBean开发模式" class="headerlink" title="JSP+JavaBean开发模式"></a>JSP+JavaBean开发模式</h3><ol>
<li>在jsp+javabean架构中，JSP负责控制逻辑、表现逻辑、业务对象（javabean）的调用。</li>
<li>JSP+JavaBean模式适合开发业务逻辑不太复杂的web应用程序，这种模式下，JavaBean<br>用于封装业务数据，JSP即负责处理用户请求，又显示数据 <img src="/2020/02/29/JavaWeb/number31.jpg" alt></li>
</ol>
<h3 id="Servlet-JSP-JavaBean"><a href="#Servlet-JSP-JavaBean" class="headerlink" title="Servlet+JSP+JavaBean"></a>Servlet+JSP+JavaBean</h3><ol>
<li>在平时的JavaWeb项目开发中，在不使用第三方mvc开发框架的情况下，通常会选择<br>Servlet+JSP+JavaBean开发模式来开发JavaWeb项目，Servlet+JSP+JavaBean组合开发<br>就是一种MVC开发模式了，控制器(Controller)采用Servlet、模型(Model)采用JavaBean、<br>视图(View)采用JSP。在讲解Servlet+JSP+JavaBean开发模式之前，先简单了解一下MVC开发模式。</li>
<li>Web开发中的请求响应模型  <img src="/2020/02/29/JavaWeb/number32.jpg" alt></li>
<li>在web世界中</li>
</ol>
<ul>
<li>Web浏览器（如IE）发起请求，如访问 <a href="http://www.iteye.com/" target="_blank" rel="noopener">http://www.iteye.com/</a></li>
<li>Web服务器（如Tomcat）接收请求，处理请求（比如用户新增，则将把用户保存一下），<br>最后产生响应（一般为html）。</li>
<li>web服务器处理完成后，返回内容给web客户端（一般就是我们的浏览器），客户端对接收的<br>内容进行处理（如web浏览器将会对接收到的html内容进行渲染以展示给客户）。</li>
<li>在Web世界里都是Web客户端发起请求，Web服务器接收、处理并产生响应。</li>
</ul>
<h3 id="标准MVC模型"><a href="#标准MVC模型" class="headerlink" title="标准MVC模型"></a>标准MVC模型</h3><ol>
<li>是一种架构型的模式，本身不引入新功能，只是帮助我们将开发的结构组织的更加合理，<br>使展示与模型分离、流程控制逻辑、业务逻辑调用与展示逻辑分离 <img src="/2020/02/29/JavaWeb/number33.jpg" alt></li>
<li>Model（模型）：数据模型，提供要展示的数据，因此包含数据和行为，可以认为是领域<br>模型(domain)或JavaBean组件（包含数据和行为），不过现在一般都分离开来：ValueObject<br>（数据） 和 服务层（行为）。也就是模型提供了模型数据查询和模型数据的状态更新等功能，<br>包括数据和业务。</li>
<li>View（视图）：负责进行模型的展示，一般就是我们见到的用户界面，客户想看到的东西。</li>
<li>Controller（控制器）：接收用户请求，委托给模型进行处理（状态改变），处理完毕后<br>把返回的模型数据返回给视图，由视图负责展示。 也就是说控制器做了个调度员的工作。</li>
</ol>
<h3 id="Servlet-JSP-JavaBean-1"><a href="#Servlet-JSP-JavaBean-1" class="headerlink" title="Servlet+JSP+JavaBean"></a>Servlet+JSP+JavaBean</h3><ol>
<li>Servlet+JSP+JavaBean架构其实可以认为就是我们所说的Web MVC模型，只是控制器采<br>用Servlet、模型采用JavaBean、视图采用JSP  <img src="/2020/02/29/JavaWeb/number34.jpg" alt></li>
</ol>
<h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><h3 id="数据库驱动"><a href="#数据库驱动" class="headerlink" title="数据库驱动"></a>数据库驱动</h3><ol>
<li>这里的驱动的概念和平时听到的那种驱动的概念是一样的，比如平时购买的声卡，网卡直接<br>插到计算机上面是不能用的，必须要安装相应的驱动程序之后才能够使用声卡和网卡，同样道理<br>，我们安装好数据库之后，我们的应用程序也是不能直接使用数据库的，必须要通过相应的数据<br>库驱动程序，通过驱动程序去和数据库打交道  <img src="/2020/02/29/JavaWeb/number35.jpg" alt></li>
<li>SUN公司为了简化、统一对数据库的操作，定义了一套Java操作数据库的规范（接口），<br>称之为JDBC。这套接口由数据库厂商去实现，这样，开发人员只需要学习jdbc接口，并通过<br>jdbc加载具体的驱动，就可以操作数据库。 <img src="/2020/02/29/JavaWeb/number36.jpg" alt></li>
</ol>
<h3 id="DriverManager"><a href="#DriverManager" class="headerlink" title="DriverManager"></a>DriverManager</h3><ol>
<li>Jdbc程序中的DriverManager用于加载驱动，并创建与数据库的链接</li>
<li>URL用于标识数据库的位置，通过URL地址告诉JDBC程序连接哪个数据库 <img src="/2020/02/29/JavaWeb/number37.jpg" alt></li>
</ol>
<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><p>事务指逻辑上的一组操作，组成这组操作的各个单元，要不全部成功，要不全部不成功。</p>
<ol>
<li>事务的四大特性</li>
</ol>
<ul>
<li>原子性 原子性是指事务是一个不可分割的工作单位，事务中的操作要么全部<br>成功，要么全部失败。比如在同一个事务中的SQL语句，要么全部执行成功，要么全部执行失败</li>
<li>一致性 事务必须使数据库从一个一致性状态变换到另外一个一致性状态。以转账为例子，<br>A向B转账，假设转账之前这两个用户的钱加起来总共是2000，那么A向B转账之后，不管这两<br>个账户怎么转，A用户的钱和B用户的钱加起来的总额还是2000，这个就是事务的一致性</li>
<li>隔离性 事务的隔离性是多个用户并发访问数据库时，数据库为每一个用户开启的事务，不能<br>被其他事务的操作数据所干扰，多个并发事务之间要相互隔离。</li>
<li>持久性 持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来即<br>使数据库发生故障也不应该对其有任何影响</li>
</ul>
<h3 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h3><ol>
<li>脏读 脏读指一个事务读取了另外一个事务未提交的数据。这是非常危险的，假设Ａ向Ｂ<br>转帐100元，对应sql语句如下所示  </li>
<li>update account set money=money+100 where name=’B’;  </li>
<li>update account set money=money-100  where name=’A’;<br>当第1条sql执行完，第2条还没执行(A未提交时)，如果此时Ｂ查询自己的帐户，<br>就会发现自己多了100元钱。如果A等B走后再回滚，B就会损失100元</li>
<li>不可重复读<br>不可重复读指在一个事务内读取表中的某一行数据，多次读取结果不同。<br>例如银行想查询A帐户余额，第一次查询A帐户为200元，此时A向帐户内存了100元并提交了，<br>银行接着又进行了一次查询，此时A帐户为300元了。银行两次查询不一致，可能就会很困惑，<br>不知道哪次查询是准的。<br>不可重复读和脏读的区别是，脏读是读取前一事务未提交的脏数据，不可重复读是重新读取了前<br>一事务已提交的数据。<br>很多人认为这种情况就对了，无须困惑，当然是后面的为准。我们可以考虑这样一种情况，比如<br>银行程序需要将查询结果分别输出到电脑屏幕和写到文件中，结果在一个事务中针对输出的目的<br>地，进行的两次查询不一致，导致文件和屏幕中的结果不一致，银行工作人员就不知道以哪个为<br>准了。</li>
<li>幻读<br>幻读是指在一个事务内读取到了别的事务插入的数据，导致前后读取不一致。<br>如丙存款100元未提交，这时银行做报表统计account表中所有用户的总额为500元，然后丙<br>提交了，这时银行再统计发现帐户为600元了，造成虚读同样会使银行不知所措，到底以哪个<br>为准。</li>
</ol>
<h3 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h3><ol>
<li>用户每次请求都需要向数据库获得链接，而数据库创建连接通常需要消耗相对较大的资源，<br>创建时间也较长。假设网站一天10万访问量，数据库服务器就需要创建10万次连接，极大的浪费<br>数据库的资源，并且极易造成数据库服务器内存溢出、拓机  <img src="/2020/02/29/JavaWeb/number38.jpg" alt></li>
<li>数据库连接是一种关键的有限的昂贵的资源,这一点在多用户的网页应用程序中体现的尤为<br>突出.对数据库连接的管理能显著影响到整个应用程序的伸缩性和健壮性,影响到程序的性能指<br>标.数据库连接池正式针对这个问题提出来的.数据库连接池负责分配,管理和释放数据库连接,<br>它允许应用程序重复使用一个现有的数据库连接,而不是重新建立一个 <img src="/2020/02/29/JavaWeb/number39.jpg" alt></li>
</ol>
<h2 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h2><ol>
<li>Filter也称之为过滤器，它是Servlet技术中最激动人心的技术，WEB开发人员通过Filter<br>技术，对web服务器管理的所有web资源：例如Jsp, Servlet, 静态图片文件或静态 html 文件<br>等进行拦截，从而实现一些特殊的功能。例如实现URL级别的权限访问控制、过滤敏感词汇、压缩<br>响应信息等一些高级功能。</li>
<li>Servlet API中提供了一个Filter接口，开发web应用时，如果编写的Java类实现了这个<br>接口，则把这个java类称之为过滤器Filter。通过Filter技术，开发人员可以实现用户在访问<br>某个目标资源之前，对访问的请求和响应进行拦截  <img src="/2020/02/29/JavaWeb/number40.jpg" alt></li>
</ol>
<h3 id="Filter实现拦截"><a href="#Filter实现拦截" class="headerlink" title="Filter实现拦截"></a>Filter实现拦截</h3><ol>
<li>Filter接口中有一个doFilter方法，当我们编写好Filter，并配置对哪个web资源进行<br>拦截后，WEB服务器每次在调用web资源的service方法之前，都会先调用一下filter的<br>doFilter方法，因此，在该方法内编写代码可达到如下目的</li>
</ol>
<ul>
<li>调用目标资源之前，让一段代码执行。</li>
<li>是否调用目标资源（即是否让用户访问web资源）。</li>
<li>调用目标资源之后，让一段代码执行。</li>
</ul>
<ol start="2">
<li>web服务器在调用doFilter方法时，会传递一个filterChain对象进来，filterChain对象<br>是filter接口中最重要的一个对 象，它也提供了一个doFilter方法，开发人员可以根据需求<br>决定是否调用此方法，调用该方法，则web服务器就会调用web资源的service方 法，即web资源<br>就会被访问，否则web资源不会被访问。</li>
<li>Filter开发分为二个步骤：</li>
</ol>
<ul>
<li>编写java类实现Filter接口，并实现其doFilter方法。</li>
<li>在 web.xml 文件中使用filter和filter-mapping元素对编写的filter类进行注册<br>，并设置它所能拦截的资源。</li>
</ul>
<h3 id="Filter的生命周期"><a href="#Filter的生命周期" class="headerlink" title="Filter的生命周期"></a>Filter的生命周期</h3><ol>
<li>Filter的创建和销毁由WEB服务器负责。 web 应用程序启动时，web 服务器将创建Filter<br>的实例对象，并调用其init方法，完成对象的初始化功能，从而为后续的用户请求作好拦截的<br>准备工作，filter对象只会创建一次，init方法也只会执行一次。通过init方法的参数，可获<br>得代表当前filter配置信息的FilterConfig对象。</li>
</ol>
<h2 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h2><ol>
<li>监听器是一个专门用于对其他对象身上发生的事件或状态改变进行监听和相应处理的对象，<br>当被监视的对象发生情况时，立即采取相应的行动。监听器其实就是一个实现特定接口的普通<br>java程序，这个程序专门用于监听另一个java对象的方法调用或属性改变，当被监听对象发生<br>上述事件后，监听器某个方法立即被执行。 <img src="/2020/02/29/JavaWeb/number41.jpg" alt></li>
</ol>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">高明</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://skysea-gaoming.github.io/2020/02/29/JavaWeb/">https://skysea-gaoming.github.io/2020/02/29/JavaWeb/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/03/12/vue%E6%80%BB%E7%BB%93/"><i class="fa fa-chevron-left">  </i><span>vue总结</span></a></div><div class="next-post pull-right"><a href="/2020/02/29/JVM/"><span>JVM</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://skysea-gaoming.github.io/2020/02/29/JavaWeb/';
  this.page.identifier = '2020/02/29/JavaWeb/';
  this.page.title = 'JavaWeb';
}
var d = document, s = d.createElement('script');
s.src = "https://" + '你的disqus的 short-name' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://你的disqus的 short-name.disqus.com/count.js" async></script></div></div><footer class="footer-bg" style="background-image: url(http://tiebapic.baidu.com/forum/w%3D580/sign=65511a41a9096b6381195e583c338733/aeb75982b2b7d0a263e3d9f3dcef76094b369a3d.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By 高明</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>